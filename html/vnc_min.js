var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(l,w,C){if(null==l)throw new TypeError("The 'this' value for String.prototype."+C+" must not be null or undefined");if(w instanceof RegExp)throw new TypeError("First argument to String.prototype."+C+" must not be a regular expression");return l+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,w,C){if(l==Array.prototype||l==Object.prototype)return l;l[w]=C.value;return l};
$jscomp.getGlobal=function(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var w=0;w<l.length;++w){var C=l[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(l,w){var C=$jscomp.propertyToPolyfillSymbol[w];if(null==C)return l[w];C=l[C];return void 0!==C?C:l[w]};$jscomp.polyfill=function(l,w,C,I){w&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(l,w,C,I):$jscomp.polyfillUnisolated(l,w,C,I))};
$jscomp.polyfillUnisolated=function(l,w,C,I){C=$jscomp.global;l=l.split(".");for(I=0;I<l.length-1;I++){var G=l[I];if(!(G in C))return;C=C[G]}l=l[l.length-1];I=C[l];w=w(I);w!=I&&null!=w&&$jscomp.defineProperty(C,l,{configurable:!0,writable:!0,value:w})};
$jscomp.polyfillIsolated=function(l,w,C,I){var G=l.split(".");l=1===G.length;I=G[0];I=!l&&I in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var X=0;X<G.length-1;X++){var ja=G[X];if(!(ja in I))return;I=I[ja]}G=G[G.length-1];C=$jscomp.IS_SYMBOL_NATIVE&&"es6"===C?I[G]:null;w=w(C);null!=w&&(l?$jscomp.defineProperty($jscomp.polyfills,G,{configurable:!0,writable:!0,value:w}):w!==C&&($jscomp.propertyToPolyfillSymbol[G]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(G):$jscomp.POLYFILL_PREFIX+G,
G=$jscomp.propertyToPolyfillSymbol[G],$jscomp.defineProperty(I,G,{configurable:!0,writable:!0,value:w})))};$jscomp.polyfill("String.prototype.startsWith",function(l){return l?l:function(w,C){var I=$jscomp.checkStringArgs(this,w,"startsWith");w+="";var G=I.length,X=w.length;C=Math.max(0,Math.min(C|0,I.length));for(var ja=0;ja<X&&C<G;)if(I[C++]!=w[ja++])return!1;return ja>=X}},"es6","es3");$jscomp.arrayIteratorImpl=function(l){var w=0;return function(){return w<l.length?{done:!1,value:l[w++]}:{done:!0}}};
$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(l){if(l)return l;var w=function(G,X){this.$jscomp$symbol$id_=G;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:X})};w.prototype.toString=function(){return this.$jscomp$symbol$id_};var C=0,I=function(G){if(this instanceof I)throw new TypeError("Symbol is not a constructor");return new w("jscomp_symbol_"+(G||"")+"_"+C++,G)};return I},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var w="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),C=0;C<w.length;C++){var I=$jscomp.global[w[C]];"function"===typeof I&&"function"!=typeof I.prototype[l]&&$jscomp.defineProperty(I.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return l},"es6",
"es3");$jscomp.iteratorPrototype=function(l){l={next:l};l[Symbol.iterator]=function(){return this};return l};$jscomp.iteratorFromArray=function(l,w){l instanceof String&&(l+="");var C=0,I=!1,G={next:function(){if(!I&&C<l.length){var X=C++;return{value:w(X,l[X]),done:!1}}I=!0;return{done:!0,value:void 0}}};G[Symbol.iterator]=function(){return G};return G};$jscomp.polyfill("Array.prototype.keys",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(w){return w})}},"es6","es3");
var svManager={getInstance:function(){var l=window.$vnc;return l&&l.running&&l.running()?l:null}};function connvertServer(l){var w={};w.id=l.id;w.server=l.id;w.displayName=l.displayName||l.id;if(l=l.vnc){for(var C in l)w[C]=l[C];w.pwd=l.password||""}return w}
var vmware={updateReqId:1,encVMWServerCaps:1464686202,keybuf:new Uint8Array(9),encoding:[this.encVMWServerCaps],useVMWAck:!1,useVMWKeyEvent:!1,processServerCap:function(l){l=l.getBE32();vmware.useVMWKeyEvent=!!(l&2);vmware.useVMWAck=!!(l&32);svGlobal.logger.info("Server Cap:"+l)},process:function(l){var w=l.getByte();l.getBE16();switch(w){case 0:return vmware.processServerCap(l),vmware.encClientCap();default:svGlobal.logger.warn("TODO: vmware type:"+w)}},encClientCap:function(){var l=new Uint8Array(9);
l[0]=147;l[1]=127;l[2]=3;l[4]=8;return l},encScancode:function(l,w){var C=vmware.keybuf;C[0]=147;C[1]=127;C[2]=0;C[4]=8;C[5]=w>>8;C[6]=w&255;C[7]=l?1:0;return C},encAck:function(l){var w=new Uint8Array(9);w[0]=147;w[1]=127;w[2]=4;w[4]=8;w[5]=vmware.updateReqId;l=10*(l+2);w[7]=l>>8;w[8]=l&255;return w}};
svGlobal.Vnc=function(l,w,C,I){function G(b){return"on"==b||"true"==b||1==b}function X(b){g.loadbalanceToken||(M.randomAppId&&(b=hi5.tool.uuid()),g.loadbalanceToken=M.loadbalanceTokenName?M.loadbalanceTokenName+"="+b:"")}function ja(b,a){function c(f){!D&&f-H>q&&0<h.width&&(z.repaint(h.x,h.y,h.width,h.height),h.width=0,H=f);F=requestAnimationFrame(c)}var d=[],e=null,k=null,h=new hi5.graphic.Rectangle(0,0,0,0),r="Uint8ClampedArray"in window;this.width=b;this.height=a;var q=M.animation||62,x=null,D=
!1,z=this,A=null,H=0,F=0;this.pause=function(f){(D=f)?(window.OffscreenCanvas?x=new OffscreenCanvas(b,a):(x=document.createElement("canvas"),x.width=b,x.height=a),k=e,f=x.getContext("2d",{alpha:!1}),f.drawImage(e.canvas,0,0),z.setContext(f)):k&&(k.drawImage(e.canvas,0,0),z.setContext(k))};this.release=function(){cancelAnimationFrame(F);A=d=e=z=null};this.isPaused=function(){return D};this.setContext=function(f){f!=e&&(e||!f||f.createImageData(1,1).data.buffer||(r=!1),e=f,null!=e&&(A=e.createImageData(b,
a)))};this.getContext=function(){return e};this.resize=function(f,n){for(var m=0;m<n;m++)d[m]=new Uint32Array(f);z.width=b=f;z.height=a=n;null!=e&&(A=e.createImageData(b,a))};z.resize(b,a);this.getBuffer=function(){return d};this.setRGB=function(f,n,m){d[n][f]=m|4278190080};this.getRGB=function(f,n){return d[n][f]};this.setRGBs=function(f,n,m,p,t,v,u){var B=f+m;p=n+p;if(t.subarray)for(;n<p;n++,v+=u)d[n].set(t.subarray(v,v+m),f);else for(var P;n<p;n++,v+=u){var L=v;P=d[n];for(m=f;m<B;m++)P[m]=t[L++]}};
this.moveArea=function(f,n,m,p,t,v){if(0<v)for(t=f+t,v=n+v,--p;0<=p;p--)d[v+p].set(d[n+p].subarray(f,f+m),t);else if(0>v){t=f+t;v=n+v;for(var u=0;u<p;u++)d[v+u].set(d[n+u].subarray(f,f+m),t)}else if(0<t){t=f+t;v=n+v;u=d;var B;for(--m;0<=m;m--){var P=t+m;var L=f+m;for(B=0;B<p;B++)u[v+B][P]=u[n+B][L]}}else for(t=f+t,v=n+v,u=d,B=0;B<m;B++){L=t+B;var Z=f+B;for(P=0;P<p;P++)u[v+P][L]=u[n+P][Z]}};this.getRGBs=function(f,n,m,p){var t=new Uint32Array(m*p);t[0]=0;var v=d;m=f+m;p=n+p;for(var u=0,B=n;B<p;B++)for(n=
f;n<m;n++)t[u++]=v[B][n];return t};this.repaint=function(f,n,m,p){var t=A.data,v=0,u,B;0>f&&(m+=f,f=0);0>n&&(p+=n,n=0);f+m>b&&(m=b-f);n+p>a&&(p=a-n);var P=f+m;var L=n+p;if(r)for(t=new Uint32Array(t.buffer),B=n;B<L;B++)t.set(d[B].subarray(f,P),v),v+=b;else{var Z=4*(b-m)|0;for(B=n;B<L;B++){for(u=f;u<P;u++){var E=d[B][u];t[v++]=E&255;t[v++]=E>>8&255;t[v++]=E>>16&255;t[v++]=255}v+=Z}}e.putImageData(A,f,n,0,0,m,p)};this.postPaint=function(f,n,m,p){0<h.width?h.union(f,n,m,p):(h.x=f,h.y=n,h.width=m,h.height=
p)};this.commitPaint=function(){0<h.width&&(this.repaint(h.x,h.y,h.width,h.height),h.width=0)};this.startAnimation=function(){F=requestAnimationFrame(c)};this.fillRect=function(f,n,m,p,t){m=f+m;p=n+p;for(var v=n;v<p;v++)if(d[v].fill)d[v].fill(t,f,m);else{var u=d[v];for(n=f;n<m;n++)u[n]=t}}}function Da(){var b=l.indexOf("://"),a=l.substring(b+3);b=a.indexOf("/");0<b&&(a=a.substring(0,b));return location.protocol+"//"+a}function J(b){T&&Q.send(b)}function ib(b){if(!xa)return"";b=hi5.browser.httpGet(Da()+
"/CLIP?s="+xa+"&t="+Date.now(),!1);setTimeout(function(){Q.send("883")},999);return b}function ya(){return y.displayName||y.server||y.symlink||y.id||"undefined"}function Ea(b){g.setTitle&&(document.title=b)}function U(b,a,c){this.need=b;this.handler=a;this.repeat=c||1}function Ta(b){var a=0,c=0,d=new Uint8Array(b),e=this,k=new U(0,null,0);this.release=function(){e=d=k=null};this.getHandler=function(){return k};this.getData=function(){return d};this.getPosition=function(){return a};this.setPosition=
function(h){a=h};this.getEnd=function(){return c};this.set=function(h,r,q){d=h;a=r;c=q};this.handle=function(){k.handler(e,k)};this.setHandler=function(h){h&&1>h.need&&svGlobal.logger.warn("need < 1");(k=h)&&c-a>=h.need&&h.handler(e,h)};this.getByte=function(){return d[a++]};this.peekByte=function(){return d[a]};this.getBE32=function(){return d[a++]<<24|d[a++]<<16|d[a++]<<8|d[a++]};this.getBE16=function(){return d[a++]<<8|d[a++]};this.skip=function(h){a+=h};this.skipBack=function(h){a-=h};this.getBytes=
function(h,r){if(r)for(var q=0;q<h;q++)r[q]=d[a++];else return r=a,a+=h,d.subarray(r,a)};this.copyToByteArray=function(h,r,q,x){hi5.Arrays.arraycopy(d,q,h,r,x)};this.getString16LE=function(h,r){for(var q="";h<r;){var x=d[h++]|d[h++]<<8;q+=String.fromCharCode(x)}return q}}function Ua(){var b="";y&&G(y.connectif)&&y.symlink&&"sessionStorage"in window&&(b="SV_"+y.symlink,y.user&&(b+=y.user));return b}function Va(){if(!T){if(za)Q=za,ra(y.width,y.height);else{var b=g.getRuntimeURL(!0);Q=g.oncreatewebsocket?
g.oncreatewebsocket(b):new WebSocket(b,"vnc");Q.binaryType="arraybuffer"}ka.ws=Q;Q.onopen=jb;var a=new hi5.DataBuffer([],0,0);Q.onmessage=function(c){c=c.data;if("string"!=typeof c){var d=new Uint8Array(c);null!=da&&da.add(new RecordingObj(d,0,c.byteLength));switch(d[0]){case 48:O.set(d,2,d.length-2);O.handle();break;case 56:a.attach(d,2,d.length-2);Wa(a.getUnicodeString(a.getEnd()-a.getPosition(),!1));break;case 60:if(Aa||Ba)switch(a.attach(d,2,d.length-2),a.getByte()){case 32:if(N&&!N.isPaused()){c=
a.getLittleEndian16();d=a.getLittleEndian16();var e=a.getLittleEndian16();var k=a.getLittleEndian32(),h=g.sessionInfo.appInfo?g.sessionInfo.appInfo.sessions[k]:null;K&&K.moveCursor(d,e,!0,h,k,c)}}break;case 62:a.attach(d,2,d.length-2);Fa(a.getUnicodeString(a.getEnd()-a.getPosition(),!1));break;case 146:a.attach(d,2,d.length-2);switch(a.getByte()){case 0:c=new Uint8Array(2);c[0]=146;c[1]=1;J(c.buffer);break;case 1:ca&&ca.check();break;case 6:ka.remoteLockFlags=a.getLittleEndian32(),ka.checkLockFlags=
!0}break;default:svGlobal.logger.warn("invalid type:"+d[0])}}else switch(e=parseInt(c.substring(0,2),16),d=c.substring(2),e){case 0:c=g.getRuntimeURL(!1);c=c.substring(c.indexOf("?")+1);Q.send("00"+c);break;case 26:c=JSON.parse(d);if(c.name){svGlobal.logger.info("msg="+d);if(g.onerror)g.onerror(c);d=__svi18n.errorCode["S"+c.name]||"";d+=c.message||c.msg;g.showMessage(d)}else 0<svGlobal.log&&console.erro("No error code for message:"+d);break;case 27:0!=M.drawLicense&&K.drawLicense(d);break;case 56:Wa(d);
break;case 59:c=hi5.Base64.dec(d,0);Ga=c[3]<<24|c[2]<<16|c[1]<<8|c[0];Ga&64&&g.showMessage(__svi18n.info.recording);K.setFeature(Ga);break;case 61:c=JSON.parse(d);switch(c.type){case 0:ra(c.width,c.height);S=c.color/8|0;"ignoreCursor"in c&&(Ha=c.ignoreCursor);"trackCursorLocally"in c&&(Aa=c.trackCursorLocally,Xa(K));c.server&&(g.server=c.server,Ea(ya()));Ya=c.length;K&&1!=g.mode&&K.setAutoScale(!0);if(g.onopened)g.onopened(c);break;case 1:c=c.duration;if(g.onprogress)g.onprogress(c,Ya);break;case 2:2==
c.status?(Ia(),T=!0):(d=0==c.status,N.pause(d),aa=N.getContext(),c.warn&&g.showMessage(d?__svi18n.info.sessionPaused:__svi18n.info.sessionResumed))}break;case 62:Fa(d);break;default:svGlobal.logger.warn("@TODO:"+c+"\n")}};Q.onclose=sa;Q.onerror=kb}}function lb(b,a){var c=0,d=!1;this.width=b;this.interval=a;var e=0;this.start=function(){d||(d=!0,c=setInterval(function(){if(K&&T){var k=K.getThumbnail(b);k&&k.length!=e&&(J("8E7"+k),e=k.length)}},a))};this.stop=function(){clearInterval(c)}}function mb(b,
a){!Y||Y.width==b&&Y.interval==a||(Y.stop(),Y=null);Y||(Y=new lb(b,a));Y.start()}function nb(b){var a=M.page&&M.page.join||"";if(a.startsWith("http://")||a.startsWith("https://"))return a;if(a.startsWith("/"))return location.origin+a;var c=location.href,d=c.lastIndexOf("/");if(a)return c.substring(0,d+1)+a;a=Da();c.toLowerCase().startsWith(a.toLowerCase())&&(a=c.substring(0,d));return a+"/"+b}function Wa(b){var a=b.indexOf('"sessions":{,');0<a&&(a+=13,b=b.substring(0,a-1)+b.substring(a));b=JSON.parse(b);
xa=b.session;X(b.appId);b.server||(b.server=ya());if(a=hi5.$("joinSelect"))a.value=b.joinMode;if(a=hi5.$("requestControl"))a.disabled=b.hasControl;b.joined||Ba||(g.mode=0,O.setHandler(Ca),la=new Ja);a=nb("joinvnc.html")+"?id="+b.numericId;a=g.modifyURL(a);var c=b.webAddress;if(c&&0<c.length){var d=c.indexOf("://");c=c.substring(d+3);d=c.indexOf("/");0<d&&(c=c.substring(0,d));c.toLowerCase()!=location.host.toLowerCase()&&(a+="&gateway="+c)}b.joinLink=a;g.sessionInfo.appInfo=b;b.ver&&b.ver!=svGlobal.version&&
svGlobal.logger.info("Client:"+svGlobal.version+" server:"+b.ver);if(g.onsessionstart)g.onsessionstart(g.sessionInfo)}function Xa(b){Aa?Ha&&b.setCursor({system:"default",none:!1,result:"default"}):hi5.browser.isIE?b.setCursor({system:"none",none:!0,result:"none"}):b.setCursor({result:"url(data:image/x-icon;base64,AAACAAEAICACAAAAAAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAgAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAABQUFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAOAAAADgAAAA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8f////H////x////8=) 0 0, none"})}
function Za(b,a){var c=__svi18n.errorCode[b];c||(c="Error "+b,a&&(c+=", "+a));if(g.onerror)g.onerror({name:b,message:c});g.displayMsg&&g.showMessage(c);0<svGlobal.log&&console.error(c)}function jb(b){svGlobal.logger.info("opened...");T=!0;J("87"+navigator.userAgent);if(g.onopen)g.onopen()}function kb(b){svGlobal.logger.warn(b)}function sa(b){if(g&&(svGlobal.logger.warn("closed ..."),(b=Ua())&&g.sessionInfo.appInfo&&0==g.mode&&(sessionStorage[b]=g.sessionInfo.appInfo.session),O&&O.getHandler()&&O.getHandler().handler==
ta&&g.onautherror&&g.onautherror(),oa=T=!1,ca&&(ca.stop(),ca=null),!Ka)){if(g)if(g.onclose)g.onclose($a);else if(hi5.appcfg&&hi5.appcfg.returnUrl){window.location.href=hi5.appcfg.returnUrl;return}try{null!=da&&(da.exit(),da=null),K&&(K.onclipdata=null,K.close(),K=null)}catch(a){}ab=bb=y=La=cb=V=ha=l=null;Y&&(Y.stop(),Y=null);ea=za=null;hi5.browser.isChromeApp?chrome.runtime.onSuspend.remvoeListener(sa):window.removeEventListener("unload",sa,!1);Q&&(Q.onopen=null,Q.onmessage=null,Q.onclose=null,Q=
Q.onerror=null);O&&(O.release(),O=null);ba&&(ba.release(),ba=null);la&&(la.release(),la=null);K=ka=Ma=Ca=R=V=null;N&&(N.release(),N=null);aa=null;g&&(g=null);window&&window.$vnc&&(window.$vnc=null);null!=da&&(da.exit(),da=null)}}function ob(){Ka=!0;var b=document.getElementById("authDialog");if(!b)return"";hi5.browser.initDialog(b,function(a){var c=a.indexOf("=");a=a.substring(c+1);y.pwd=a;O.setHandler(Ca);Ka=!1;setTimeout(Va,300)});b.showModal()}function db(b){svGlobal.logger.info("vnc auth");var a=
new Uint8Array(17);a[0]=32;b.copyToByteArray(a,1,b.getPosition(),16);b.skip(16);b=y.pwd||"";8<b.length&&(b=b.substring(0,8));for(var c=[0,0,0,0,0,0,0,0],d=b.length,e=0;e<d;e++)c[e]=b.charCodeAt(e);b=new DesCipher(c);b.encrypt(a,1,a,1);b.encrypt(a,9,a,9);J(a.buffer);O.setHandler(new U(4,ta))}function Na(){var b=new Uint8Array(2);b[0]=147;b[1]=void 0==y.share||G(y.share)?1:0;J(b.buffer);O.setHandler(new U(24,function(a){if(g.onloggedin)g.onloggedin();J("8D");if(T){var c=g.sessionInfo;c.width=ma=a.getBE16();
c.height=na=a.getBE16();c.bpp=a.getByte();c.depth=a.getByte();c.bigEndian=0!=a.getByte();c.trueColor=0!=a.getByte();c.redMax=a.getBE16();c.greenMax=a.getBE16();c.blueMax=a.getBE16();c.redShift=a.getByte();c.greenShift=a.getByte();c.blueShift=a.getByte();a.skip(3);for(var d=a.getBE32(),e="",k=0;k<d;k++)e+=String.fromCharCode(a.getByte());c.name=e;svGlobal.logger.info("server name:"+e);y.displayName||y.server||Ea(e);ra(ma,na);a=[];if(y){c=y.encoding;8==y.color&&"Tight"==c&&(c="ZRLE");switch(c){case "Tight":a.push(7);
a.push(16);a.push(4294967036);a.push(4294967273);a.push(5);a.push(0);break;case "TightPNG":a.push(4294967036);a.push(4294967273);a.push(16);a.push(7);a.push(5);a.push(0);break;case "Raw":a.push(0);a.push(16);a.push(7);a.push(4294967036);a.push(4294967273);a.push(5);a.push(0);16==y.color&&(y.color=32);break;case "Hextile":a.push(5);a.push(16);a.push(7);a.push(4294967036);a.push(4294967273);a.push(0);16==y.color&&(y.color=32);break;default:a.push(16),a.push(7),a.push(4294967036),a.push(4294967273),
a.push(5),a.push(0),16==y.color&&(y.color=32)}a.push(1);Aa&&(a.push(4294967057),a.push(4294967064));M.vnc&&!1===M.vnc.qemuExtKey||a.push(4294967038);a.push(4294967035);"0"!=y.compression&&a.push(4294967040+parseInt(y.compression||6));"0"!=y.quality&&a.push(4294967264+parseInt(y.quality||5));a.push(4294967073);a.push(4294966988);a.push(vmware.encVMWServerCaps);c=a.length;d=new Uint8Array(5+4*c);d[0]=147;d[1]=2;d[3]=c>>8&255;d[4]=c&255;for(e=0;e<c;e++)d[5+4*e]=a[e]>>24&255,d[6+4*e]=a[e]>>16&255,d[7+
4*e]=a[e]>>8&255,d[8+4*e]=a[e]&255;J(d.buffer);a=parseInt(y.color);switch(a){case 32:Oa(32,24,!1,!0,255,255,255,0,8,16);break;case 16:Oa(16,16,!1,!0,31,63,31,11,5,0);break;case 8:Oa(8,8,!1,!0,7,7,3,0,3,6);break;default:svGlobal.logger.warn("invliad color depath:"+a)}S=a/8|0;ba&&ba.setBytesPerPixel(S);vmware.useVMWAck||Pa(0,0,ma,na,!1);O&&O.setHandler(Ma);oa=!0;void 0!=y.recording&&"on"==y.recording&&(a=y,da=new RecordingManager,da.setHeader({name:"rec",width:a.width,height:a.height,color:a.server_bpp,
namesuffix:".vncv",filetag:"VNCV",duration:0}));if(g&&(M.pingInterval&&g.startPing(M.pingInterval),g.onready))g.onready()}}}))}function ta(b){b=b.getBE32();svGlobal.logger.info("sec rst: "+b);var a={code:b,message:""};switch(b){case 0:Na();return;case 1:a.message=__svi18n.vnc.authError;g.close();ob();return;case 2:a.message="Too many failed authentication";break;default:a.message="Unknown auth error"+b}O.setHandler(null);g.onautherror&&g.onautherror(a)||(g.showMessage(a.message),g.close())}function Oa(b,
a,c,d,e,k,h,r,q,x){var D=new Uint8Array(21);D[0]=35;D[1]=0;D[5]=b;D[6]=a;D[7]=c?1:0;D[8]=d?1:0;D[9]=e>>8&255;D[10]=e&255;D[11]=k>>8&255;D[12]=k&255;D[13]=h>>8&255;D[14]=h&255;D[15]=r;D[16]=q;D[17]=x;J(D.buffer)}function Pa(b,a,c,d,e){var k=new Uint8Array(11);k[0]=147;k[1]=3;k[2]=e?1:0;k[3]=b>>8&255;k[4]=b&255;k[5]=a>>8&255;k[6]=a&255;k[7]=c>>8&255;k[8]=c&255;k[9]=d>>8&255;k[10]=d&255;J(k.buffer)}function Ja(){var b=new TINF;b.init(2==g.mode?120:0);var a=new Ta(0),c=new Uint32Array(4096),d=new Uint32Array(128);
this.release=function(){d=c=null;b.release();b=null;a.release();a=null};this.getHistory=function(){var e=[90],k=b.getHistory().length,h=k&255;e.push(k>>8&255);e.push(h);return e=e.concat(b.getHistory())};this.setHistory=function(e){b.setHistory(e)};this.decode=function(e,k,h,r,q,x){var D=e.getBE32();e=e.getBytes(D);e=b.uncompress(e,0);var z;a.set(e.dest,0,e.destIndex);var A=d,H=a.getByte,F=c;2==S&&(S=4);for(e=h;e<h+q;e+=64){var f=Math.min(h+q-e,64);for(D=k;D<k+r;D+=64){var n=Math.min(k+r-D,64);var m=
H();var p=0!=(m&128);m&=127;if(1==S)for(z=0;z<m;z++)A[z]=ea[H()];else for(z=0;z<m;z++)A[z]=H()|H()<<8|H()<<16|4278190080;if(1!=m||x){if(p)if(0==m)for(p=0,z=p+n*f;p<z;){var t=1==S?ea[H()]:H()|H()<<8|H()<<16|4278190080;var v=1;do m=H(),v+=m;while(255==m);if(F.fill)F.fill(t,p,p+v),p+=v;else for(;0<v--;)F[p++]=t}else for(p=0,z=p+n*f;p<z;){t=H();v=1;if(0!=(t&128)){do m=H(),v+=m;while(255==m)}t&=127;t=A[t];if(F.fill)F.fill(t,p,p+v),p+=v;else for(;0<v--;)F[p++]=t}else if(p=n*f,0==m)if(1==S)for(z=0;z<p;z++)F[z]=
ea[H()];else for(z=0;z<p;z++)F[z]=H()|H()<<8|H()<<16|4278190080;else for(v=16<m?8:4<m?4:2<m?2:1,z=p=0;z<f;z++){t=p+n;for(var u=m=0;p<t;)0==u&&(m=H(),u=8),u-=v,F[p++]=A[m>>u&(1<<v)-1&127]}x||N.setRGBs(D,e,n,f,F,0,n)}else N.fillRect(D,e,n,f,A[0])}}x||N.postPaint(k,h,r,q)}}function eb(){function b(f,n,m,p,t){this.draw=function(){aa.fillStyle=t;aa.fillRect(f,n,m,p)};this.type=0;this.ready=function(){return!0}}function a(f,n,m){this.draw=function(){aa.putImageData(m,f,n)};this.type=1;this.ready=function(){return!0}}
function c(f,n,m){this.draw=function(){aa.drawImage(m,f,n);URL.revokeObjectURL(m.src)};this.type=2;this.ready=function(){return!!m.src&&m.complete};this.image=m}function d(f,n,m,p,t){var v=null;m=new Blob([m],{type:t||"image/jpeg"});var u=!1;this.draw=function(){v&&(aa.drawImage(v,f,n),v.close())};this.type=3;this.ready=function(){return u};createImageBitmap(m).then(function(B){v=B;u=!0;p()}).catch(function(B){u=!0;svGlobal.logger.warn("Failed to load JPEG:"+B)})}function e(){var f=x[r];f||(f=new TINF,
f.init(2==g.mode?120:0),x[r]=f);return f}function k(f){var n=f.getByte(),m=n&127;n&128&&(n=f.getByte(),m|=(n&127)<<7,n&128&&(m|=f.getByte()<<14));return m}function h(f){var n=f>>8&248,m=f>>3&252;f=f<<3&255;return n|n>>5|(m|m>>6)<<8|(f|f>>5)<<16|4278190080}var r=0,q=3,x={},D={data:[0],length:0},z=Array(256);z[0]=0;this.inUse=!1;var A=this,H=!!window.createImageBitmap;this.setBytesPerPixel=function(f){q=3<f?3:f};var F=new function(){function f(){for(;0<n.length;){var m=n[0];if(!m.ready())break;m.draw();
n.shift()}}var n=[];this.check=f;this.push=function(m){n.push(m);2==m.type?m.image.onload=f:f()};this.release=function(){n=[]}};this.release=function(){F.release();x=D=z=A=F=null};this.getHistory=function(){var f=[84],n=Object.keys(x).length;f.push(n);for(var m in x)if(x.hasOwnProperty(m)){f.push(parseInt(m));n=x[m].getHistory();var p=n.length,t=p&255;f.push(p>>8&255);f.push(t);f=f.concat(n)}return f};this.setHistory=function(f){for(var n=0,m=f[n++],p=0;p<m;p++){var t=f[n++],v=f[n++],u=f[n++];u=(v&
255)<<8|u&255;v=f.slice(n,n+u);n+=u;u=x[t];u||(u=new TINF,u.init(2==g.mode?120:0),x[t]=u);u.setHistory(v)}};this.drawImageData=function(f,n,m){F.push(new a(n,m,f))};this.decode=function(f,n,m,p,t,v){A.inUse||(A.inUse=!0);var u=f.getByte();switch(u>>4){case 8:if(v)f.skip(q);else{v=F;u=v.push;if(3==q)f="rgb("+f.getByte()+","+f.getByte()+","+f.getByte()+")";else{var B=f.getByte()|f.getByte()<<8;f=B>>8&248;var P=B>>3&252;B=B<<3&255;f="rgb("+(f|f>>5)+","+(P|P>>6)+","+(B|B>>5)+")"}u.call(v,new b(n,m,p,
t,f))}break;case 9:u=k(f);v?f.skip(u):H?F.push(new d(n,m,f.getBytes(u),F.check)):(p=f.getBytes(u),p=new Blob([p],{type:"image/jpeg"}),t=URL.createObjectURL(p),p=new Image,F.push(new c(n,m,p)),p.src=t);break;case 10:u=k(f);v?f.skip(u):H?F.push(new d(n,m,f.getBytes(u),F.check,"image/png")):(p=f.getBytes(u),p=new Blob([p],{type:"image/png"}),t=URL.createObjectURL(p),p=new Image,F.push(new c(n,m,p)),p.src=t);break;default:if(r=(u&48)>>4,u=u&64?f.getByte():0,1==u){u=f.getByte;var L=u()+1,Z=2!=L?p*t:t*
((p+7)/8|0),E=0;if(3==q)for(;E<L;E++)z[E]=u()|u()<<8|u()<<16|4278190080;else for(;E<L;E++)z[E]=h(u()|u()<<8);12>Z?(D.data=f.getBytes(Z),D.length=Z):(u=k(f),f=e().uncompress(f.getBytes(u),0),D.data=f.dest,D.length=f.destIndex);u=D.data;P=aa.createImageData(p,t);if("Uint8ClampedArray"in window)if(B=new Uint32Array(P.data.buffer),2!=L)for(E=0;E<Z;E++)B[E]=z[u[E]];else{f=0;Z=(p+7)/8|0;for(var ua,pa=0;pa<t;pa++){ua=pa*Z;for(var ia=0;ia<(p/8|0);ia++)for(L=u[ua+ia],E=7;0<=E;E--)B[f++]=z[L>>E&1];L=8-p%8;
for(E=7;E>=L;E--)B[f++]=z[u[ua+ia]>>E&1]}}else if(B=P.data,f=0,2!=L)for(E=0;E<Z;E++)L=z[u[E]],B[f++]=L&255,B[f++]=L>>8&255,B[f++]=L>>16&255,B[f++]=255;else for(f=0,Z=(p+7)/8|0,pa=0;pa<t;pa++){ua=pa*Z;for(ia=0;ia<(p/8|0);ia++)for(L=u[ua+ia],E=7;0<=E;E--){var qa=z[L>>E&1];B[f++]=qa&255;B[f++]=qa>>8&255;B[f++]=qa>>16&255;B[f++]=255}L=8-p%8;for(E=7;E>=L;E--)qa=z[u[ua+ia]>>E&1],B[f++]=qa&255,B[f++]=qa>>8&255,B[f++]=qa>>16&255,B[f++]=255}v||F.push(new a(n,m,P))}else if(0==u){u=p*t*q;11<u&&(u=k(f));L=p*
t;P=L*q;u=11<P?e().uncompress(f.getBytes(u),0).dest:f.getBytes(P);P=aa.createImageData(p,t);B=P.data;p=f=0;if(3==q)for(E=0;E<L;E++)B[f++]=u[p++],B[f++]=u[p++],B[f++]=u[p++],B[f++]=255;else for(E=0;E<L;E++)t=h(u[p++]|u[p++]<<8),B[f++]=t&255,B[f++]=t>>8&255,B[f++]=t>>16&255,B[f++]=255;v||F.push(new a(n,m,P))}else svGlobal.logger.info("xx filter:"+u)}}}function Fa(b){var a=parseInt(b.substring(0,1),16),c=b.substring(1),d=!1;var e=g.sessionInfo.appInfo;switch(a){case 0:var k=JSON.parse(c);Ia();T=!0;d=
k.width;e=k.height;if(d==ma&&e==na)break;ra(d,e);break;case 1:g.reconnectOnResize=!1;k=JSON.parse(c);e.sessions[k.numericId]=k.name||k.__ip;g.onsessionjoin&&(d=g.onsessionjoin(k));if(d)break;g.showMessage(__svi18n.info.joinsession.applyArgs([k.numericId,k.__ip,k.name]));break;case 2:k=JSON.parse(c);delete e.sessions[k.numericId];g.onsessionexit&&(d=g.onsessionexit(k));if(d)break;g.showMessage(__svi18n.info.exitsession.applyArgs([k.numericId,k.__ip,k.name]));break;case 3:k=JSON.parse(c);e.joinMode!=
k.mode&&(e.joinMode=k.mode,b=hi5.$("joinSelect"))&&(b.value=k.mode);if(e.hasControl)break;K.setReadOnly(!1,2==k.mode);if(e=hi5.$("requestControl"))e.disabled=!0;g.ongivecontrol&&(d=g.ongivecontrol());if(d)break;g.showMessage(__svi18n.info.givecontrol);break;case 4:k=JSON.parse(c);K.setReadOnly(!0,2==k.mode);e.hasControl=!1;if(e=hi5.$("requestControl"))e.disabled=!1;g.ontakebackcontrol&&(d=g.ontakebackcontrol());if(d)break;g.showMessage(__svi18n.info.nocontrol);break;case 5:k=JSON.parse(c);g.onrequirecontrol&&
(d=g.onrequirecontrol(k));if(d)break;d=__svi18n.info.title.applyArgs([k.name,k.numericId,k.__ip]);g.showMessage({title:d,msg:__svi18n.info.recontrol,cbYes:function(){g.giveControl(k.numericId);this.destroy()},cbNo:function(){g.refuseControl(k.numericId);this.destroy()}});break;case 9:k=JSON.parse(c);0<k.interval&&0<k.width?mb(k.width,k.interval):Y&&(Y.stop(),Y=null);break;case 10:if(1==b.length)J("8E8"+hi5.Base64.enc(pb()));else if(qb(hi5.Base64.dec(b.substring(1),0)),g.refreshOutput(),oa=!0,g.onloggedin)g.onloggedin();
ca&&ca.check(15555);break;case 11:k=JSON.parse(c),g.onrequirejoin&&(d=g.onrequirejoin(k)),d||(d=__svi18n.info.title.applyArgs([k.name,k.numericId,k.__ip]),g.showMessage({title:d,msg:__svi18n.info.reqjoin,cbYes:function(){g.allowJoin(k.numericId,!0);this.destroy()},cbNo:function(){g.allowJoin(k.numericId,!1);this.destroy()}}))}}function pb(){var b=la.getHistory(),a=ba.getHistory();return b.concat(a)}function qb(b){var a=0,c=b[a++];if(90==c){c=b[a++];var d=b[a++];if(c=(c&255)<<8|d&255)la.setHistory(b.slice(a,
a+c)),a+=c}c=b[a++];84==c&&ba.setHistory(b.slice(a))}function rb(b){if(!g.openLink)return!1;var a=b;b=b.toLowerCase();var c=0==b.indexOf("http://")||0==b.indexOf("https://")||0==b.indexOf("ftp://")||0==b.indexOf("mailto:")||0==b.indexOf("tel:")||0==b.indexOf("callto:");c||(0==b.indexOf("www.")?(c=!0,b="http://"+b):0==b.indexOf("ftp.")&&(c=!0,b="ftp://"+b));if(c){if(0<b.indexOf("\r")||0<b.indexOf("\n"))return!1;if(g.onurlredirection&&g.onurlredirection(c))return!0;K.processLink(a);return!0}return!1}
function sb(b,a,c,d,e,k,h,r,q){this.cache_idx=b;this.rawData=a;this.none=!a;this.hotX=c;this.hotY=d;this.width=e;this.height=k;this.xorSize=r;this.andSize=q;this.result="";this.distance=0;this.bpp=h;this.system="";this.init=function(){if(this.distance){var z=0;if(a)for(var A=0,H=a.length;A<H;A++)0!=a[A]&&(z+=A%e+(A/e|0));this.distance=z}this.system||(z=507==this.distance?"text":"",this.system=z)};b="";if(!this.system&&a){var x=e*k*4;h=62+x+r+q;var D=new Uint8Array(h);h=new hi5.DataBuffer(D,0,h);h.setLittleEndian16(0);
h.setLittleEndian16(2);h.setLittleEndian16(1);h.setByte(e);h.setByte(k);h.setByte(0);h.setByte(0);h.setLittleEndian16(c);h.setLittleEndian16(d);h.setLittleEndian32(40+x+r+q);h.setLittleEndian32(22);h.setLittleEndian32(40);h.setLittleEndian32(e);h.setLittleEndian32(2*k);h.setLittleEndian16(1);h.setLittleEndian16(32);h.setLittleEndian32(0);h.setLittleEndian32(r+q);h.setLittleEndian32(0);h.setLittleEndian32(0);h.setLittleEndian32(0);h.setLittleEndian32(0);for(c=k-1;0<=c;c--)for(d=0;d<e;d++)k=a[e*c+d],
h.setByte(k&255),h.setByte(k>>8&255),h.setByte(k>>16&255),h.setByte(k>>24&255);hi5.browser.isIE||(b="data:image/x-icon;base64,"+hi5.Base64.enc(h.getData()))}this.url=b}function fb(b,a,c,d,e){var k=null,h=d*e,r=0,q=b.getPosition(),x=b.getData();if(ba.inUse){e=aa.createImageData(d,e);if(4==S){if("Uint8ClampedArray"in window)for(d=new Uint32Array(e.data.buffer),r=0;r<h;r++)d[r]=x[q++]<<16|x[q++]<<8|x[q++]|4278190080,q++;else for(d=e.data,k=4*h;r<k;)d[r++]=x[q+2],d[r++]=x[q+1],d[r++]=x[q],d[r++]=255,
q+=4;b.skip(4*h)}else if(1==S){if("Uint8ClampedArray"in window)for(d=new Uint32Array(e.data.buffer),r=0;r<h;r++)d[r]=ea[x[q++]];else{d=e.data;k=4*h;for(var D;r<k;)D=ea[x[q++]],d[r++]=D&255,d[r++]=D>>8&255,d[r++]=D>>16&255,d[r++]=255}b.skip(h)}ba.drawImageData(e,a,c)}else{switch(S){case 4:if(0==q%4){q+=3;for(r=0;r<h;r++)x[q]=255,q+=4;k=new Uint32Array(b.getData().buffer,b.getPosition(),h)}else for(k=new Uint32Array(h),r=0;r<h;r++)k[r]=x[q++]|x[q++]<<8|x[q++]<<16|4278190080,q++;b.skip(4*h);break;case 1:k=
new Uint32Array(h);for(r=0;r<h;r++)k[r]=ea[x[q++]];b.skip(h)}N.setRGBs(a,c,d,e,k,0,d);N.postPaint(a,c,d,e)}}function ra(b,a){if(b&&a){if(ma=b,na=a,y.width=b,y.height=a,N.resize(b,a),K&&K.setSize(b,a),g.onresolutionchange)g.onresolutionchange(b,a)}else Za("C_1","Invalid monitor size, width:"+b+" h:"+a)}function tb(b){if(oa&&b&&(b=b.getData("text/plain"))){var a=b.length,c=new Int8Array(9+a);c[0]=147;c[1]=6;c[5]=a>>24&255;c[6]=a>>16&255;c[7]=a>>8&255;c[8]=a&255;for(var d=0;d<a;d++)c[9+d]=b.charCodeAt(d);
J(c.buffer)}}function Ia(){T=!1;ba=new eb;la=new Ja}function Qa(b,a,c,d){oa&&(gb=b,(b?1<<a:0)!=V[1]||c!=(V[2]<<8|V[3])||d!=(V[4]<<8|V[5]))&&(V[2]=b?1<<a:0,V[3]=c>>8&255,V[4]=c&255,V[5]=d>>8&255,V[6]=d&255,J(V.buffer))}function fa(b,a,c){if(Ra&&0<c){var d=c;170!=d&&(183==d?d=84:197==d&&(d=198),W[4]=b?1:0,W[5]=a>>24,W[6]=a>>16,W[7]=a>>8,W[8]=a,W[9]=d>>24,W[10]=d>>16,W[11]=d>>8,W[12]=d,J(W.buffer))}else if(vmware.useVMWKeyEvent&&0<c)J(vmware.encScancode(b,c));else{if(1>a)return;ha[2]=b?1:0;ha[5]=a>>
24;ha[6]=a>>16;ha[7]=a>>8;ha[8]=a;J(ha.buffer)}if(g.onkey)g.onkey(b,a,c)}function hb(b,a){var c=cb[a.toLowerCase()];c?g.writeScancode(b,c):(c=a.length,0!=c&&(1==c?g.writeKeyCode(b,a.toUpperCase().charCodeAt(0)):b&&g.writeText(a)))}this.displayMsg=!0;this.reconnectTimes=0;this.setTitle=this.openLink=!0;this.mode=0;this.CAP_QEMU_KEY=1;var Ka=!1,za="object"==typeof l?l:null,Ba="object"==typeof l||0<l.indexOf("/PLAY?");Ba?(this.mode=1,za&&(l=""),l+="&touchpad=on"):0<l.indexOf("/JOIN?")&&(this.mode=2,
this.reconnectOnResize=!1);hi5.appcfg||(hi5.appcfg={img:{},toolbar:{fadable:!0},displayMsg:!0});var M=hi5.appcfg,y=hi5.tool.queryToObj(l.substring(l.indexOf("?")+1)),ca=null,$a=!1,xa="",Ra=!1;!y.width&&w&&(y.width=w,l+="&width="+w);!y.wHeight&&C&&(y.height=C,l+="&height="+C);!y.color&&I&&(y.color=I,l+="&color="+I);y.color||(y.color=32);vmware.useVMWKeyEvent=y.useVMWKeyEvent||M.useVMWKeyEvent||!1;var Ha=void 0==y.ignoreCursor||G(y.ignoreCursor),Aa=void 0==y.trackCursorLocally||G(y.trackCursorLocally),
g=this;this.server=y.server;this.port=parseInt(y.port,10);this.loadbalanceToken="";M.loadbalanceTokenName&&y[M.loadbalanceTokenName]&&X(y[M.loadbalanceTokenName]);this.sessionInfo={major:0,minor:0,width:0,height:0,bpp:0,bigEndian:!0,trueColor:!0};this.modifyURL=function(b){g.loadbalanceToken&&(b+="&"+g.loadbalanceToken);return b};var K=null,T=!1,oa=!1,Ga=0,Sa=!1,va=0,wa=0,da=null;window.$vnc=this;var O=new Ta(4194304);this.setLinks=function(b){};this.running=function(){return T};var Q=null,S=4,ma=
1024,na=768,ea=[-16777216,-16777180,-16777143,-16777107,-16777070,-16777034,-16776997,-16776961,-16768E3,-16767964,-16767927,-16767891,-16767854,-16767818,-16767781,-16767745,-16758528,-16758492,-16758455,-16758419,-16758382,-16758346,-16758309,-16758273,-16749312,-16749276,-16749239,-16749203,-16749166,-16749130,-16749093,-16749057,-16739840,-16739804,-16739767,-16739731,-16739694,-16739658,-16739621,-16739585,-16730624,-16730588,-16730551,-16730515,-16730478,-16730442,-16730405,-16730369,-16721152,
-16721116,-16721079,-16721043,-16721006,-16720970,-16720933,-16720897,-16711936,-16711900,-16711863,-16711827,-16711790,-16711754,-16711717,-16711681,-11206656,-11206620,-11206583,-11206547,-11206510,-11206474,-11206437,-11206401,-11197440,-11197404,-11197367,-11197331,-11197294,-11197258,-11197221,-11197185,-11187968,-11187932,-11187895,-11187859,-11187822,-11187786,-11187749,-11187713,-11178752,-11178716,-11178679,-11178643,-11178606,-11178570,-11178533,-11178497,-11169280,-11169244,-11169207,-11169171,
-11169134,-11169098,-11169061,-11169025,-11160064,-11160028,-11159991,-11159955,-11159918,-11159882,-11159845,-11159809,-11150592,-11150556,-11150519,-11150483,-11150446,-11150410,-11150373,-11150337,-11141376,-11141340,-11141303,-11141267,-11141230,-11141194,-11141157,-11141121,-5636096,-5636060,-5636023,-5635987,-5635950,-5635914,-5635877,-5635841,-5626880,-5626844,-5626807,-5626771,-5626734,-5626698,-5626661,-5626625,-5617408,-5617372,-5617335,-5617299,-5617262,-5617226,-5617189,-5617153,-5608192,
-5608156,-5608119,-5608083,-5608046,-5608010,-5607973,-5607937,-5598720,-5598684,-5598647,-5598611,-5598574,-5598538,-5598501,-5598465,-5589504,-5589468,-5589431,-5589395,-5589358,-5589322,-5589285,-5589249,-5580032,-5579996,-5579959,-5579923,-5579886,-5579850,-5579813,-5579777,-5570816,-5570780,-5570743,-5570707,-5570670,-5570634,-5570597,-5570561,-65536,-65500,-65463,-65427,-65390,-65354,-65317,-65281,-56320,-56284,-56247,-56211,-56174,-56138,-56101,-56065,-46848,-46812,-46775,-46739,-46702,-46666,
-46629,-46593,-37632,-37596,-37559,-37523,-37486,-37450,-37413,-37377,-28160,-28124,-28087,-28051,-28014,-27978,-27941,-27905,-18944,-18908,-18871,-18835,-18798,-18762,-18725,-18689,-9472,-9436,-9399,-9363,-9326,-9290,-9253,-9217,-256,-220,-183,-147,-110,-74,-37,-1],N;N?N.resize(1024,768):N=new ja(1024,768);var aa=N.getContext();this.getDesktop=function(){return N};this.writeKeyComb=function(b){b=b.split("+");var a=b.length;if(0!=a){for(var c=null,d=0;d<a;d++){var e=b[d];""==e&&""==c&&(e="Add");""!=
e&&hb(!0,e);c=e}for(d=a-1;0<=d;d--)e=b[d],""==e&&""==c&&(e="Add"),""!=e&&hb(!1,e),c=e}};var ka=new function(){this.ws=null;this.capsLock=this.numLock=!1;this.setJoinMode=g.setJoinMode;this.requestControl=g.requestControl;this.writeKeyComb=g.writeKeyComb;this.remoteLockFlags=this.localLockFlags=0;this.checkLockFlags=!0;var b=0;this.getAppMode=function(){return g.mode};this.send=function(a){T&&this.ws.send(a)};this.sendInput=function(a){g.writeRawInput(a);if(g.onactivity)g.onactivity(a)};this.getAppInfo=
function(){return g.sessionInfo.appInfo};this.onresize=function(a){if(a=a.target.svSurface){var c=a.getFreeSpace();a=c.width;c=c.height;b&&(clearTimeout(b),b=0);var d=setTimeout;if(Sa){var e=new Int8Array(25);e[0]=147;e[1]=251;e[2]=0;e[3]=a>>8;e[4]=a;e[5]=c>>8;e[6]=c;e[7]=1;e[8]=0;e[9]=va>>24;e[10]=va>>16;e[11]=va>>8;e[12]=va;e[13]=0;e[14]=0;e[15]=0;e[16]=0;e[17]=a>>8;e[18]=a;e[19]=c>>8;e[20]=c;e[21]=wa>>24;e[22]=wa>>16;e[23]=wa>>8;e[24]=wa;J(e.buffer)}b=d(void 0,555)}else console.warn("==== no surface for browser resizing")};
this.onorientationchange=function(a){};this.getClipData=ib;this.onfocus=function(a){};this.fileCallback=[];this.getShareFiles=function(a,c){this.ws.send("3A5"+a);this.fileCallback.push(c)};this.notifyFiles=function(a){for(var c=this.fileCallback,d=0,e=c.length;d<e;d++)c[d](a)};this.getFile=function(a){window.open(g.getFileUrl(a))};this.removeFile=function(a){uploadMgr&&uploadMgr.fileService.remove(a)};this.getFileLink=function(a){return Da()+"/DOWNLOAD?s="+xa+"&f="+a};this.getGateway=function(){return l};
this.reconnect=function(a,c,d){};this.sendKeyboardSyncFlags=function(a){if(T){var c=this.remoteLockFlags;(c&7)!=a&&((c&4)!=(a&4)&&(fa(!0,65549,58),fa(!1,65549,58)),(c&2)!=(a&2)&&(fa(!0,65407,69),fa(!1,65407,69)),(c&1)!=(a&1)&&(fa(!0,65300,70),fa(!1,65300,70)));this.remoteLockFlags=this.localLockFlags=a;return!0}return!1}};void 0!=M.displayMsg?this.displayMsg=M.displayMsg:M.displayMsg=this.displayMsg;void 0!=M.reconnectTimes&&(this.reconnectTimes=M.reconnectTimes);void 0!=M.openLink&&(this.openLink=
M.openLink);void 0!=M.setTitle&&(this.setTitle=M.setTitle);"boolean"==typeof M.useWSS&&(l=(M.useWSS?"wss":"ws")+l.substring(l.indexOf("://")));this.getURL=function(){return l};this.getRuntimeURL=function(b){var a=hi5.tool.replaceQuery(l,"pwd","x"),c=Ua(),d="";c&&(d=sessionStorage[c]||"")&&(d="&preSymJoin="+d);a=a+d+"&binary=on";if(d=window.opener){c=null;try{c=d.__sparkUser}catch(e){}c&&(d=c.account,c=c.session,d&&(a+="&account="+d),c&&(a+="&session="+c))}a+="&pasteCap="+(hi5.browser.isChrome&&hi5.browser.isDesktop?
3:0);b&&0==g.mode&&M.wsPost&&(a=l.substring(0,l.indexOf("?"))+"?_METHOD=post");a=g.modifyURL(a);(b=hi5.browser.cookie.get("__SV_TOKEN_A"))&&(a+="&__SV_TOKEN_A="+encodeURIComponent(b));return a};var ub=parseInt(y.server_bpp||y.color||24);this.getColor=function(){return ub};this.getDisplayName=ya;Ea(ya());this.sendPing=function(b){var a=new Uint8Array(b?2+b.length:2);a[0]=146;a[1]=0;b&&a.set(b,2);J(a.buffer)};this.startPing=function(b,a){a=a||0;ca||(ca=new hi5.tool.ResponseMonitor(function(){g.sendPing()},
function(){if(T&&g.onnoresponse)return g.onnoresponse()}));ca.setInterval(b,a);var c=new Uint8Array(4);c[0]=146;c[1]=2;c[2]=b;c[3]=a;J(c.buffer);g.sendPing()};this.stopPing=function(){ca&&ca.stop()};var Y=null;this.setJoinMode=function(b){J("8E1"+b)};this.refuseControl=function(b){J("8E3"+b)};this.giveControl=function(b){J("8E4"+b)};this.requestControl=function(){J("8E2")};this.allowJoin=function(b,a){J("8EA"+b+"\t"+(a?1:0))};this.play=function(){J("F3")};this.pause=function(){J("F2")};this.scan=
function(b){J("F4"+(b?"1":"0"))};this.seek=function(b){K&&T&&(J("F4"+(b?"1":"0")+"\t"+(b/K.getScale().x|0)),N.pause(!0))};var Ya=0;this.run=function(){Va();N.startAnimation()};this.hide=function(){K&&K.hide()};this.showMessage=function(b,a){g.displayMsg&&b&&(K?K.showMessage(b,a):("string"==typeof b&&(b={msg:b,timeout:a||0}),hi5.notifications.notify(b)))};this.close=function(){$a=!0;if(Q&&T)for(;Q&&Q.readyState!=WebSocket.CLOSING&&Q.readyState!=WebSocket.CLOSED;)J("85"),Q.close();else sa()};hi5.browser.isChromeApp?
chrome.runtime.onSuspend.addListener(sa):window.addEventListener("unload",sa,!1);var Ca=new U(12,function(b){if(82!=b.getByte()||70!=b.getByte()||66!=b.getByte())g.showMessage(__svi18n.vnc.notvnc),g.close();else if(b.skip(1),g.sessionInfo.major=100*(b.getByte()-48)+10*(b.getByte()-48)+(b.getByte()-48),b.skip(1),g.sessionInfo.minor=100*(b.getByte()-48)+10*(b.getByte()-48)+(b.getByte()-48),svGlobal.logger.info("RFB major: "+g.sessionInfo.major+" minor: "+g.sessionInfo.minor),b.skip(1),37<=10*g.sessionInfo.major+
g.sessionInfo.minor){b="\u0093RFB 003.008\n";for(var a=new Uint8Array(13),c=0;13>c;c++)a[c]=b.charCodeAt(c);J(a.buffer);O.setHandler(new U(1,function(d){switch(d.getByte()){case 1:8>g.sessionInfo.minor?Na():O.setHandler(new U(4,ta));break;case 2:O.setHandler(new U(16,db));break;case 113:O.setHandler(new U(24,function(q){svGlobal.logger.info("NTLM auth");var x=new Uint8Array(345);x[0]=33;q.copyToByteArray(x,1,q.getPosition(),24);q.skip(24);q=y.user;var D=25,z=q.length;if(q)for(c=0;c<z;c++){var A=q.charCodeAt(c);
x[D++]=A&255;x[D++]=A>>8&255}if(178<z)g.showMessage("User name is too long: > 178"),g.close();else{D=281;if(q=y.pwd){z=q.length;if(32<z){g.showMessage("Password is too long: > 32");g.close();return}for(c=0;c<z;c++)A=q.charCodeAt(c),x[D++]=A&255,x[D++]=A>>8&255}Q.send(x.buffer);O.setHandler(new U(4,ta))}}));break;case 19:break;case 30:svGlobal.logger.info("Apple auth");d=new Uint8Array(321);d[0]=34;var e=y.user,k=0,h=1,r=e.length;if(e){if(178<r){g.showMessage("User name is too long: > 178");g.close();
break}for(c=0;c<r;c++)k=e.charCodeAt(c),d[h++]=k&255,d[h++]=k>>8&255}h=257;if(e=y.pwd){r=e.length;if(32<r){g.showMessage("Password is too long: > 32");g.close();break}for(c=0;c<r;c++)k=e.charCodeAt(c),d[h++]=k&255,d[h++]=k>>8&255}Q.send(d.buffer);O.setHandler(new U(4,ta));break;default:g.showMessage(__svi18n.vnc.securityError),g.close()}}))}else{b="\u0093RFB 003.003\n";a=new Uint8Array(13);for(c=0;13>c;c++)a[c]=b.charCodeAt(c);J(a.buffer);O.setHandler(new U(4,function(d){d=d.getBE32();var e=0,k=0;
svGlobal.logger.info("sec type:"+d);switch(d){case 1:Na();break;case 2:O.setHandler(new U(12,db));break;case -6:O.setHandler(new U(24,function(h){svGlobal.logger.info("NTLM auth");var r=new Uint8Array(345);r[0]=33;h.copyToByteArray(r,1,h.getPosition(),24);h.skip(24);h=y.user;var q=25;if(h)for(e=0,k=h.length;e<k;e++){var x=h.charCodeAt(e);r[q++]=x&255;r[q++]=x>>8&255}q=281;if(h=y.pwd)for(e=0,k=h.length;e<k;e++)x=h.charCodeAt(e),r[q++]=x&255,r[q++]=x>>8&255;J(r.buffer);O.setHandler(new U(4,ta))}));
break;default:g.showMessage(__svi18n.vnc.securityError),g.close()}}))}});O.setHandler(Ca);this.refreshOutput=function(b,a,c,d){vmware.useVMWAck?J(vmware.encAck(Date.now())):(b=b||0,a=a||0,Pa(b,a,c?c-b+1:ma,d?d-a+1:na,!1))};var Ma=new U(1,function(b){var a=b.getByte();switch(a){case 0:vmware.updateReqId=b.getByte();a=vmware.useVMWAck?Date.now():0;for(var c=b.getBE16(),d=0;d<c;d++){var e=b.getBE16();var k=b.getBE16();var h=b.getBE16();var r=b.getBE16();var q=b.getBE32()>>>0;switch(q){case 4294967073:ra(h,
r);break;case 4294966988:q=b;var x=q.getByte();q.skip(3);for(var D=0;D<x;D++)0==D?(va=q.getBE32(),q.skip(8),wa=q.getBE32()):q.skip(16);if(1==e&&0!=k){switch(k){case 1:q="Resize is administratively prohibited";break;case 2:q="Out of resources";break;case 3:q="Invalid screen layout";break;default:q="Unknown reason"}Za("C_2","Resize request has been rejected by the server:"+q);Sa=!1}else ra(h,r),Sa=!0;break;case 240:case 4294967056:0!=h*r&&b.skip(((h+7)/8|0)*r*2+6);break;case 4294967057:if(0!=h*r)if(Ha)b.skip(h*
r*S+((h+7)/8|0)*r);else{var z;var A=b;q=e;e=(h+7)/8|0;var H=e*r;x=h*r;D=new Uint32Array(x);var F=A.getBytes(x*S),f=A.getBytes(H),n=0,m=0;for(H=0;H<r;H++){for(z=0;z<h/8;z++){var p=f[H*e+z];for(A=7;0<=A;A--)0!=(p>>A&1)?1!=S&&(n=4278190080|(F[4*m+2]&255)<<16|(F[4*m+1]&255)<<8|F[4*m]&255):n=0,D[m++]=n}for(A=7;A>=8-h%8;A--)n=0!=(f[H*e+z]>>A&1)?1==S?0:4278190080|(F[4*m+2]&255)<<16|(F[4*m+1]&255)<<8|F[4*m]&255:0,D[m++]=n}q=new sb(0,D,q,k,h,r,4,4*x,x/8|0);K.setCursor(q)}break;case 4294967064:break;case 0:0<
h*r&&fb(b,e,k,h,r);break;case 1:q=b.getBE16();x=b.getBE16();ba.inUse?aa.putImageData(aa.getImageData(q,x,h,r),e,k):(N.moveArea(q,x,h,r,e-q,k-x),N.postPaint(e,k,h,r));break;case 5:ab.decode(b,e,k,h,r);break;case 7:ba.decode(b,e,k,h,r,!1);break;case 16:la.decode(b,e,k,h,r,!1);break;case 4294967035:q=b.getByte();k=0!=(q&4);h=0!=(q&2);r=0!=(q&1);ka.remoteLockFlags=q;ka.checkLockFlags=!0;if(g.onLockKeyState)g.onLockKeyState({capsLock:k,numLock:h,scrollLock:r});svGlobal.logger.info("LED state, capsLock:"+
k+" numLock:"+h+" scrollLock:"+r);break;case 4294967036:ba.decode(b,e,k,h,r,!1);break;case 4294967038:W=new Uint8Array(13);W[0]=147;W[1]=255;W[2]=0;W[3]=0;Ra=!0;K.setUnicode(!1);if(g.oncapability)g.oncapability(g.CAP_QEMU_KEY);svGlobal.logger.warn("QEMU Ext Key enabled");break;default:svGlobal.logger.warn("Encoding "+q+" is not supported")}}vmware.useVMWAck?J(vmware.encAck(Date.now()-a)):Pa(0,0,ma,na,!0);break;case 1:svGlobal.logger.warn("xxx color map");break;case 2:break;case 3:b.skip(3);a=b.getBE32();
0<a&&(b=b.getBytes(a),a=String.fromCharCode.apply(null,b),g.onservercopy&&g.onservercopy(a)||rb(a)||K.copyToClip("text/plain;"+a));break;case 48:a=b.getString16LE(0,b.getEnd());Fa(a);b.skip(b.getEnd()-b.getPosition());break;case 127:(b=vmware.process(b))&&J(b.buffer);break;default:svGlobal.logger.warn("XX PDU:"+a)}});2!=g.mode&&1!=g.mode||O.setHandler(Ma);var ba=new eb,la=new Ja,ab=new function(){var b=0,a=0;this.decode=function(c,d,e,k,h){var r=d+k,q=e+h;a=b=0;for(var x=e;x<q;x+=16)for(var D=Math.min(16,
q-x),z=d;z<r;z+=16){var A=c,H=z,F=x,f=Math.min(16,r-z),n=D,m=A.getByte();if(0!=(m&1))fb(A,H,F,f,n,!1);else if(0!=(m&2)&&(1==S?b=ea[A.getByte()]:(b=A.getByte()|A.getByte()<<8|A.getByte()<<16|4278190080,A.skip(1))),N.fillRect(H,F,f,n,b),0!=(m&4)&&(1==S?a=ea[A.getByte()]:(a=A.getByte()|A.getByte()<<8|A.getByte()<<16|4278190080,A.skip(1))),0!=(m&8)){f=A.getByte();var p;if(0!=(m&16))if(1==S)for(p=0;p<f;p++){a=ea[A.getByte()];var t=A.getByte();m=t>>4;n=t&15;t=A.getByte();var v=1+(t>>4);t=1+(t&15);N.fillRect(H+
m,F+n,v,t,a)}else for(p=0;p<f;p++)a=A.getByte()|A.getByte()<<8|A.getByte()<<16|4278190080,A.skip(1),t=A.getByte(),m=t>>4,n=t&15,t=A.getByte(),v=1+(t>>4),t=1+(t&15),N.fillRect(H+m,F+n,v,t,a);else for(p=0;p<f;p++)t=A.getByte(),m=t>>4,n=t&15,t=A.getByte(),v=1+(t>>4),t=1+(t&15),N.fillRect(H+m,F+n,v,t,a)}}N.postPaint(d,e,k,h)}};this.resetStatus=Ia;this.addSurface=function(b){K=b;Ba&&b.setPlayerMode();N.setContext(K.context);aa=N.getContext();b.setSize(ma,na);b.setController(ka);b.setFastCopy(G(y.fastCopy));
b.setTouchpad(G(y.touchpad));b.setClipboard(G(y.mapClipboard));var a=void 0!=y.ctrlToWin?G(y.ctrlToWin):void 0!=M.ctrlToWin?M.ctrlToWin:!0;b.run(99997,a);K.setImageCursor(!1);Xa(K);b.onclipdata=tb;vmware.useVMWKeyEvent&&K.setUnicode(!1)};var V=new Uint8Array(7);V[0]=147;V[1]=5;var gb=!1,R=new Uint8Array(13);R[0]=147;R[1]=5;R[7]=5;R[8]=0;this.mouseDown=function(b,a,c){Qa(!0,c,b,a)};this.mouseMove=function(b,a){Qa(gb,0,b,a)};this.mouseUp=function(b,a,c){Qa(!1,c,b,a)};this.writeKeyCode=function(b,a){g.writeRawInput("8B"+
(b?0:49152)+"\t"+a)};this.writeScancode=function(b,a){T&&("number"==typeof b?(g.writeRawInput("840\t"+b),g.writeRawInput("8449152\t"+b)):g.writeRawInput("84"+(b?0:49152)+"\t"+a))};this.writeText=function(b){g.writeRawInput("86"+b)};var La={57:32,201:65365,209:65366,207:65367,199:65360,203:65361,200:65362,205:65363,208:65364,183:65377,84:65377,197:65299,198:65299,210:65379,211:65535,184:65514,219:65515,220:65516,1:65307,14:65288,15:65289,28:65293,29:65507,42:65505,54:65506,56:65513,59:65470,60:65471,
61:65472,62:65473,63:65474,64:65475,65:65476,66:65477,67:65478,68:65479,87:65480,88:65481,55:65450,69:65407,70:65300,71:65429,72:65431,73:65434,74:65453,75:65430,76:65437,77:65432,78:65451,79:65436,80:65433,81:65435,82:65438,83:65439,156:65421,157:65508,181:65455,toKeySym:function(b){b=La[b];if(ka.localLockFlags&2)switch(b){case 65429:b=55;break;case 65431:b=56;break;case 65434:b=57;break;case 65430:b=52;break;case 65437:b=53;break;case 65432:b=54;break;case 65436:b=49;break;case 65433:b=50;break;
case 65435:b=51;break;case 65438:b=48;break;case 65439:b=46}return b||0}},bb={260:417,728:418,321:419,317:421,346:422,352:425,350:426,356:427,377:428,381:430,379:431,261:433,731:434,322:435,318:437,347:438,711:439,353:441,351:442,357:443,378:444,733:445,382:446,380:447,340:448,258:451,313:453,262:454,268:456,280:458,282:460,270:463,272:464,323:465,327:466,336:469,344:472,366:473,368:475,354:478,341:480,259:483,314:485,263:486,269:488,281:490,283:492,271:495,273:496,324:497,328:498,337:501,345:504,
367:505,369:507,355:510,729:511,294:673,292:678,304:681,286:683,308:684,295:689,293:694,305:697,287:699,309:700,266:709,264:710,288:725,284:728,364:733,348:734,267:741,265:742,289:757,285:760,365:765,349:766,312:930,342:931,296:933,315:934,274:938,290:939,358:940,343:947,297:949,316:950,275:954,291:955,359:956,330:957,331:959,256:960,302:967,278:972,298:975,325:977,332:978,310:979,370:985,360:989,362:990,257:992,303:999,279:1004,299:1007,326:1009,333:1010,311:1011,371:1017,361:1021,363:1022,8254:1150,
12290:1185,12300:1186,12301:1187,12289:1188,12539:1189,12530:1190,12449:1191,12451:1192,12453:1193,12455:1194,12457:1195,12515:1196,12517:1197,12519:1198,12483:1199,12540:1200,12450:1201,12452:1202,12454:1203,12456:1204,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,
12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12516:1236,12518:1237,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12531:1245,12443:1246,12444:1247,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,
1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,1106:1697,1107:1698,1105:1699,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,8470:1712,1026:1713,1027:1714,1025:1715,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1102:1728,1072:1729,1073:1730,1094:1731,1076:1732,1077:1733,
1092:1734,1075:1735,1093:1736,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1103:1745,1088:1746,1089:1747,1090:1748,1091:1749,1078:1750,1074:1751,1100:1752,1099:1753,1079:1754,1096:1755,1101:1756,1097:1757,1095:1758,1098:1759,1070:1760,1040:1761,1041:1762,1062:1763,1044:1764,1045:1765,1060:1766,1043:1767,1061:1768,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1071:1777,1056:1778,1057:1779,1058:1780,1059:1781,1046:1782,1042:1783,1068:1784,
1067:1785,1047:1786,1064:1787,1069:1788,1065:1789,1063:1790,1066:1791,902:1953,904:1954,905:1955,906:1956,938:1957,908:1959,910:1960,939:1961,911:1963,901:1966,8213:1967,940:1969,941:1970,942:1971,943:1972,970:1973,912:1974,972:1975,973:1976,971:1977,944:1978,974:1979,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2E3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,945:2017,946:2018,
947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,963:2034,962:2035,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,9143:2209,9484:2210,9472:2211,8992:2212,8993:2213,9474:2214,9121:2215,9123:2216,9124:2217,9126:2218,9115:2219,9117:2220,9118:2221,9120:2222,9128:2223,9132:2224,8804:2236,8800:2237,8805:2238,8747:2239,8756:2240,8733:2241,8734:2242,8711:2245,8764:2248,8771:2249,8660:2253,8658:2254,8801:2255,8730:2262,
8834:2266,8835:2267,8745:2268,8746:2269,8743:2270,8744:2271,8706:2287,402:2294,8592:2299,8593:2300,8594:2301,8595:2302,9670:2528,9618:2529,9225:2530,9228:2531,9229:2532,9226:2533,9252:2536,9227:2537,9496:2538,9488:2539,9492:2541,9532:2542,9146:2543,9147:2544,9148:2546,9149:2547,9500:2548,9508:2549,9524:2550,9516:2551,8195:2721,8194:2722,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8212:2729,8211:2730,8230:2734,8229:2735,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,
8538:2743,8453:2744,8210:2747,9001:2748,9002:2750,8539:2755,8540:2756,8541:2757,8542:2758,8482:2761,9747:2762,9665:2764,9655:2765,9675:2766,9647:2767,8216:2768,8217:2769,8220:2770,8221:2771,8478:2772,8242:2774,8243:2775,10013:2777,9644:2779,9664:2780,9654:2781,9679:2782,9646:2783,9702:2784,9643:2785,9645:2786,9651:2787,9661:2788,9734:2789,8226:2790,9642:2791,9650:2792,9660:2793,9756:2794,9758:2795,9827:2796,9830:2797,9829:2798,10016:2800,8224:2801,8225:2802,10003:2803,10007:2804,9839:2805,9837:2806,
9794:2807,9792:2808,9742:2809,8981:2810,8471:2811,8248:2812,8218:2813,8222:2814,60:2979,62:2982,175:3008,8869:3010,8970:3012,95:3014,8728:3018,9109:3020,8868:3022,8968:3027,8866:3036,8867:3068,8215:3295,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,3585:3489,3586:3490,3587:3491,
3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,
3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,12593:3745,12594:3746,12595:3747,12596:3748,12597:3749,12598:3750,12599:3751,12600:3752,12601:3753,12602:3754,12603:3755,12604:3756,12605:3757,12606:3758,12607:3759,12608:3760,12609:3761,12610:3762,12611:3763,12612:3764,
12613:3765,12614:3766,12615:3767,12616:3768,12617:3769,12618:3770,12619:3771,12620:3772,12621:3773,12622:3774,12623:3775,12624:3776,12625:3777,12626:3778,12627:3779,12628:3780,12629:3781,12630:3782,12631:3783,12632:3784,12633:3785,12634:3786,12635:3787,12636:3788,12637:3789,12638:3790,12639:3791,12640:3792,12641:3793,12642:3794,12643:3795,4520:3796,4521:3797,4522:3798,4523:3799,4524:3800,4525:3801,4526:3802,4527:3803,4528:3804,4529:3805,4530:3806,4531:3807,4532:3808,4533:3809,4534:3810,4535:3811,
4536:3812,4537:3813,4538:3814,4539:3815,4540:3816,4541:3817,4542:3818,4543:3819,4544:3820,4545:3821,4546:3822,12653:3823,12657:3824,12664:3825,12671:3826,12673:3827,12676:3828,12678:3829,12685:3830,12686:3831,4587:3832,4592:3833,4601:3834,8361:3839,8364:5028,338:5052,339:5053,376:5054},ha=new Uint8Array(9);ha[0]=147;ha[1]=4;var W=null;this.writeRawInput=function(b){if(oa){var a=parseInt(b.substring(0,2),16);b=b.substring(2).split("\t");switch(a){case 128:g.mouseDown(parseInt(b[0]),parseInt(b[1]),
parseInt(b[2]));break;case 129:g.mouseUp(parseInt(b[0]),parseInt(b[1]),parseInt(b[2]));break;case 130:g.mouseMove(parseInt(b[0]),parseInt(b[1]));break;case 131:a=0!=parseInt(b[2]);var c=parseInt(b[0]);b=parseInt(b[1]);oa&&(R[2]=a?16:8,R[3]=c>>8&255,R[4]=c&255,R[5]=b>>8&255,R[6]=b&255,R[9]=R[3],R[10]=R[4],R[11]=R[5],R[12]=R[6],J(R.buffer));break;case 132:a=La.toKeySym(b[1]);0==a&&b[2]&&(a=b[2].charCodeAt(0));c=0==b[0];fa(c,a,parseInt(b[1],10));break;case 139:c=0==b[0];a=parseInt(b[1]);a=String.fromCharCode(a).toLocaleLowerCase().charCodeAt(0);
fa(c,a,parseInt(b[2]));break;case 134:if(!Ra){c=0;for(var d=b[0].length;c<d;c++){a=b[0].charCodeAt(c);if(255<a){var e=bb[a];a=e?e:a|16777216}fa(!0,a,0);fa(!1,a,0)}}}}};var cb={" ":57,space:57,pageup:201,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,
f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78}};
