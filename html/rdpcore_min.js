var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(K,L,R){if(K==Array.prototype||K==Object.prototype)return K;K[L]=R.value;return K};
$jscomp.getGlobal=function(K){K=["object"==typeof globalThis&&globalThis,K,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var L=0;L<K.length;++L){var R=K[L];if(R&&R.Math==Math)return R}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(K,L){var R=$jscomp.propertyToPolyfillSymbol[L];if(null==R)return K[L];R=K[R];return void 0!==R?R:K[L]};$jscomp.polyfill=function(K,L,R,X){L&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(K,L,R,X):$jscomp.polyfillUnisolated(K,L,R,X))};
$jscomp.polyfillUnisolated=function(K,L,R,X){R=$jscomp.global;K=K.split(".");for(X=0;X<K.length-1;X++){var U=K[X];if(!(U in R))return;R=R[U]}K=K[K.length-1];X=R[K];L=L(X);L!=X&&null!=L&&$jscomp.defineProperty(R,K,{configurable:!0,writable:!0,value:L})};
$jscomp.polyfillIsolated=function(K,L,R,X){var U=K.split(".");K=1===U.length;X=U[0];X=!K&&X in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var va=0;va<U.length-1;va++){var M=U[va];if(!(M in X))return;X=X[M]}U=U[U.length-1];R=$jscomp.IS_SYMBOL_NATIVE&&"es6"===R?X[U]:null;L=L(R);null!=L&&(K?$jscomp.defineProperty($jscomp.polyfills,U,{configurable:!0,writable:!0,value:L}):L!==R&&($jscomp.propertyToPolyfillSymbol[U]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(U):$jscomp.POLYFILL_PREFIX+
U,U=$jscomp.propertyToPolyfillSymbol[U],$jscomp.defineProperty(X,U,{configurable:!0,writable:!0,value:L})))};$jscomp.polyfill("Array.prototype.fill",function(K){return K?K:function(L,R,X){var U=this.length||0;0>R&&(R=Math.max(0,U+R));if(null==X||X>U)X=U;X=Number(X);0>X&&(X=Math.max(0,U+X));for(R=Number(R||0);R<X;R++)this[R]=L;return this}},"es6","es3");$jscomp.typedArrayFill=function(K){return K?K:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
var rdpcodecs=rdpcodecs||new function(){function K(){var ja=new Uint32Array(10240),aa=0,r=new Uint8Array(10240),C=0,z=new Uint8Array(10240),q=0,d=new Uint8Array(10240),x=0,p=new Uint8Array(0),h=0;this.getData=function(){return ja};this.getDataSize=function(){return aa};this.resetData=function(l){ja.length<l&&(ja=new Uint32Array(l));aa=l;return ja};this.resetLumaPlane=function(l){r.length<l&&(r=new Uint8Array(l));C=l;return r};this.getLumaPlanceSize=function(){return C};this.resetOrangeChromaPlane=
function(l){z.length<l&&(z=new Uint8Array(l));q=l;return z};this.getOrangeChromaPlane=function(){return q};this.resetGreenChromaPlane=function(l){d.length<l&&(d=new Uint8Array(l));x=l;return d};this.getGreenChromaPlane=function(){return x};this.resetAlphaPlane=function(l){p.length<l&&(p=new Uint8Array(l));h=l;return p};this.getAlphaPlane=function(){return h}}function L(ja,aa,r){var C=ja,z=r,q=0,d=8,x=aa;this.attach=function(p,h,l){C=p;z=l;q=0;d=8;x=h};this.getBits=function(p){for(var h,l=0;q<z&&0<
p;)h=p,h>d&&(h=d),0!=l&&(l<<=h),l|=C[q+x]>>d-h&(1<<h)-1,d-=h,p-=h,0==d&&(d=8,q++);return l};this.putBits=function(p,h){for(var l;q<z&&0<h;)l=h,l>d&&(l=d),C[q+x]|=(p>>h-l&(1<<l)-1)<<d-l,d-=l,h-=l,0==d&&(d=8,q++)};this.eos=function(){return q>=z};this.left=function(){return q>=z?0:8*(z-q-1)+d};this.getProcessBytes=function(){return 8>d?q+1:q}}function R(){this.y=this.x=this.CrLen=this.CbLen=this.YLen=this.quantIdxCr=this.quantIdxCb=this.quantIdxY=0;this.data=new Uint32Array(4096)}function X(){function ja(C,
z,q,d,x,p,h){q=C.et;var l=4096,g=C.bitStream,e=1,m=e<<3,y=1,f=y<<3,k=0;for(null==g?g=new L(d,x,p):g.attach(d,x,p);!g.eos()&&0<l;)if(0!=e){for(;!g.eos();){x=g.getBits(1);if(0!=x)break;d=e=1<<e;d>l&&(d=l);0<d&&(Ra(h,k,k+d,0),k+=d);l-=e;m+=4;80<m&&(m=80);0>m&&(m=0);e=m>>3}d=e=g.getBits(e);d>l&&(d=l);0<d&&(Ra(h,k,k+d,0),k+=d);l-=e;e=g.getBits(1);d=0;do if(x=g.getBits(1),1==x)d++;else break;while(1);x=g.getBits(y);x|=d<<y;0==d?(f+=-2,80<f&&(f=80),0>f&&(f=0),y=f>>3):1!=d&&(f+=d,80<f&&(f=80),0>f&&(f=0),
y=f>>3);d=x+1;0<l&&(h[k++]=0!=e?-d:d);l--;m+=-6;80<m&&(m=80);0>m&&(m=0);e=m>>3}else{d=0;do if(x=g.getBits(1),1==x)d++;else break;while(1);x=g.getBits(y);x|=d<<y;0==d?(f+=-2,80<f&&(f=80),0>f&&(f=0),y=f>>3):1!=d&&(f+=d,80<f&&(f=80),0>f&&(f=0),y=f>>3);d=x;if(1!=q){p=d;for(x=0;0!=p;)p>>=1,x++;x=g.getBits(x);d-=x;0!=x&&0!=d?(m+=-6,80<m&&(m=80),0>m&&(m=0),e=m>>3):0==x&&0==d&&(m+=6,80<m&&(m=80),0>m&&(m=0),e=m>>3);0<l&&(h[k++]=0!=(x&1)?-1*(x+1>>1):x>>1);l--;0<l&&(h[k++]=0!=(d&1)?-1*(d+1>>1):d>>1);l--}else 0==
d?(0<l&&(h[k++]=0),l--,m+=3):(0<l&&(h[k++]=0!=(d&1)?-1*(d+1>>1):d>>1),l--,m+=-3),80<m&&(m=80),0>m&&(m=0),e=m>>3}q=64;l=4032;for(g=4033;1<q;l++,g++,q--)h[g]+=h[l];r(h,0,4096,5);r(h,0,1024,z[8]-6);r(h,1024,1024,z[7]-6);r(h,2048,1024,z[9]-6);r(h,3072,256,z[5]-6);r(h,3328,256,z[4]-6);r(h,3584,256,z[6]-6);r(h,3840,64,z[2]-6);r(h,3904,64,z[1]-6);r(h,3968,64,z[3]-6);r(h,4032,64,z[0]-6);C=C.dwtBuffer;aa(h,3840,C,8);aa(h,3072,C,16);aa(h,0,C,32)}function aa(C,z,q,d){var x,p;var h=d<<1;var l=z+d*d*3;var g=z;
var e=0;var m=z+d*d;var y=z+d*d*2;var f=d*d*2;for(x=0;x<d;x++){q[e]=C[l]-(C[g]+C[g]+1>>1)<<16>>16;q[f]=C[m]-(C[y]+C[y]+1>>1)<<16>>16;for(p=1;p<d;p++){var k=p<<1;q[e+k]=C[l+p]-(C[g+p-1]+C[g+p]+1>>1)<<16>>16;q[f+k]=C[m+p]-(C[y+p-1]+C[y+p]+1>>1)<<16>>16}for(p=0;p<d-1;p++)k=p<<1,q[e+k+1]=(C[g+p]<<1)+(q[e+k]+q[e+k+2]>>1)<<16>>16,q[f+k+1]=(C[y+p]<<1)+(q[f+k]+q[f+k+2]>>1)<<16>>16;k=p<<1;q[e+k+1]=(C[g+p]<<1)+q[e+k]<<16>>16;q[f+k+1]=(C[y+p]<<1)+q[f+k]<<16>>16;l+=d;g+=d;e+=h;m+=d;y+=d;f+=h}for(k=0;k<h;k++){for(p=
0;p<d;p++)x=p<<1,e=z+x*h+k,f=p*h+k,g=f+d*h,C[e]=q[f]-((0<p?q[g-h]:q[g])+q[g]+1>>1)<<16>>16;for(p=0;p<d;p++)x=p<<1,e=z+x*h+k,f=p*h+k,g=f+d*h,C[e+h]=(q[g]<<1)+(C[e]+C[e+(p<d-1?2*h:0)]>>1)<<16>>16}}function r(C,z,q,d){if(0!=d)for(;0<q;z++,q--)C[z]<<=d}this.decodeRgb=function(C,z,q,d,x,p,h,l,g,e){ja(C,q,x,z.getData(),z.getPosition(),d,C.yrBuffer);z.skipPosition(d);ja(C,q,h,z.getData(),z.getPosition(),p,C.cbgBuffer);z.skipPosition(p);ja(C,q,g,z.getData(),z.getPosition(),l,C.crbBuffer);z.skipPosition(l);
z=C.yrBuffer;q=C.cbgBuffer;d=C.crbBuffer;for(p=0;4096>p;p++)h=z[p],l=q[p],g=d[p],h=h+4096<<16,x=h+91947*g,g=h-22544*l-46792*g,h+=115998*l,x>>=21,g>>=21,h>>=21,z[p]=0>x?0:255<x?255:x,q[p]=0>g?0:255<g?255:g,d[p]=0>h?0:255<h?255:h;z=C.yrBuffer;q=C.cbgBuffer;C=C.crbBuffer;for(d=0;4096>d;d++)e[d]=4278190080|C[d]<<16|q[d]<<8|z[d]}}function U(ja){var aa=[new hi5.graphic.Rectangle],r=[new R],C=0,z=0;this.resetRects=function(q){if(aa.length<q){var d=aa.length;for(aa.length=q;d<q;d++)aa[d]=new hi5.graphic.Rectangle}C=
q;return aa};this.resetTiles=function(q){var d=0;if(ja){if(r.length<q)for(d=r.length,r.length=q;d<q;d++)r[d]=new R}else for(;d<q;d++)r[d]=new R;z=q;return r};this.getRectSize=function(){return C};this.getTileSize=function(){return z};this.getRects=function(){return aa};this.getTiles=function(){return r}}function va(){this.ctxId=0;this.tileSize=64;this.qt=this.et=this.xft=this.cct=this.flags=0;this.yrBuffer=new Int32Array(4096);this.cbgBuffer=new Int32Array(4096);this.crbBuffer=new Int32Array(4096);
this.dwtBuffer=new Int32Array(4096);var ja=this;this.setProperties=function(aa){ja.flags=aa&7;ja.cct=aa>>3&3;ja.xft=aa>>5&15;ja.et=aa>>9&15};this.bitStream=new L}var M=hi5.Arrays.arraycopy,Ra=hi5.Arrays.fill;this.flipimage=function(ja,aa,r,C,z,q){q*=C;for(var d=0;d<z;d++)C=aa+(z-d-1)*q,M(ja,C,r,d*q,q)};this.Bitmap=function(ja,aa,r,C,z,q,d,x){this.data=ja;this.left=C;this.top=z;this.width=aa;this.height=r;this.bitsperpixel=q;this.bytesperpixel=Math.floor((q+7)/8);this.raw=d;this.codec=x||0};this.NSCodec=
function(){function ja(r,C,z,q,d){if(0==z)Ra(q,0,d,255);else if(z<d){var x=d;for(d=0;4<x;){var p=r[C++];5==x?(q[d++]=p,x--):p==r[C]?(C++,255>(r[C]&255)?(z=r[C++]&255,z+=2):(C++,z=(r[C+3]&255)<<24|(r[C+2]&255)<<16|(r[C+1]&255)<<8|r[C]&255,C+=4),Ra(q,d,d+z,p),d+=z,x-=z):(q[d++]=p,x--)}for(z=0;4>z;z++)q[d++]=r[C++]}else M(r,C,q,0,d)}var aa=new K;this.getData=function(){return aa.getData()};this.getDataSize=function(){return aa.getDataSize()};this.process=function(r,C,z,q){C=r.getLittleEndian32();var d=
r.getLittleEndian32(),x=r.getLittleEndian32();r.skipPosition(4);var p=r.getByte(),h=r.getByte();r.skipPosition(2);var l=r.getData(),g=r.getPosition(),e=aa.resetData(z*q),m=z+(~(z&7)+1&7),y=q+(~(q&1)+1&1);var f=m*y;var k=aa.resetLumaPlane(f),A=aa.resetOrangeChromaPlane(f);f=aa.resetGreenChromaPlane(f);var n=z*q;y=0<h?(m>>1)*(y>>1):n;var w=0<h?y:n;ja(l,g,C,k,0<h?m*q:n);g+=C;ja(l,g,d,A,y);ja(l,g+d,x,f,w);l=0;g=z+(~(z&7)+1&7);var T=p-1;for(m=0;m<q;m++)for(0<h?(n=m*g,y=(m>>1)*(g>>1),w=(m>>1)*(g>>1)):(n=
m*z,y=m*z,w=m*z),p=0;p<z;p++){var D=k[n]&255;var u=(A[y]&255)<<T<<24>>24;var H=f[w]<<T<<24>>24;var I=D+u-H;var B=D+H;D=D-u-H;D=0>D?0:255<D?255:D;B=0>B?0:255<B?255:B;I=0>I?0:255<I?255:I;e[l++]=4278190080|D<<16|B<<8|I;n++;y+=0<h?p%2:1;w+=0<h?p%2:1}r.skipPosition(C+d+x)}};this.RemoteFX=function(ja){var aa=new U(!ja);ja=new X;var r=new va;this.decode=function(z,q){for(q=z.getPosition()+q;z.getPosition()<q;){var d=z.getLittleEndian16();var x=z.getLittleEndian32();if(0==x)break;x=z.getPosition()-6+x;switch(d){case 52416:d=
z;d.getLittleEndian32();d.getLittleEndian16();break;case 52417:z.skipPosition(4);break;case 52418:d=z;for(var p=d.getByte(),h=0;h<p;h++)d.getByte(),d.getLittleEndian16(),d.getLittleEndian16();break;case 52419:d=z;d.skipPosition(2);r.ctxId=d.getByte();r.tileSize=d.getLittleEndian16();r.setProperties(d.getLittleEndian16());break;case 52420:z.skipPosition(10);break;case 52421:z.skipPosition(2);break;case 52422:d=z;d.skipPosition(2);d.skipPosition(1);p=d.getLittleEndian16();h=aa.resetRects(p);for(var l=
0;l<p;l++){var g=h[l];g.x=d.getLittleEndian16();g.y=d.getLittleEndian16();g.width=d.getLittleEndian16();g.height=d.getLittleEndian16()}d.skipPosition(4);break;case 52423:d=z;p=r;d.skipPosition(6);h=d.getLittleEndian16();p.cct=h>>>4&3;p.xft=h>>>6&15;p.et=h>>>10&15;p.qt=h>>>14&3;var e=d.getByte();d.skipPosition(1);l=d.getLittleEndian16();d.skipPosition(4);g=Array(10*e);var m=0;for(h=0;h<e;h++){var y=d.getByte();g[m++]=y&15;g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;
g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=y>>>4;y=d.getByte();g[m++]=y&15;g[m++]=y>>>4}y=aa.resetTiles(l);for(h=0;h<l;h++){e=y[h];m=d;var f=e;m.skipPosition(6);f.quantIdxY=m.getByte();f.quantIdxCb=m.getByte();f.quantIdxCr=m.getByte();f.x=64*m.getLittleEndian16();f.y=64*m.getLittleEndian16();f.YLen=m.getLittleEndian16();f.CbLen=m.getLittleEndian16();f.CrLen=m.getLittleEndian16();C(p,d,g,e.YLen,10*e.quantIdxY,e.CbLen,10*e.quantIdxCb,e.CrLen,10*e.quantIdxCr,e.data)}break;default:svGlobal.logger.warn("unknown blockType 0x%X"+
d)}z.setPosition(x)}return aa};var C=ja.decodeRgb;this.getResult=function(){return aa}};this.bitmap=new function(){function ja(r,C,z,q,d,x){for(var p,h=0,l,g,e,m,y=0,f,k=C,A=x;h<q;){x=A+z*q*4-(h+1)*z*4;e=0;f=x;p=0;if(0==y)for(;p<z;){l=r[C++];g=l&15;l=l>>4&15;m=g<<4|l;47>=m&&16<=m&&(g=m,l=0);for(;0<l;)e=r[C++],d[x]=e,x+=4,p++,l--;for(;0<g;)d[x]=e,x+=4,p++,g--}else for(;p<z;){l=r[C++];g=l&15;l=l>>4&15;m=g<<4|l;47>=m&&16<=m&&(g=m,l=0);for(;0<l;)m=r[C++],0!=(m&1)?(m>>=1,m+=1,e=-m):e=m>>=1,m=d[y+4*p]+
e,d[x]=m,x+=4,p++,l--;for(;0<g;)m=d[y+4*p]+e,d[x]=m,x+=4,p++,g--}h++;y=f}return C-k}function aa(r,C,z,q,d,x){var p,h;for(h=0;h<q;h++)for(p=0;p<z;p++)d[x+4*((q-h-1)*z+p)]=r[C+(h*z+p)]}this.decompressInt16=function(r,C,z,q,d){var x=-1,p=-1;z=d+z;for(var h,l,g,e=r,m=-1,y,f=0,k=0,A=0,n=4294967295,w,T=!1,D=!1,u=new Uint32Array(r*C);d<z;){y=0;l=q[d++];h=l>>4;switch(h){case 12:case 13:case 14:h-=6;l&=15;g=16;break;case 15:h=l&15;9>h?(l=q[d++],l|=q[d++]<<8):l=11>h?8:1;g=0;break;default:h>>=1,l&=31,g=32}0!=
g&&(w=2==h||7==h,0==l?l=w?q[d++]+1:q[d++]+g:w&&(l<<=3));switch(h){case 0:m!=h||e==r&&-1==x||(T=!0);break;case 8:w=q[d++]|q[d++]<<8,f=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;case 3:w=q[d++]|q[d++]<<8;k=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;break;case 6:case 7:w=q[d++]|q[d++]<<8;n=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16;h-=5;break;case 9:A=3;h=2;y=3;break;case 10:A=5,h=2,y=5}m=h;for(g=0;0<l;)switch(e>=r&&
(e=0,C--,x=p,p=C*r),h){case 0:T&&(u[p+e]=-1==x?n:u[x+e]^n|4278190080,T=!1,l--,e++);if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(var H=0;8>H;H++)u[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)u[p+e]=4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)u[p+e]=u[x+e],l--,e++;for(;0<l&&e<r;)u[p+e]=u[x+e],l--,e++}break;case 1:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)u[p+e]=n,l--,e++;for(;0<l&&e<r;)u[p+e]=n,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)u[p+e]=u[x+e]^n|4278190080,l--,e++;for(;0<
l&&e<r;)u[p+e]=u[x+e]^n|4278190080,l--,e++}break;case 2:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?n:4278190080,l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?n:4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?u[x+e]^n|4278190080:u[x+e],l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?u[x+
e]^n|4278190080:u[x+e],l--,e++}break;case 3:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)u[p+e]=k,l--,e++;for(;0<l&&e<r;)u[p+e]=k,l--,e++;break;case 4:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)w=q[d++]|q[d++]<<8,u[p+e]=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16,l--,e++;for(;0<l&&e<r;)w=q[d++]|q[d++]<<8,u[p+e]=4278190080|w>>8&248|w>>13&7|(w>>3&252|w>>9&3)<<8|(w<<3&248|w>>2&7)<<16,l--,e++;break;case 8:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)D?(u[p+e]=k,D=!1):(u[p+e]=f,D=!0,l++),l--,
e++;for(;0<l&&e<r;)D?(u[p+e]=k,D=!1):(u[p+e]=f,D=!0,l++),l--,e++;break;case 13:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)u[p+e]=4294967295,l--,e++;for(;0<l&&e<r;)u[p+e]=4294967295,l--,e++;break;case 14:for(;0!=(l&-8)&&e+8<r;)for(H=0;8>H;H++)u[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)u[p+e]=4278190080,l--,e++;break;default:l--,e++}}return u};this.byte2int=function(r,C,z){C||(C=r.length);z||(z=0);C=Math.floor(C/4);for(var q=new Uint32Array(C),d,x=0;x<C;x++)d=(x<<2)+z,q[x]=(r[d+3]&255)<<24|r[d+2]&255|(r[d+
1]&255)<<8|(r[d+0]&255)<<16;return q};this.decompressInt32=function(r,C,z,q,d){z=q[d];d+=1;var x=r*C,p=new Uint32Array(4*x);if(0==(z&32)){for(var h=d,l,g,e=0,m,y,f,k=h,A=3;e<C;){l=A+r*C*4-(e+1)*r*4;for(g=0;g<r;){m=q[h++];y=m&15;m=m>>4&15;f=y<<4|m;47>=f&&16<=f&&(y=f,m=0);for(;0<m;)h++,p[l]=255,l+=4,g++,m--;for(;0<y;)p[l]=255,l+=4,g++,y--}e++}d+=h-k}else for(l=0;l<x;l++)h=l<<2,p[h+3]=255;0!=(z&16)?(z=ja(q,d,r,C,p,2),d+=z,z=ja(q,d,r,C,p,1),ja(q,d+z,r,C,p,0)):(aa(q,d,r,C,p,2),d+=x,aa(q,d,r,C,p,1),aa(q,
d+x,r,C,p,0));return rdpBitmap.byte2int(p)};this.decompressInt24=function(r,C,z,q,d){var x=-1,p=-1;z=d+z;for(var h,l,g,e=r,m=-1,y,f=0,k=0,A=0,n=4294967295,w=!1,T=!1,D,u=new Uint32Array(r*C);d<z;){y=0;l=q[d++];h=l>>4;switch(h){case 12:case 13:case 14:h-=6;l&=15;g=16;break;case 15:h=l&15;9>h?(l=q[d++],l|=q[d++]<<8):l=11>h?8:1;g=0;break;default:h>>=1,l&=31,g=32}0!=g&&(D=2==h||7==h,0==l?l=D?q[d++]+1:q[d++]+g:D&&(l<<=3));switch(h){case 0:m!=h||e==r&&-1==x||(w=!0);break;case 8:f=4278190080|q[d++]<<16|q[d++]<<
8|q[d++];case 3:k=4278190080|q[d++]<<16|q[d++]<<8|q[d++];break;case 6:case 7:n=4278190080|q[d++]<<16|q[d++]<<8|q[d++];h-=5;break;case 9:A=3;h=2;y=3;break;case 10:A=5,h=2,y=5}m=h;for(g=0;0<l;)switch(e>=r&&(e=0,C--,x=p,p=C*r),h){case 0:w&&(u[p+e]=-1==x?n:u[x+e]^n|4278190080,w=!1,l--,e++);if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)u[p+e]=4278190080,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=u[x+e],l--,e++;for(;0<l&&e<r;)u[p+e]=u[x+e],l--,
e++}break;case 1:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=n,l--,e++;for(;0<l&&e<r;)u[p+e]=n,l--,e++}else{for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=u[x+e]^n|4278190080,l--,e++;for(;0<l&&e<r;)u[p+e]=u[x+e]^n|4278190080,l--,e++}break;case 2:if(-1==x){for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?n:4278190080,l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?n:4278190080,l--,e++}else{for(;0!=(l&
-8)&&e+8<r;)for(D=0;8>D;D++)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?u[x+e]^n|4278190080:u[x+e],l--,e++;for(;0<l&&e<r;)g<<=1,g&=255,0==g&&(A=0!=y?y&255:q[d++],g=1),u[p+e]=0!=(A&g)?u[x+e]^n|4278190080:u[x+e],l--,e++}break;case 3:for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=k,l--,e++;for(;0<l&&e<r;)u[p+e]=k,l--,e++;break;case 4:for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],l--,e++;for(;0<l&&e<r;)u[p+e]=4278190080|q[d++]<<16|q[d++]<<8|q[d++],
l--,e++;break;case 8:for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)T?(u[p+e]=k,T=!1):(u[p+e]=f,T=!0,l++),l--,e++;for(;0<l&&e<r;)T?(u[p+e]=k,T=!1):(u[p+e]=f,T=!0,l++),l--,e++;break;case 13:for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=4294967295,l--,e++;for(;0<l&&e<r;)u[p+e]=4294967295,l--,e++;break;case 14:for(;0!=(l&-8)&&e+8<r;)for(D=0;8>D;D++)u[p+e]=4278190080,l--,e++;for(;0<l&&e<r;)u[p+e]=4278190080,l--,e++}}return u};this.decompress=function(r,C,z,q,d){var x=-1,p=0;z+=d;var h=r,l=-1,g=0,e=0,m=0,y=4294967295,
f=!1,k=!1,A=new Uint8Array(r*C);for(A[0]=0;d<z;){var n=0;var w=q[d++];var T=w>>4;switch(T){case 12:case 13:case 14:T-=6;w&=15;var D=16;break;case 15:T=w&15;9>T?(w=q[d++],w|=q[d++]<<8):w=11>T?8:1;D=0;break;default:T>>=1,w&=31,D=32}if(0!=D){var u=2==T||7==T;0==w?w=u?q[d++]+1:q[d++]+D:u&&(w<<=3)}switch(T){case 0:l!=T||h==r&&-1==x||(f=!0);break;case 8:g=q[d++];case 3:e=q[d++];break;case 6:case 7:y=q[d++];T-=5;break;case 9:m=3;T=2;n=3;break;case 10:m=5,T=2,n=5}l=T;for(D=0;0<w;)switch(h>=r&&(h=0,C--,x=
p,p=C*r),T){case 0:f&&(A[p+h]=-1==x?y:A[x+h]^y,f=!1,w--,h++);if(-1==x){for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=0,w--,h++;for(;0<w&&h<r;)A[p+h]=0,w--,h++}else{for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=A[x+h],w--,h++;for(;0<w&&h<r;)A[p+h]=A[x+h],w--,h++}break;case 1:if(-1==x){for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=y,w--,h++;for(;0<w&&h<r;)A[p+h]=y,w--,h++}else{for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=A[x+h]^y,w--,h++;for(;0<w&&h<r;)A[p+h]=A[x+h]^y,w--,h++}break;case 2:if(-1==x){for(;0!=
(w&-8)&&h+8<r;)for(u=0;8>u;u++)D<<=1,D&=255,0==D&&(m=0!=n?n:q[d++],D=1),A[p+h]=0!=(m&D)?y:0,w--,h++;for(;0<w&&h<r;)D<<=1,D&=255,0==D&&(m=0!=n?n:q[d++],D=1),A[p+h]=0!=(m&D)?y:0,w--,h++}else{for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)D<<=1,D&=255,0==D&&(m=0!=n?n:q[d++],D=1),A[p+h]=0!=(m&D)?A[x+h]^y:A[x+h],w--,h++;for(;0<w&&h<r;)D<<=1,D&=255,0==D&&(m=0!=n?n:q[d++],D=1),A[p+h]=0!=(m&D)?A[x+h]^y:A[x+h],w--,h++}break;case 3:for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=e,w--,h++;for(;0<w&&h<r;)A[p+h]=e,w--,
h++;break;case 4:for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=q[d++],w--,h++;for(;0<w&&h<r;)A[p+h]=q[d++],w--,h++;break;case 8:for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)k?(A[p+h]=e,k=!1):(A[p+h]=g,k=!0,w++),w--,h++;for(;0<w&&h<r;)k?(A[p+h]=e,k=!1):(A[p+h]=g,k=!0,w++),w--,h++;break;case 13:for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=255,w--,h++;for(;0<w&&h<r;)A[p+h]=255,w--,h++;break;case 14:for(;0!=(w&-8)&&h+8<r;)for(u=0;8>u;u++)A[p+h]=0,w--,h++;for(;0<w&&h<r;)A[p+h]=0,w--,h++;break;default:w--,h++}}return A}}};
function RdpGeneral(K,L,R,X,U,va,M){function Ra(){return Ka.displayName||Ka.server||Ka.symlink||Ka.id||"undefined"}function ja(a){return 4278190080|(a<<3&248|a>>2&7)<<16|(a>>3&252|a>>9&3)<<8|a>>8&248|a>>13&7}function aa(a){return 4278190080|ta.paletteRdp[2][a]<<16|ta.paletteRdp[1][a]<<8|ta.paletteRdp[0][a]}function r(a){return 4278190080|a}function C(a){return 4278190080|a}function z(a,t){switch(a){case 16:Sa=ja;dc=rdpBitmap.decompressInt16;break;case 8:Sa=aa;break;case 24:Sa=C;dc=rdpBitmap.decompressInt24;
break;case 32:Sa=r;dc=rdpBitmap.decompressInt32;break;case 15:return Ka.invitation||console.log("15 bit color is not supported anymore."),!1;default:return!1}X=a;db=(a+7)/8>>0;if(t&&Y.onColorChange)Y.onColorChange(a);return!0}function q(a,t,v){L=a;R=t;P=oa=0;ea=L-1;na=R-1;if(Y.onresolutionchange&&v)Y.onresolutionchange(a,t)}function d(a){hc||Rb&&Z.send(a)}function x(){this.style=this.yOrigin=this.xOrigin=0;this.pattern=Array(8);this.toStream=function(a){a.setByte(this.xOrigin);a.setByte(this.yOrigin);
a.setByte(this.style);a.setBytes(this.pattern)};this.fromStream=function(a){this.xOrigin=a.getByte();this.yOrigin=a.getByte();this.style=a.getByte();this.pattern=a.getBytes(8)};this.byteLength=function(){return 11}}function p(){this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();
this.top=a.getLittleEndian16();this.bottom=a.getLittleEndian16()};this.byteLength=function(){return 8}}function h(){this.action=this.offset=this.bottom=this.top=this.right=this.left=0;this.toStream=function(a){a.setLittleEndian16(this.left);a.setLittleEndian16(this.right);a.setLittleEndian16(this.top);a.setLittleEndian16(this.bottom);a.setLittleEndian32(this.offset);a.setByte(this.action)};this.fromStream=function(a){this.left=a.getLittleEndian16();this.right=a.getLittleEndian16();this.top=a.getLittleEndian16();
this.bottom=a.getLittleEndian16();this.offset=a.getLittleEndian32();this.action=a.getByte()};this.byteLength=function(){return 13}}function l(){this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=
a.getByte()};this.byteLength=function(){return 9}}function g(a,t,v,E,G){this.offset=a;this.baseLine=t;this.width=v;this.height=E;this.fontData=G}function e(){this.opcode=this.backgroundColor=this.endY=this.endX=this.startY=this.startX=this.mixmode=0;this.pen=new f;this.toStream=function(a){a.setLittleEndian16(this.mixmode);a.setLittleEndian16(this.startX);a.setLittleEndian16(this.startY);a.setLittleEndian16(this.endX);a.setLittleEndian16(this.endY);a.setLittleEndian32(this.backgroundColor);a.setByte(this.opcode);
this.pen.toStream(a)};this.fromStream=function(a){this.mixmode=a.getLittleEndian16();this.startX=a.getLittleEndian16();this.startY=a.getLittleEndian16();this.endX=a.getLittleEndian16();this.endY=a.getLittleEndian16();this.backgroundColor=a.getLittleEndian32();this.opcode=a.getByte();this.pen.fromStream(a)};this.byteLength=function(){return 15+this.pen.byteLength()}}function m(){this.cacheIDX=this.cacheID=this.colorTable=this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=
function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY);a.setByte(this.cacheID);a.setByte(this.colorTable);a.setLittleEndian16(this.cacheIDX)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=
a.getLittleEndian16();this.cacheID=a.getByte();this.colorTable=a.getByte();this.cacheIDX=a.getLittleEndian16()};this.byteLength=function(){return 17}}function y(){this.foregroundColor=this.backgroundColor=this.opcode=this.cy=this.cx=this.y=this.x=0;this.brush=new x;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian32(this.foregroundColor);
this.brush.toStream(a)};this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.backgroundColor=a.getLittleEndian32();this.foregroundColor=a.getLittleEndian32();this.brush.fromStream(a)};this.byteLength=function(){return 17+this.brush.byteLength()}}function f(){this.color=this.width=this.style=0;this.toStream=function(a){a.setByte(this.style);a.setByte(this.width);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.style=a.getByte();this.width=a.getByte();this.color=a.getLittleEndian32()};this.byteLength=function(){return 6}}function k(){this.dataSize=this.opcode=this.lines=this.foregroundColor=this.flags=this.y=this.x=0;this.data=[];this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.opcode);a.setLittleEndian32(this.foregroundColor);a.setByte(this.lines);a.setByte(this.dataSize);this.dataSize&&a.setBytes(this.data)};this.fromStream=
function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.opcode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.lines=a.getByte();if(this.dataSize=a.getByte())this.data=a.getBytes(this.dataSize)};this.byteLength=function(){return 11+this.dataSize}}function A(){this.color=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setLittleEndian32(this.color)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.color=a.getLittleEndian32()};this.byteLength=function(){return 12}}function n(){this.srcY=this.srcX=this.opcode=this.cy=this.cx=this.y=this.x=0;this.toStream=function(a){a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setLittleEndian16(this.cx);a.setLittleEndian16(this.cy);a.setByte(this.opcode);a.setLittleEndian16(this.srcX);a.setLittleEndian16(this.srcY)};
this.fromStream=function(a){this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();this.cx=a.getLittleEndian16();this.cy=a.getLittleEndian16();this.opcode=a.getByte();this.srcX=a.getLittleEndian16();this.srcY=a.getLittleEndian16()};this.byteLength=function(){return 13}}function w(){this.length=this.opcode=this.boxBottom=this.boxRight=this.boxTop=this.boxLeft=this.clipBottom=this.clipRight=this.clipTop=this.clipLeft=this.font=this.unknown=this.y=this.x=this.backgroundColor=this.foregroundColor=
this.mixmode=this.flags=0;this.text=null;this.toStream=function(a){a.setByte(this.font);a.setByte(this.flags);a.setByte(this.opcode);a.setByte(this.mixmode);a.setLittleEndian32(this.foregroundColor);a.setLittleEndian32(this.backgroundColor);a.setLittleEndian16(this.clipLeft);a.setLittleEndian16(this.clipTop);a.setLittleEndian16(this.clipRight);a.setLittleEndian16(this.clipBottom);a.setLittleEndian16(this.boxLeft);a.setLittleEndian16(this.boxTop);a.setLittleEndian16(this.boxRight);a.setLittleEndian16(this.boxBottom);
a.setLittleEndian16(this.x);a.setLittleEndian16(this.y);a.setByte(this.length);this.length&&a.setBytes(this.text)};this.fromStream=function(a){this.font=a.getByte();this.flags=a.getByte();this.opcode=a.getByte();this.mixmode=a.getByte();this.foregroundColor=a.getLittleEndian32();this.backgroundColor=a.getLittleEndian32();this.clipLeft=a.getLittleEndian16();this.clipTop=a.getLittleEndian16();this.clipRight=a.getLittleEndian16();this.clipBottom=a.getLittleEndian16();this.boxLeft=a.getLittleEndian16();
this.boxTop=a.getLittleEndian16();this.boxRight=a.getLittleEndian16();this.boxBottom=a.getLittleEndian16();this.x=a.getLittleEndian16();this.y=a.getLittleEndian16();if(this.length=a.getByte())this.text=a.getBytes(this.length)};this.byteLength=function(){return 33+this.length}}function T(){this.orderType=0;this.bounds=new p;this.destBlt=new l;this.patBlt=new y;this.screenBlt=new n;this.line=new e;this.rectangle=new A;this.deskSave=new h;this.memBlt=new m;this.polyLine=new k;this.text2=new w;this._line=
new hi5.graphic.Line;this.paletteRdp=null;this.toPDU=function(){var a=4+this.bounds.byteLength()+this.destBlt.byteLength()+this.patBlt.byteLength()+this.screenBlt.byteLength()+this.line.byteLength()+this.rectangle.byteLength()+this.deskSave.byteLength()+this.memBlt.byteLength()+this.polyLine.byteLength()+this.text2.byteLength()+14+10,t=new Uint8Array(a);t[0]=29;t[2]=1;t[3]=3;a=new hi5.DataBuffer(t,0,a);a.skipPosition(4);this.bounds.toStream(a);this.destBlt.toStream(a);this.patBlt.toStream(a);this.screenBlt.toStream(a);
this.line.toStream(a);this.rectangle.toStream(a);this.deskSave.toStream(a);this.memBlt.toStream(a);this.polyLine.toStream(a);this.text2.toStream(a);a.setLittleEndian16(oa);a.setLittleEndian16(P);a.setLittleEndian16(ea);a.setLittleEndian16(na);a.setLittleEndian32(Sb);a.setByte(this.orderType);a.setByte(X);Ec.toStream(a);return t};this.fromStream=function(a){this.bounds.fromStream(a);this.destBlt.fromStream(a);this.patBlt.fromStream(a);this.screenBlt.fromStream(a);this.line.fromStream(a);this.rectangle.fromStream(a);
this.deskSave.fromStream(a);this.memBlt.fromStream(a);this.polyLine.fromStream(a);this.text2.fromStream(a);oa=a.getLittleEndian16();P=a.getLittleEndian16();ea=a.getLittleEndian16();na=a.getLittleEndian16();Sb=a.getLittleEndian32();this.orderType=a.getByte();z(a.getByte(),!0);Ec.fromStream(a)}}function D(){var a=Rb;Mc=Rb=!1;hb();ta=new T;Sb=0;Ca&&Ca.reset();Na&&Na.reset();a&&(Rb=a)}function u(){if(!Rb){Mc=!1;if(hc)Z=hc;else{if(Y.oncreatewebsocket)Z=Y.oncreatewebsocket(K);else{var a=K;0==Y.mode&&M&&
(a=K.substring(0,K.indexOf("?"))+"?_METHOD=post",Ka.loadbalanceTokenName&&Ka[Ka.loadbalanceTokenName]&&(a+="&loadbalanceTokenName="+Ka.loadbalanceTokenName+"&"+Ka.loadbalanceTokenName+"="+Ka[Ka.loadbalanceTokenName]));Z=new WebSocket(a,"rdp")}"binaryType"in Z&&(Z.binaryType="arraybuffer")}Z.onopen=function(t){Rb=!0;if(!M&&Y.onopen)Y.onopen()};"on"==Ka.recording&&(Tb=new RecordingManager,Tb.setHeader({name:"rec",width:L,height:R,color:X,namesuffix:".rdpv",filetag:"RDPV",duration:0}));Z.onmessage=H;
Z.onclose=V;Z.onerror=Y.onerror}}function H(a){var t=a.data;if("string"!=typeof t){var v=new Uint8Array(t);null!=Tb&&Tb.add(new RecordingObj(v,0,t.byteLength,-1));xb.attach(v,0,t.byteLength);var E=xb.getLittleEndian16();switch(E){case 29:B(xb);break;case 48:if(Y.onSlowPath)Y.onSlowPath();var G=xb;G.getLittleEndian16();var J=G.getByte(),O=G.getByte(),N=G.getLittleEndian16(),ba=0!=(O&32);ba&&(N-=18);if(ba)if(Ca||(Ca=new BulkData),3==(O&15)){Na||(Na=new Bulk61Data);var fa=G.getByte(),xa=G.getByte();
N-=2;if(0!=(fa&16)&&0!=(xa&32)){Ca.dec5(G.getData(),G.getPosition(),N,xa);var eb=Ca.getData(),ya=Ca.getDecompressedLength();Na.dec(eb.getData(),eb.getPosition(),ya,fa)}else Na.dec(G.getData(),G.getPosition(),N,fa);var ua=Na.getData()}else Ca.dec(G.getData(),G.getPosition(),N,O),ua=Ca.getData();else ua=G;var Q=ua;switch(J){case 2:var yb=Q.getLittleEndian16();switch(yb){case 0:Q.skipPosition(2);var ic=Q.getLittleEndian16();Q.skipPosition(2);Aa(Q,ic);break;case 1:zb(Q);break;case 2:Ha(Q);break;case 3:break;
default:svGlobal.logger.warn("Unimplemented Update type "+yb)}break;case 20:break;case 31:Lb=!1;break;case 27:var Ab=Q.getLittleEndian16();Q.skipPosition(2);switch(Ab){case 3:var Mb=Q.getLittleEndian16();var Ia=Q.getLittleEndian16();Y.onMoveCursor(Mb,Ia,!0);break;case 6:W(Q,24);break;case 7:U.setCursor(Q.getLittleEndian16());break;case 1:var Ub=Q.getLittleEndian16();switch(Ub){case 0:break;default:svGlobal.logger.warn("XXX system pointer message "+Ub)}break;case 8:var jc=Q.getLittleEndian16();W(Q,
jc)}break;case 34:break;case 38:a:{var Vb=Q.getLittleEndian32(),Bb=Y.sessionInfo;if(3>Vb){var Cb=Y.sessionInfo;switch(Vb){case 0:Q.skipPosition(4);Cb.domain=Q.getUnicodeString(52,!0);Q.skipPosition(4);Cb.userName=Q.getUnicodeString(512,!0);Cb.sessionId=Q.getLittleEndian32();break;case 1:Cb.version=Q.getLittleEndian16();Q.skipPosition(4);Cb.sessionId=Q.getLittleEndian32();var kc=Q.getLittleEndian32();var dd=Q.getLittleEndian32();Q.skipPosition(558);Cb.domain=Q.getUnicodeString(kc,!0);Cb.userName=Q.getUnicodeString(dd,
!0)}}else if(3==Vb){Q.skipPosition(2);var Nc=Q.getLittleEndian32();Q.skipPosition(4);if(2==Nc)break a;Q.getLittleEndian32();Q.skipPosition(4);Bb.sessionId=Q.getLittleEndian32();var wc=Q.getBytes(16);for(var Zb=Array(16),Xa=0;16>Xa;Xa++)Zb[Xa]=wc[Xa]&255}if(!Mc&&Y.onloggedin)Y.onloggedin(Y.sessionInfo);Mc=!0;var ma="8D";Bb.sessionId&&(ma+=Bb.sessionId+"\t"+(wc?hi5.Base64.enc(wc):0)+"\t"+Bb.userName+"\t"+Bb.domain);xc||d(ma)}Lb=!1;break;case 40:Lb=!1;break;case 41:Q.skipPosition(2);var mb=Q.getLittleEndian16(),
lc=0!=(mb&4),ec=0!=(mb&2),Db=0!=(mb&1),Eb=0!=(mb&8);if(Y.onLockKeyState)Y.onLockKeyState({capsLock:lc,numLock:ec,scrollLock:Db,kanaLock:Eb});svGlobal.logger.info("LED state, capsLock:"+lc+" numLock:"+ec+" scrollLock:"+Db+" kanaLock:"+Eb);break;case 47:Lb=!0;var Nb=Q.getLittleEndian32();svGlobal.logger.info("Disconnect:"+Nb.toString(16));var ha=11==Nb&&Oc;if(ha)Y.onCloseSurface();if(!(1>Nb||ha)){!xc&&Rb&&d("85"+Nb);var Pc=Nb.toString(16).toUpperCase();if(Y.onerror)Y.onerror(Pc)}break;case 50:Q.skipPosition(4);
break;case 54:var Qc=Q.getLittleEndian32().toString(16).toUpperCase();svGlobal.logger.warn("server status code:"+Qc);break;case 55:for(var da=Q.getLittleEndian32(),ca,Ya,Ob,$b,ia=0,mc=0,ib=0,S=0,la=0;la<da;la++)ca=Q.getLittleEndian32(),Ya=Q.getLittleEndian32(),Ob=Q.getLittleEndian32(),$b=Q.getLittleEndian32(),Q.skipPosition(4),ia=Math.min(ca,ia),mc=Math.max(mc,Ob),ib=Math.min(Ya,ib),S=Math.max(S,$b);ca=mc-ia+1;Ya=S-ib+1;svGlobal.logger.warn("monitor, count:"+da+" w:"+ca+" h:"+Ya);q(ca,Ya,!0);break;
default:svGlobal.logger.warn("Unimplemented Data PDU type "+J)}break;case 49:if(Y.onFastPath)Y.onFastPath();a:{var jb=xb,fc=jb.getByte(),La=fc&15,ra=fc>>4&3,nb=0;2==(fc>>6&3)&&(nb=jb.getByte());var ob=0!=(nb&32);var Za=jb.getLittleEndian16();if(ob)if(Ca||(Ca=new BulkData),3==(nb&15)){Na||(Na=new Bulk61Data);var Fa=jb.getByte(),Fb=jb.getByte();Za-=2;if(0!=(Fa&16)&&0!=(Fb&32)){Ca.dec5(jb.getData(),jb.getPosition(),Za,Fb);var kb=Ca.getData(),Pb=Ca.getDecompressedLength();Na.dec(kb.getData(),kb.getPosition(),
Pb,Fa)}else Na.dec(jb.getData(),jb.getPosition(),Za,Fa);var Ma=Na.getData();Za=Na.getDecompressedLength()}else Ca.dec(jb.getData(),jb.getPosition(),Za,nb),Ma=Ca.getData(),Za=Ca.getDecompressedLength();else Ma=jb;if(0!=ra)switch(ra){case 2:case 3:Rc.addFragement(Ma,Za);break a;case 1:Rc.addFragement(Ma,Za),Ma=Rc.clearFragements()}var Ba=Ma;za&&za.begin("decodeFastPath");switch(La){case 0:var nc=Ba.getLittleEndian16();Aa(Ba,nc);break;case 1:Ba.skipPosition(2);zb(Ba);break;case 2:Ba.skipPosition(2);
Ha(Ba);break;case 3:break;case 4:for(var Sc=Ba.getEnd(),gc,oc;Ba.getPosition()<Sc;){var Fc=Ba.getLittleEndian16();switch(Fc){case 1:case 6:gc=Ba.getLittleEndian16();oc=Ba.getLittleEndian16();Ba.getLittleEndian16();Ba.getBigEndian16();var Gc=void 0,ab=void 0,qa=Ba,Ua=gc,$a=oc,Hc=qa.getByte();qa.skipPosition(2);var ac=qa.getByte(),Da=qa.getLittleEndian16(),pb=qa.getLittleEndian16(),Wb=qa.getLittleEndian32(),yc=qa.getPosition()+Wb;switch(ac){case 0:var pc=rdpBitmap.byte2int(qa.getData(),Wb,qa.getPosition());
ab=new Uint32Array(pc.length);rdpcodecs.flipimage(pc,0,ab,Da,pb,1);U.setRGBs(Ua,$a,Da,pb,ab,0,Da);break;case 1:bc(qa,Hc,Da,pb);var Ic=qc.getData(),Gb=qc.getDataSize();ab=new Uint32Array(Gb);rdpcodecs.flipimage(Ic,0,ab,Da,pb,1);U.setRGBs(Ua,$a,Da,pb,ab,0,Da);break;case 3:for(var Oa=ed.decode(qa,Wb),bb=Oa.getRects(),qb=Oa.getTiles(),zc=Oa.getTileSize(),Xb=Oa.getRectSize(),sa=Xb?new Hb(0,0,0,0):null,Ib=0;Ib<zc;Ib++){var cb=qb[Ib];if(Xb)for(var Ac=0;Ac<Xb;Ac++)bb[Ac].intersection(cb.x,cb.y,64,64,sa),
sa.isEmpty()||(Gc=64*(sa.y-cb.y)+(sa.x-cb.x),sa.x+=Ua,sa.y+=$a,U.setRGBs(sa.x,sa.y,sa.width,sa.height,cb.data,Gc,64));else U.setRGBs(cb.x,cb.y,64,64,cb.data,0,64)}}qa.setPosition(yc);break;case 4:var Tc=Ba,rc=Tc.getLittleEndian16(),Pa=Tc.getLittleEndian32();1==rc&&d("91"+Pa);break;default:svGlobal.logger.warn("Invalid surface cmd:"+Fc)}}break;case 5:break;case 6:break;case 8:break;case 9:W(Ba,24);break;case 10:U.setCursor(Ba.getLittleEndian16());break;case 11:var sc=Ba.getLittleEndian16();W(Ba,sc);
break;default:svGlobal.logger.warn("XXX RDP5 opcode "+La)}za&&za.end("decodeFastPath")}break;case 65:var Ja=xb,tc=Ja.getPosition(),Yb=Ja.getByte(),rb=Ja.getByte();seqNoLow=Ja.getByte();seqNoHigh=Ja.getByte();reqType=Ja.getLittleEndian16;out=null;payloadLen=0;payload=null;averageRTT=bandwidth=baseRTT=0;if(0!=rb)svGlobal.logger.warn("invalid msg channel data");else switch(reqType){case 1:case 4097:out=new Uint8Array(7);out[0]=65;out.set(Ja.getData().subarray(tc,tc+4),1);out[5]=0;out[6]=0;d(out.buffer);
break;case 20:case 276:case 4116:break;case 2:8==Yb?(payloadLen=Ja.getLittleEndian16(),payload=Ja.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 43:8==Yb?(payloadLen=Ja.getLittleEndian16(),payload=Ja.getByte(payloadLen)):svGlobal.logger.warn("Invalid payload");break;case 1065:case 1577:break;case 2112:baseRTT=Ja.getLittleEndian32();averageRTT=Ja.getLittleEndian32();break;case 2176:bandwidth=Ja.getLittleEndian32();averageRTT=Ja.getLittleEndian32();break;case 2240:baseRTT=Ja.getLittleEndian32();
bandwidth=Ja.getLittleEndian32();averageRTT=Ja.getLittleEndian32();break;default:svGlobal.logger.warn("Invalid msg channel type:"+reqType)}break;case 62:I(xb.getUnicodeString(xb.getEnd()-xb.getPosition(),!1));default:if(Y.onmessage)Y.onmessage(a)}}else{E=parseInt(t.substring(0,2),16);var Qa=t.substring(2);switch(E){case 0:var Ea=K.substring(K.indexOf("?")+1);d("00"+Ea);if(M&&Y.onopen)Y.onopen();break;case 15:if(Y){Uc=Lb=!1;ta=new T;if(Qa){var tb=JSON.parse(Qa);tb.capability&&Y&&(Y.sessionInfo.suppressOutput=
!!tb.capability.suppressOutput)}if(!xc&&Y&&Y.onready)Y.onready()}break;case 26:Lb=!0;break;case 56:Y.sessionInfo.appInfo=JSON.parse(Qa);break;case 62:I(Qa)}Y.onmessage(a)}}function I(a){var t=parseInt(a.substring(0,1),16);a=a.substring(1);switch(t){case 0:a=JSON.parse(a),D(),t=a.width,a=a.height,t==L&&a==R||q(t,a,!1,!1)}}function B(a){var t=a.getByte();if(0==t){svGlobal.logger.info("Send history...");var v=new Uint8Array(4);v[0]=29;v[2]=1;v[3]=1;Z.send(v.buffer);U.getHistory(d,function(){za&&za.begin("his_mppc");
Ca&&(v=Ca.toPDU())&&Z.send(v.buffer);za&&za.end("his_mppc");if(Na){za&&za.begin("his_mppc61");var E=Na.toPDU();E&&Z.send(E.buffer);za&&za.end("his_mppc61")}za&&za.begin("his_order");Z.send(ta.toPDU().buffer);za&&za.end("his_order");v=new Uint8Array(5);v[0]=29;v[2]=1;v[3]=0;v[4]=1;Z.send(v.buffer)})}else if(1==t)switch(t=a.getByte(),t){case 0:svGlobal.logger.warn("Received history");Y.sessionInfo.suppressOutput&&Ka.monitorDef&&524292==Y.sessionInfo.appInfo.protocolVersion?(Y.suppressOutput(!0),Y.suppressOutput(!1)):
Y.refreshOutput(0,0,L-1,R-1);if(Y.onHistoryReceived)Y.onHistoryReceived();break;case 1:break;case 2:za&&za.begin("his_mppc_dec");Ca||(Ca=new BulkData);Ca.fromStream(a);za&&za.end("his_mppc_dec");break;case 3:za&&za.begin("his_order_dec");ta.fromStream(a);za&&za.end("his_order_dec");break;case 9:Na||(Na=new Bulk61Data);za&&za.begin("his_mppc_dec61");Na.fromStream(a);za&&za.end("his_mppc_dec61");break;default:U.setHistory(t,a)}else if(2==t&&U.onHistoryDone)U.onHistoryDone();if(Y.onReqHistory)Y.onReqHistory()}
function b(a,t,v,E,G,J,O,N){this.x=a;this.y=t;this.width=v;this.height=E;this.andmask=G;this.xormask=J;this.bpp=O;this.cache_idx=N}function W(a,t){if(!ka){var v=a.getLittleEndian16();var E=a.getLittleEndian16();var G=a.getLittleEndian16();var J=a.getLittleEndian16();var O=a.getLittleEndian16();var N=a.getLittleEndian16();var ba=a.getLittleEndian16();var fa=a.getBytes(ba);a=a.getBytes(N);if(0>E||E>=J-1)E=0;0>G?G=0:G>=O&&(G=O-1);for(N=0;N<ba&&0==fa[N];N++);a=new b(E,G,J,O,a,fa,t,v);t=a.x;E=a.y;G=a.width;
J=a.height;O=a.andmask;ba=a.xormask;fa=a.bpp;a=a.cache_idx;N=new Uint32Array(G*J);var xa=N[0]=0,eb=32==fa,ya,ua;for(ya=0;ya<J;ya++)for(ua=0;ua<G;ua++){N[xa]=wa(ua,ya,G,J,fa,ba);if(!eb){var Q=ya;1!=fa&&(Q=J-Q-1);Q=8*Q*((G+7)/8|0)+ua;Q=0==(O[Q/8>>0]&128>>Q%8)?1:0;if(0==Q&&0!=N[xa])N[xa]=~N[xa],N[xa]|=4278190080;else if(1==Q||0!=N[xa])N[xa]|=4278190080}xa++}t=new pa(a,N,t,E,G,J,fa,ba.length,O.length);U.putCursor(a,t);U.setCursor(v)}}function wa(a,t,v,E,G,J){1!=G&&(t=E-t-1);t=(t*v+a)*G;v=t/8>>0;a=J[v]&
255;switch(G){case 1:return 0==(a&128>>t%8)?0:4294967295;case 8:return 0==a?0:4294967295;case 15:return a|=(J[v+1]&255)<<8,G=Array(4),od(a,15,G,0),G[0]<<16|G[1]<<8|G[2];case 16:return a|=(J[v+1]&255)<<8,G=Array(4),od(a,16,G,0),G[0]<<16|G[1]<<8|G[2];case 24:return(J[v+2]&255)<<16|(J[v+1]&255)<<8|a;case 32:return(J[v+3]&255)<<24|(J[v+2]&255)<<16|(J[v+1]&255)<<8|a}svGlobal.logger.warn("invalid bpp value for Xor Mask.");return 0}function pa(a,t,v,E,G,J,O,N,ba){function fa(){var ya=0;if(t)for(var ua=0,
Q=t.length;ua<Q;ua++)0!=t[ua]&&(ya+=ua%G+(ua/G|0));return ya}function xa(ya){switch(ya){case 0:return"none";case 507:return"text";case 2046:case 4359:return"default";default:return""}}this.cache_idx=a;this.rawData=t;this.none=!t;this.hotX=v;this.hotY=E;this.width=G;this.height=J;this.xorSize=N;this.andSize=ba;this.result="";this.distance=0;this.bpp=O;this.system="";t&&(this.distance||(this.distance=fa()),this.system||(this.system=xa(this.distance),"none"==this.system&&(t=null)));a="";if(!this.system&&
t){O=G*J*4;a=62+O+N+ba;var eb=new Uint8Array(a);a=new hi5.DataBuffer(eb,0,a);a.setLittleEndian16(0);a.setLittleEndian16(2);a.setLittleEndian16(1);a.setByte(G);a.setByte(J);a.setByte(0);a.setByte(0);a.setLittleEndian16(v);a.setLittleEndian16(E);a.setLittleEndian32(40+O+N+ba);a.setLittleEndian32(22);a.setLittleEndian32(40);a.setLittleEndian32(G);a.setLittleEndian32(2*J);a.setLittleEndian16(1);a.setLittleEndian16(32);a.setLittleEndian32(0);a.setLittleEndian32(N+ba);a.setLittleEndian32(0);a.setLittleEndian32(0);
a.setLittleEndian32(0);a.setLittleEndian32(0);for(v=J-1;0<=v;v--)for(E=0;E<G;E++)J=t[G*v+E],a.setByte(J&255),a.setByte(J>>8&255),a.setByte(J>>16&255),a.setByte(J>>24&255);a="data:image/x-icon;base64,"+hi5.Base64.enc(a.getData())}this.url=a}function Ha(a){var t=0;a.skipPosition(2);var v=a.getLittleEndian16();a.skipPosition(2);var E=Array(v);var G=Array(v);var J=Array(v);a=a.getBytes(3*v);for(var O=0;O<v;O++)E[O]=a[t],G[O]=a[t+1],J[O]=a[t+2],t+=3;256==v&&(ta.paletteRdp||(ta.paletteRdp=Array(3)),ta.paletteRdp[0]=
E,ta.paletteRdp[1]=G,ta.paletteRdp[2]=J)}function Aa(a,t){for(var v=0,E,G;v<t;){E=a.getByte();G=E&3;switch(G){case 1:var J=a,O=E;0!=(O&8)&&(ta.orderType=J.getByte());var N=void 0,ba=J,fa=fd[ta.orderType],xa=0;0!=(O&64)&&fa--;0!=(O&128)&&(fa=2>fa?0:fa-2);for(var eb=0;eb<fa;eb++)N=ba.getByte(),xa|=N<<8*eb;var ya=xa;if(0!=(O&4)){if(0==(O&32)){var ua=J,Q=ta.bounds,yb=ua.getByte();0!=(yb&1)?Q.left=F(ua,Q.left,!1):0!=(yb&16)&&(Q.left=F(ua,Q.left,!0));0!=(yb&2)?Q.top=F(ua,Q.top,!1):0!=(yb&32)&&(Q.top=F(ua,
Q.top,!0));0!=(yb&4)?Q.right=F(ua,Q.right,!1):0!=(yb&64)&&(Q.right=F(ua,Q.right,!0));0!=(yb&8)?Q.bottom=F(ua,Q.bottom,!1):0!=(yb&128)&&(Q.bottom=F(ua,Q.bottom,!0))}var ic=ta.bounds;oa=ic.left;0>oa&&(oa=0);P=ic.top;0>P&&(P=0);ea=ic.right;ea>=L&&(ea=L-1);na=ic.bottom;na>=R&&(na=R-1)}var Ab=0!=(O&16);switch(ta.orderType){case 0:var Mb=J,Ia=ta.destBlt,Ub=ya,jc=Ab;0!=(Ub&1)&&(Ia.x=F(Mb,Ia.x,jc));0!=(Ub&2)&&(Ia.y=F(Mb,Ia.y,jc));0!=(Ub&4)&&(Ia.cx=F(Mb,Ia.cx,jc));0!=(Ub&8)&&(Ia.cy=F(Mb,Ia.cy,jc));0!=(Ub&
16)&&(Ia.opcode=Mb.getByte()&15);var Vb=Ia.x,Bb=Ia.y,Cb=Ia.cx,kc=Ia.cy,dd=Ia.opcode;if(!(Vb>L||Bb>R)){Vb<oa&&(Cb-=oa-Vb,Vb=oa);var Nc=Vb+Cb-1;Nc>ea&&(Cb-=Nc-ea);Bb<P&&(kc-=P-Bb,Bb=P);var wc=Bb+kc-1;wc>na&&(kc-=wc-na);1>Cb||1>kc||U.bitBlt(dd,L,Vb,Bb,Cb,kc,null,0,0,0)}break;case 1:var Zb=void 0,Xa=J,ma=ta.patBlt,mb=ya,lc=Ab;0!=(mb&1)&&(ma.x=F(Xa,ma.x,lc));0!=(mb&2)&&(ma.y=F(Xa,ma.y,lc));0!=(mb&4)&&(ma.cx=F(Xa,ma.cx,lc));0!=(mb&8)&&(ma.cy=F(Xa,ma.cy,lc));0!=(mb&16)&&(ma.opcode=Xa.getByte(),ma.opcode=
ma.opcode&3|(ma.opcode&48)>>2);0!=(mb&32)&&(ma.backgroundColor=ub(Xa));0!=(mb&64)&&(ma.foregroundColor=ub(Xa));var ec=ma.brush,Db=mb>>7;0!=(Db&1)&&(ec.xOrigin=Xa.getByte());0!=(Db&2)&&(ec.yOrigin=Xa.getByte());0!=(Db&4)&&(ec.style=Xa.getByte());var Eb=ec.pattern;0!=(Db&8)&&(Eb[0]=Xa.getByte());if(0!=(Db&16))for(var Nb=1;8>Nb;Nb++)Eb[Nb]=Xa.getByte();ec.pattern=Eb;var ha=ma.x,Pc=ma.y;if(!(ha>ea||Pc>na)){var Qc=ma.opcode,da=ha,ca=Pc,Ya=ma.cx,Ob=ma.cy,$b=ma.foregroundColor,ia=ma.backgroundColor,mc=ma.brush.xOrigin,
ib=ma.brush.yOrigin,S=ma.brush.style,la=ma.brush.pattern;$b=Sa($b);ia=Sa(ia);if(!(da>L||ca>R)){da<oa&&(Ya-=oa-da,da=oa);var jb=da+Ya-1;jb>ea&&(Ya-=jb-ea);ca<P&&(Ob-=P-ca,ca=P);var fc=ca+Ob-1;fc>na&&(Ob-=fc-na);if(!(1>Ya||1>Ob))switch(S){case 0:Zb=new Uint32Array(Ya*Ob);for(var La=0;La<Zb.length;La++)Zb[La]=$b;U.bitBlt(Qc,L,da,ca,Ya,Ob,Zb,Ya,0,0);break;case 2:svGlobal.logger.warn("hatch");break;case 3:Zb=new Uint32Array(Ya*Ob);var ra=0;for(La=0;La<Ob;La++)for(var nb=0;nb<Ya;nb++)Zb[ra]=0==(la[(La+
ib)%8]&1<<(nb+mc)%8)?$b:ia,ra++;U.bitBlt(Qc,L,da,ca,Ya,Ob,Zb,Ya,0,0);break;default:svGlobal.logger.warn("Unsupported brush style "+S)}}}break;case 2:var ob=void 0,Za=J,Fa=ta.screenBlt,Fb=ya,kb=Ab;0!=(Fb&1)&&(Fa.x=F(Za,Fa.x,kb));0!=(Fb&2)&&(Fa.y=F(Za,Fa.y,kb));0!=(Fb&4)&&(Fa.cx=F(Za,Fa.cx,kb));0!=(Fb&8)&&(Fa.cy=F(Za,Fa.cy,kb));0!=(Fb&16)&&(Fa.opcode=Za.getByte()&15);0!=(Fb&32)&&(Fa.srcX=F(Za,Fa.srcX,kb));0!=(Fb&64)&&(Fa.srcY=F(Za,Fa.srcY,kb));var Pb=Fa.x,Ma=Fa.y;if(!(Pb>ea||Ma>na)){var Ba=Fa.cx,nc=
Fa.cy,Sc=Fa.opcode,gc=Fa.srcX,oc=Fa.srcY;Pb<oa&&(ob=oa-Pb,Pb=oa,gc+=ob,Ba-=ob);var Fc=Pb+Ba-1;Fc>ea&&(ob=Fc-ea,Ba-=ob);Ma<P&&(ob=P-Ma,Ma=P,oc+=ob,nc-=ob);var Gc=Ma+nc-1;Gc>na&&(ob=Gc-na,nc-=ob);1>Ba||1>nc||(12==Sc?U.moveArea(gc,oc,Ba,nc,Pb-gc,Ma-oc):U.bitBlt(Sc,Ba,Pb,Ma,Ba,nc,null,Ba,gc,oc))}break;case 9:var ab=J,qa=ta.line,Ua=ya,$a=Ab;0!=(Ua&1)&&(qa.mixmode=ab.getLittleEndian16());0!=(Ua&2)&&(qa.startX=F(ab,qa.startX,$a));0!=(Ua&4)&&(qa.startY=F(ab,qa.startY,$a));0!=(Ua&8)&&(qa.endX=F(ab,qa.endX,
$a));0!=(Ua&16)&&(qa.endY=F(ab,qa.endY,$a));0!=(Ua&32)&&(qa.backgroundColor=ub(ab));0!=(Ua&64)&&(qa.opcode=ab.getByte());var Hc=qa.pen,ac=Ua>>7;0!=(ac&1)&&(Hc.style=ab.getByte());0!=(ac&2)&&(Hc.width=ab.getByte());0!=(ac&4)&&(Hc.color=ub(ab));var Da=qa.startX,pb=qa.startY,Wb=qa.endX,yc=qa.endY,pc=qa.pen.color,Ic=qa.opcode-1;if(pb==yc){if(Da>Wb){var Gb=Da;Da=Wb;Wb=Gb}Da<oa&&(Da=oa);Wb>ea&&(Wb=ea)}else Da==Wb&&(pb>yc&&(Gb=pb,pb=yc,yc=Gb),pb<P&&(pb=P),pb>na&&(pb=na));Qb(Da,pb,Wb,yc,pc,Ic);break;case 10:var Oa=
J,bb=ta.rectangle,qb=ya,zc=Ab;0!=(qb&1)&&(bb.x=F(Oa,bb.x,zc));0!=(qb&2)&&(bb.y=F(Oa,bb.y,zc));0!=(qb&4)&&(bb.cx=F(Oa,bb.cx,zc));0!=(qb&8)&&(bb.cy=F(Oa,bb.cy,zc));0!=(qb&16)&&(Sb=Sb&4294967040|Oa.getByte());0!=(qb&32)&&(Sb=Sb&4294902015|Oa.getByte()<<8);0!=(qb&64)&&(Sb=Sb&4278255615|Oa.getByte()<<16);bb.color=Sb;var Xb=bb.x,sa=bb.y,Ib=bb.cx,cb=bb.cy;if(!(Xb>ea||sa>na)){Xb<oa&&(Ib-=oa-Xb,Xb=oa);var Ac=Xb+Ib-1;Ac>ea&&(Ib-=Ac-ea);sa<P&&(cb-=P-sa,sa=P);var Tc=sa+cb-1;Tc>na&&(cb-=Tc-na);1>Ib||1>cb||U.fillRect(Xb,
sa,Ib,cb,Sa(bb.color))}break;case 11:var rc=J,Pa=ta.deskSave,sc=ya,Ja=Ab;0!=(sc&1)&&(Pa.offset=rc.getLittleEndian32());0!=(sc&2)&&(Pa.left=F(rc,Pa.left,Ja));0!=(sc&4)&&(Pa.top=F(rc,Pa.top,Ja));0!=(sc&8)&&(Pa.right=F(rc,Pa.right,Ja));0!=(sc&16)&&(Pa.bottom=F(rc,Pa.bottom,Ja));0!=(sc&32)&&(Pa.action=rc.getByte());var tc=Pa.right-Pa.left+1,Yb=Pa.bottom-Pa.top+1;0==Pa.action?1>tc||1>Yb||U.saveDesktop(Pa.left,Pa.top,tc,Yb,Pa.offset):U.restoreDesktop(Pa.left,Pa.top,tc,Yb,Pa.offset);break;case 13:var rb=
void 0,Qa=J,Ea=ta.memBlt,tb=ya,uc=Ab;0!=(tb&1)&&(Ea.cacheID=Qa.getByte(),Ea.colorTable=Qa.getByte());0!=(tb&2)&&(Ea.x=F(Qa,Ea.x,uc));0!=(tb&4)&&(Ea.y=F(Qa,Ea.y,uc));0!=(tb&8)&&(Ea.cx=F(Qa,Ea.cx,uc));0!=(tb&16)&&(Ea.cy=F(Qa,Ea.cy,uc));0!=(tb&32)&&(Ea.opcode=Qa.getByte()&15);0!=(tb&64)&&(Ea.srcX=F(Qa,Ea.srcX,uc));0!=(tb&128)&&(Ea.srcY=F(Qa,Ea.srcY,uc));0!=(tb&256)&&(Ea.cacheIDX=Qa.getLittleEndian16());var Jb=Ea.x,Jc=Ea.y;if(!(Jb>ea||Jc>na)){var Vc=Ea.cx,Wc=Ea.cy,Kc=Ea.srcX,gd=Ea.srcY;Jb<oa&&(rb=oa-
Jb,Jb=oa,Kc+=rb,Vc-=rb);var lb=Jb+Vc-1;lb>ea&&(rb=lb-ea,Vc-=rb);Jc<P&&(rb=P-Jc,Jc=P,gd+=rb,Wc-=rb);var Xc=Jc+Wc-1;Xc>na&&(rb=Xc-na,Wc-=rb);1>Vc||1>Wc||U.drawBitmap(Ea.cacheID,Ea.cacheIDX,Jb,Jc,Vc,Wc,Kc,gd,Ea.opcode)}break;case 22:var Va=J,fb=ta.polyLine,Kb=ya,Yc=Ab;0!=(Kb&1)&&(fb.x=F(Va,fb.x,Yc));0!=(Kb&2)&&(fb.y=F(Va,fb.y,Yc));0!=(Kb&4)&&(fb.opcode=Va.getByte());0!=(Kb&16)&&(fb.foregroundColor=ub(Va));0!=(Kb&32)&&(fb.lines=Va.getByte());if(0!=(Kb&64)){var c=Va.getByte();fb.dataSize=c;fb.data=Va.getBytes(c)}var Bc=
fb.x,Zc=fb.y,he=fb.foregroundColor,Jd=fb.lines,ie=fb.dataSize,yd=fb.data,pd=Array(1);pd[0]=Math.floor((Jd-1)/4)+1;for(var $c=0,je=0,ke=fb.opcode-1,zd=0;zd<Jd&&pd[0]<ie;zd++){var le=Bc,me=Zc;0==zd%4&&($c=yd[je++]);0==($c&192)&&($c|=192);0!=($c&64)&&(Bc+=ad(yd,pd));0!=($c&128)&&(Zc+=ad(yd,pd));Qb(le,me,Bc,Zc,he,ke);$c<<=2}break;case 27:var Ta=J,gb=ta.text2,Wa=ya;0!=(Wa&1)&&(gb.font=Ta.getByte());0!=(Wa&2)&&(gb.flags=Ta.getByte());0!=(Wa&4)&&(gb.opcode=Ta.getByte());0!=(Wa&8)&&(gb.mixmode=Ta.getByte());
0!=(Wa&16)&&(gb.foregroundColor=ub(Ta));0!=(Wa&32)&&(gb.backgroundColor=ub(Ta));0!=(Wa&64)&&(gb.clipLeft=Ta.getLittleEndian16());0!=(Wa&128)&&(gb.clipTop=Ta.getLittleEndian16());0!=(Wa&256)&&(gb.clipRight=Ta.getLittleEndian16());0!=(Wa&512)&&(gb.clipBottom=Ta.getLittleEndian16());0!=(Wa&1024)&&(gb.boxLeft=Ta.getLittleEndian16());0!=(Wa&2048)&&(gb.boxTop=Ta.getLittleEndian16());0!=(Wa&4096)&&(gb.boxRight=Ta.getLittleEndian16());0!=(Wa&8192)&&(gb.boxBottom=Ta.getLittleEndian16());0!=(Wa&16384)&&Ta.skipPosition(1);
0!=(Wa&32768)&&Ta.skipPosition(1);0!=(Wa&65536)&&Ta.skipPosition(1);0!=(Wa&131072)&&Ta.skipPosition(1);0!=(Wa&262144)&&Ta.skipPosition(7);0!=(Wa&524288)&&(gb.x=Ta.getLittleEndian16());0!=(Wa&1048576)&&(gb.y=Ta.getLittleEndian16());if(0!=(Wa&2097152)){var Kd=Ta.getByte();gb.length=Kd;gb.text=Ta.getBytes(Kd)}var sb=gb,ne=sb.font,oe=sb.flags,pe=sb.mixmode,qe=Sa(sb.foregroundColor),re=Sa(sb.backgroundColor),Ld=sb.clipLeft,Md=sb.clipTop,se=sb.clipRight,te=sb.clipBottom,qd=sb.boxLeft,Nd=sb.boxTop,ue=sb.boxBottom,
ve=sb.x,we=sb.y,xe=sb.length,ye=sb.text,Ad=sb.boxRight-qd;qd+Ad>L&&(Ad=L-qd);U.drawText(ne,oe,pe,qe,re,Ld,Md,se-Ld,te-Md,qd,Nd,Ad,ue-Nd,ve,we,xe,ye,oa,P,ea,na);break;default:svGlobal.logger.warn("XXX Order type "+ta.orderType)}0!=(O&4)&&hb();break;case 2:var Od=a,Pd=E>>2;switch(Pd){case 11:var rd=Od,Qd=rd.getLittleEndian16()-3,ze=rd.getPosition()+Qd;Y.onAltSecWindows(rd,Qd);rd.setPosition(ze);break;case 13:Od.getLittleEndian32();break;default:svGlobal.logger.warn("Alt Sec order:"+Pd)}break;case 3:var cc=
a;var Rd=cc.getLittleEndian16();var sd=cc.getLittleEndian16();var Sd=cc.getByte();var Ae=cc.getPosition()+Rd+7;if(cc.has(Rd+7)){switch(Sd){case 0:var Td=void 0,vc=cc,Be=vc.getByte();vc.skipPosition(1);var Bd=vc.getByte(),td=vc.getByte(),ud=vc.getByte(),vd=Math.floor((ud+7)/8),Ce=vc.getLittleEndian16(),De=vc.getLittleEndian16(),Ee=vc.getPosition();vc.skipPosition(Ce);X!=ud&&(svGlobal.logger.warn("Server limited colour depth to "+ud+" bits"),z(ud,!0));var Cd=Array(Bd*td*vd);Cd[0]=0;for(var Dd=Bd*vd,
wd=0;wd<td;wd++)Td=Ee+(td-wd-1)*Dd,vc.copyToByteArray(Cd,wd*Dd,Td,Dd);var Fe=bd(Cd,vd);U.putBitmap(Be,De,new rdpcodecs.Bitmap(Fe,Bd,td,0,0,8*vd,null,0));break;case 1:svGlobal.logger.info("TODO: color cache");break;case 2:var Ud=void 0,hd=void 0,vb=cc,Ge=sd,He=vb.getByte();vb.getByte();var Ed=vb.getByte(),Fd=vb.getByte(),id=vb.getByte(),Ie=Math.floor((id+7)/8),Je=vb.getLittleEndian16(),Ke=vb.getLittleEndian16();X!=id&&(svGlobal.logger.warn("Server limited colour depth to "+id+" bits"),z(id,!0));0!=
(Ge&1024)?hd=Je:(vb.skipPosition(2),hd=vb.getLittleEndian16(),vb.skipPosition(2),vb.skipPosition(2));Ud=1!=Ie?dc(Ed,Fd,hd,vb.getData(),vb.getPosition()):Cc(Ed,Fd,hd,vb.getData(),vb.getPosition());var Le=vb.getBytes(hd);U.putBitmap(He,Ke,new rdpcodecs.Bitmap(Ud,Ed,Fd,0,0,id,Le,1));break;case 3:var Vd=void 0,Gd=void 0,Hd=void 0,Wd=void 0,Xd=void 0,Yd=void 0,Zd=void 0,$d=void 0,ae=void 0,Lc=cc;$d=Lc.getByte();Zd=Lc.getByte();for(var be=0;be<Zd;be++)Yd=Lc.getLittleEndian16(),Xd=Lc.getLittleEndian16(),
Wd=Lc.getLittleEndian16(),Hd=Lc.getLittleEndian16(),Gd=Lc.getLittleEndian16(),Vd=Gd*Math.floor((Hd+7)/8)+3&-4,ae=new g(Xd,Wd,Hd,Gd,Lc.getBytes(Vd)),U.putFont($d,Yd,ae);break;case 4:Ga(cc,sd,!1);break;case 5:Ga(cc,sd,!0);break;case 7:svGlobal.logger.info("CacheBrush...=");break;case 8:var cd=void 0,wb=cc,ce=sd&7,de=wb.getLittleEndian16();wb.skipPosition(8);var xd=wb.getByte();X!=xd&&(svGlobal.logger.warn("Server limited colour depth to "+xd+" bits"),z(xd,!0));wb.skipPosition(2);var Id=wb.getByte(),
jd=wb.getLittleEndian16(),kd=wb.getLittleEndian16(),ee=wb.getLittleEndian32(),fe=wb.getPosition();if(1==Id){bc(wb,xd,jd,kd);var Me=qc.getData(),Ne=qc.getDataSize();cd=new Uint32Array(Ne);rdpcodecs.flipimage(Me,0,cd,jd,kd,1);var Oe=wb.getPosition()-fe;wb.setPosition(fe);var Pe=wb.getBytes(Oe);U.putBitmap(ce,de,new rdpcodecs.Bitmap(cd,jd,kd,0,0,32,Pe,2))}else if(0==Id){var ge=rdpBitmap.byte2int(wb.getData(),ee,wb.getPosition());cd=new Uint32Array(ge.length);rdpcodecs.flipimage(ge,0,cd,jd,kd,1);U.putBitmap(ce,
de,new rdpcodecs.Bitmap(cd,jd,kd,0,0,32,null,0))}else svGlobal.logger.warn("XXX invalid codec id:"+Id);wb.skipPosition(ee);break;default:svGlobal.logger.warn("invalid second Order, type="+Sd)}cc.setPosition(Ae)}}v++}}function Ga(a,t,v){var E;var G=t&7;var J=((t&120)>>3)-2;t=(t&65408)>>7;db!=J&&(z(8*J,!0),svGlobal.logger.warn("Server limited colour depth to "+J+" bytes"));0!=(t&2)&&a.skipPosition(8);if(0!=(t&1))var O=E=Dc.readVar2Bytes(a);else E=Dc.readVar2Bytes(a),O=Dc.readVar2Bytes(a);var N=Dc.readVar4Bytes(a);
var ba=Dc.readVar2Bytes(a);v&&0==(t&8)&&a.skipPosition(8);if(v){v=1!=J?dc(E,O,N,a.getData(),a.getPosition()):Cc(E,O,N,a.getData(),a.getPosition());a=a.getBytes(N);if(!v){svGlobal.logger.warn("Failed to decompress bitmap data");return}E=new rdpcodecs.Bitmap(v,E,O,0,0,8*J,a,1)}else{v=Array(E*O*J);v[0]=0;var fa=a.getPosition(),xa=E*J;for(N=0;N<O;N++){var eb=fa+(O-N-1)*xa;a.copyToByteArray(v,N*xa,eb,xa)}a=bd(v,J);E=new rdpcodecs.Bitmap(a,E,O,0,0,8*J,null,0)}U.putBitmap(G,ba,E);0!=(t&2)&&svGlobal.logger.warn("XXX:TODO, persistent")}
function F(a,t,v){return v?(a=a.getByte()<<24>>24,t+a):t=a.getLittleEndian16()<<16>>16}function ub(a){var t;var v=t=a.getByte();t=a.getByte();v|=t<<8;t=a.getByte();return v|t<<16}function zb(a){for(var t,v,E,G,J,O,N,ba,fa,xa=a.getLittleEndian16(),eb=0;eb<xa;eb++)if(t=a.getLittleEndian16(),v=a.getLittleEndian16(),E=a.getLittleEndian16(),G=a.getLittleEndian16(),J=a.getLittleEndian16(),O=a.getLittleEndian16(),N=a.getLittleEndian16(),ba=a.getLittleEndian16(),fa=a.getLittleEndian16(),E=E-t+1,G=G-v+1,X!=
N&&(svGlobal.logger.warn("Server limited colour depth to "+N+" bits"),z(N,!0)),0==ba){ba=J*db;fa=O*ba;N=new Uint8Array(fa);for(var ya=a.getPosition(),ua=0;ua<O;ua++)ld(a.getData(),ya,N,(O-ua-1)*ba,ba),ya+=ba;a.skipPosition(fa);N=bd(N,db);U.setRGBs(t,v,E,G,N,0,J)}else 0!=(ba&1024)?N=fa:(a.skipPosition(2),N=a.getLittleEndian16(),a.skipPosition(4)),ba=a.getData(),fa=N,ya=a.getPosition(),ua=v,v=G,G=db,1>E*v*J*O||(1!=G?U.setRGBs(t,ua,E,v,dc(J,O,fa,ba,ya),0,J):(O=Cc(J,O,fa,ba,ya),ba=ua,G=bd(O,G),U.setRGBs(t,
ba,E,v,G,0,J))),a.skipPosition(N)}function hb(){oa=0;ea=L-1;P=0;na=R-1}function Qb(a,t,v,E,G,J){var O=Math.min(a,v),N=Math.max(a,v),ba=Math.min(t,E),fa=Math.max(t,E);G=Sa(G);if(!(O>=oa&&N<=ea&&ba>=P&&fa<=na)){if(O>ea||N<oa||ba>na||fa<P)return;if(a==v)t>E&&(O=t,t=E,E=O),t<P&&(t=P),E>na&&(E=na);else if(t==E)a>v&&(O=a,a=v,v=O),a<oa&&(a=oa),v>ea&&(v=ea);else{O=ta._line;O.set(a,t,v,E);N=O.intersection(oa,P,ea,P);ba=[];N&&ba.push(N.x,N.y);(N=O.intersection(ea,P,ea,na))&&ba.push(N.x,N.y);(N=O.intersection(oa,
na,ea,na))&&ba.push(N.x,N.y);(N=O.intersection(oa,P,oa,na))&&ba.push(N.x,N.y);2==ba.length&&(a>=oa&&a<=ea&&t>=P&&t<=na?ba.push(a,t):v>=oa&&v<=ea&&E>=P&&E<=na&&ba.push(v,E));if(4!=ba.length)return;a=ba[0];t=ba[1];v=ba[2];E=ba[3]}}12==J?U.drawLine(a,t,v,E,G):U.drawLineExt(a,t,v,E,G,J)}function ad(a,t){var v=a[t[0]++]&255,E=v&128;v=0!=(v&64)?v|-64:v&63;0!=E&&(v=v<<8|a[t[0]++]&255);return v}function V(a){if(Y)if(svGlobal.logger.warn("closed "+(Y.sessionInfo.appInfo?Y.sessionInfo.appInfo.numericId:0)),
Y&&(Rb=!1),Uc)svGlobal.logger.info("Req credential");else{qc=bc=ed=K=ta=null;try{if(null!=Tb&&(Tb.exit(),Tb=null),Y.onclose)Y.onclose(Lb);else svGlobal.logger.info("onclose: null")}catch(t){}xb=null;Z&&(Z.onopen=null,Z.onmessage=null,Z.onclose=null,Z=Z.onerror=null);Rc=null;Ca&&(Ca.release(),Ca=null);Na&&(Na.release(),Na=null);Y=null}}function od(a,t,v,E){switch(t){case 16:t=a>>8&248;var G=a>>3&252;a=a<<3&255;v[E]=t|t>>5;v[E+1]=G|G>>6;v[E+2]=a|a>>5;v[E+3]=255;break;case 15:t=a>>7&248;G=a>>2&248;a=
a<<3&255;v[E]=t|t>>5;v[E+1]=G|G>>5;v[E+2]=a|a>>5;v[E+3]=255;break;case 8:v[E]=ta.paletteRdp[0][a];v[E+1]=ta.paletteRdp[1][a];v[E+2]=ta.paletteRdp[2][a];v[E+3]=255;break;case 32:v[E]=a&255,v[E+1]=a>>8&255,v[E+2]=a>>16&255,v[E+3]=a>>24&255;default:v[E]=a&255,v[E+1]=a>>8&255,v[E+2]=a>>16&255,v[E+3]=255}}function bd(a,t){var v=a.length/t>>0,E=new Uint32Array(v),G=Sa;switch(t){case 1:for(var J=0;J<v;J++)E[J]=G(a[J]);break;case 2:for(J=0;J<v;J++)E[J]=G(a[2*J+1]<<8|a[2*J]);break;default:for(J=0;J<v;J++)E[J]=
G(a[J*t+2]<<16)|a[J*t+1]<<8|a[J*t]}return E}this.sessionInfo={domain:"",userName:"",sessionId:0,joinedSessions:[],suppressOutput:!1,appInfo:null};this.mode=0;this.remoteAppLogin=!0;var Y=this,Lb=!1,Uc=!1,hc="object"==typeof K?K:null,Ka=hc?{}:hi5.string.queryToObj(K.substring(K.indexOf("?")+1)),ld=hi5.Arrays.arraycopy,za=null,Ca=null,Na=null;this.protocol=hc?"":K.substring(0,K.indexOf("://")).toLowerCase();this.setProfiler=function(a){za=a};this.getProfiler=function(){return za};this.gateway=function(){if(hc)return"";
var a=K.lastIndexOf("/RDP?");-1==a&&(a=K.lastIndexOf("/JOIN?"));-1==a&&(a=K.lastIndexOf("/PLAY?"));return K.substring(0,a).replace(/wss:\/\//ig,"https://").replace(/ws:\/\//ig,"http://")}();this.getGatewayAddr=function(){var a=Y.gateway;Y.ongetgatewayaddress&&(a=Y.ongetgatewayaddress(a));return a};var xc="object"==typeof K||0<K.indexOf("/PLAY?"),md=!xc&&0<K.indexOf("invitation=");if(xc)this.mode=1,hc?K="":(L=640,R=480);else if(0<K.indexOf("/JOIN?")||md)this.mode=2;Ka.symlink&&Ka.parameters&&hi5.string.queryToObj(Ka.parameters,
Ka);Ka.gateway||(K+="&gateway="+encodeURIComponent(Y.gateway));"useSSL"in Ka||(K+="&useSSL="+("wss"==Y.protocol));this.getDisplayName=Ra;this.server=Ra();this.port=parseInt(Ka.port,10);this.getURL=function(){return K};this.getColor=function(){return X};var Hb=hi5.graphic.Rectangle,ka=0<K.indexOf("nocurosr=on"),Oc=0<K.indexOf("startProgram=app");K.indexOf("mapDisk=on");this.isRemoteApp=function(){return Oc};var Z=null,Rb=!1,Mc=!1,oa=0,P=0,ea=L-1,na=R-1,db=0,Tb=null,Sa=ja,dc=rdpBitmap.decompressInt16,
Cc=rdpBitmap.decompress;z(X,!0);this.setColor=function(a){z(a,!1)};this.setResolution=function(a,t){q(a,t,!1)};var Ec={tag:0,channels:0,bitsPerSample:0,samplePerSec:22050,toStream:function(a){a.setLittleEndian16(this.tag);a.setLittleEndian16(this.channels);a.setLittleEndian16(this.bitsPerSample);a.setLittleEndian32(this.samplePerSec)},fromStream:function(a){this.tag=a.getLittleEndian16();this.channels=a.getLittleEndian16();this.bitsPerSample=a.getLittleEndian16();this.samplePerSec=a.getLittleEndian32()}};
this.setAudioFormat=function(a){Ec.tag=a.tag;Ec.channels=a.channels;Ec.samplePerSec=a.samplePerSec;Ec.bitsPerSample=a.bitsPerSample};this.running=function(){return Rb};this.setJoinMode=function(a){d("8E1"+a)};this.setJoinCloseMode=function(a){d("8EB3\t"+a)};this.refuseControl=function(a){d("8E3"+a)};this.giveControl=function(a){d("8E4"+a)};this.pauseSession=function(a,t){d("8EB"+(t?1:0)+"\t"+a)};this.closeSession=function(a){d("8EB2\t"+a)};this.requestControl=function(){d("8E2")};this.saveSession=
function(a){d("8E9"+(a.save?1:0)+"\t"+(a.timeout||0)+"\t"+(a.id||0))};this.allowJoin=function(a,t){d("8EA"+a+"\t"+(t?1:0))};var nd=new function(){function a(){if(v&&0<v.length){var G=v.shift();nd.sendSingleKey(G.down,G.key);0<v.length?setTimeout(a,E):v=null}}var t={" ":57,space:57,pgup:201,pageup:201,pgdn:209,pagedown:209,end:207,home:199,left:203,up:200,right:205,down:208,printscreen:183,insert:210,del:211,"delete":211,altgr:184,windows:219,windowsright:220,context:221,esc:1,backspace:14,tab:15,
enter:28,meta:29,command:29,ctrl:29,shift:42,alt:56,capslock:58,f1:59,f2:60,f3:61,f4:62,f5:63,f6:64,f7:65,f8:66,f9:67,f10:68,f11:87,f12:88,numlock:69,scrolllock:70,add:78};this.sendSingleKey=function(G,J){var O=t[J.toLowerCase()];O?Y.writeScancode(G,O):(O=J.length,0!=O&&(1==O?Y.writeKeyCode(G,J.toUpperCase().charCodeAt(0)):G&&Y.writeText(J)))};var v=null,E=0;this.sendKeyComb=function(G,J){G=G.split("+");var O=G.length,N;if(0!=O){var ba=null,fa=[];for(N=0;N<O;N++){var xa=G[N];""==xa&&""==ba&&(xa="Add");
""!=xa&&fa.push({key:xa,down:!0});ba=xa}O=fa.length;for(N=O-1;0<=N;N--)fa.push({key:fa[N].key,down:!1});if(J)v=fa,E=J,a();else for(N=0,O=fa.length;N<O;N++)nd.sendSingleKey(fa[N].down,fa[N].key)}}};this.writeRawInput=function(a){d(a);if(Y.onactivity)Y.onactivity(a);if(Tb&&a.substring){var t=a.substring(0,2);a=a.substring(2);if("80"==t||"81"==t||"82"==t||"83"==t){a=a.split("\t");var v=new Uint8Array(7),E=0;var G=parseInt(a[0]);var J=parseInt(a[1]);switch(parseInt(t,16)){case 128:E=("0"==a[2]?4096:8192)|
32768;break;case 129:E="0"==a[2]?4096:8192;break;case 130:E=2048;break;case 131:E="0"==a[2]?33408:33664}v[0]=32;v[1]=E&255;v[2]=E>>8;v[3]=G&255;v[4]=G>>8;v[5]=J&255;v[6]=J>>8;Tb.add(new RecordingObj(v,0,7,60))}}};var ta=new T,Sb=0;this.resetStatus=D;this.notify=function(a,t){a="8E6"+a;t&&(a+="\t"+t.join(";"));d(a)};this.run=function(){u()};this.getDesktop=function(){return U};var xb=new hi5.DataBuffer([],0,0);this.suppressOutput=function(a){if(!Y.sessionInfo.suppressOutput)return!1;void 0==a&&(a=
!0);var t=new Uint8Array(a?3:11);t[0]=146;t[1]=3;t[2]=a?1:0;a||(t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=L-1,t[8]=L-1>>8,t[9]=R-1,t[10]=R-1>>8);Z.send(t.buffer);return!0};this.refreshOutput=function(a,t,v,E){var G=new Uint8Array(v?11:3);G[0]=146;G[1]=3;G[2]=2;v&&(G[3]=a,G[4]=a>>8,G[5]=t,G[6]=t>>8,G[7]=v,G[8]=v>>8,G[9]=E,G[10]=E>>8);Z.send(G.buffer)};var Rc=new function(){var a=0,t=0,v=[0],E=new hi5.DataBuffer(v,0,0);this.addFragement=function(G,J){ld(G.getData(),G.getPosition(),v,t,J);t+=J;a+=J};this.clearFragements=
function(){E.setPosition(0);E.markEnd(a);t=a=0;return E}},ed=new rdpcodecs.RemoteFX(va),qc=new rdpcodecs.NSCodec,bc=qc.process,fd=[1,2,1,0,0,0,0,1,1,2,1,1,0,2,3,1,2,2,2,2,1,2,1,0,2,1,2,3],Dc={readVar4Bytes:function(a){var t=a.getByte(),v=0;switch((t&192)>>6){case 0:v=t&63;break;case 1:v=(t&63)<<8|a.getByte();break;case 2:v=(t&63)<<16;t=a.getByte();v|=t<<8;t=a.getByte();v|=t;break;case 3:v=(t&63)<<24,t=a.getByte(),v|=t<<16,t=a.getByte(),v|=t<<8,t=a.getByte(),v|=t}return v},readVar2Bytes:function(a){var t=
a.getByte();return 0!=(t&128)?(t&127)<<8|a.getByte():t}};this._unload=V;this.close=function(){Lb=!0;svGlobal.logger.info("closing...");if(Z&&Z.readyState!=WebSocket.CLOSING&&Z.readyState!=WebSocket.CLOSED)try{for(;Z&&Z.readyState!=WebSocket.CLOSING&&Z.readyState!=WebSocket.CLOSED;)xc||Z.readyState!=WebSocket.OPEN||d("85-1"),Z.close()}finally{V()}else V()}}
function BulkData(){function K(e){e=(e&1431655765)<<1|e>>>1&1431655765;e=(e&858993459)<<2|e>>>2&858993459;e=(e&252645135)<<4|e>>>4&252645135;if(0==e>>>8)return e;e=(e&16711935)<<8|e>>>8&16711935;return 0==e>>>16?e:(e&65535)<<16|e>>>16&65535}function L(e,m,y,f){var k=0,A=0,n,w,T=0!=(f&1),D=X;if(0==(f&32))return va=0,M=y,0;0!=(f&64)&&(R=0);if(0!=(f&128)){for(f=65536;0<=--f;)D[f]=0;R=0}M=va=0;va=w=n=f=R;if(0==y)return 0;y+=A;do{if(0==k){if(A>=y)break;f=e[m+A++]<<24;k=8}if(0<=f){if(8>k){if(A>=y){if(0!=
f)return-1;break}f|=e[m+A++]<<24-k;k+=8}if(65536<=n)return-1;D[n++]=f>>>24&255;f<<=8;k-=8}else{f<<=1;if(0==--k){if(A>=y)return-1;f=e[m+A++]<<24;k=8}if(0<=f){if(8>k){if(A>=y)return-1;f|=e[m+A++]<<24-k;k+=8}if(65536<=n)return-1;D[n++]=(f>>>24|128)&255;f<<=8;k-=8}else{f<<=1;if(--k<(T?3:2)){if(A>=y)return-1;f|=e[m+A++]<<24-k;k+=8}if(T)switch(f>>>29){case 7:for(;9>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=3;var u=f>>>26;f<<=6;k-=9;break;case 6:for(;11>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=
3;u=(f>>>24)+64;f<<=8;k-=11;break;case 5:case 4:for(;13>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=2;u=(f>>>21)+320;f<<=11;k-=13;break;default:for(;17>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=1;u=(f>>>16)+2368;f<<=16;k-=17}else switch(f>>>30){case 3:if(8>k){if(A>=y)return-1;f|=e[m+A++]<<24-k;k+=8}f<<=2;u=f>>>26;f<<=6;k-=8;break;case 2:for(;10>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}f<<=2;u=(f>>>24)+64;f<<=8;k-=10;break;default:for(;14>k;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}u=(f>>>
18)+320;f<<=14;k-=14}if(0==k){if(A>=y)return-1;f=e[m+A++]<<24;k=8}if(0<=f){var H=3;f<<=1;k--}else{var I=T?14:11;do{f<<=1;if(0==--k){if(A>=y)return-1;f=e[m+A++]<<24;k=8}if(0<=f)break;if(0==--I)return-1}while(1);H=(T?16:13)-I;f<<=1;if(--k<H)for(;k<H;k+=8){if(A>=y)return-1;f|=e[m+A++]<<24-k}I=H;H=f>>>32-I&~(-1<<I)|1<<I;f<<=I;k-=I}if(65536<=n+H)return-1;u=n-u&(T?65535:8191);do D[n++]=D[u++];while(0!=--H)}}}while(1);R=n;va=w;M=n-w;return 0}var R=0,X=new Uint8Array(65536),U=new Int32Array(8),va=0,M=0,Ra=
[6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,9,8,9,9,9,9,8,8,9,9,9,9,9,9,8,9,9,10,9,9,9,9,9,9,9,10,9,10,10,10,9,9,10,9,10,9,10,9,9,9,10,10,9,10,9,9,8,9,9,9,9,10,10,10,9,9,10,10,10,10,10,10,9,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,9,7,9,9,10,9,10,10,10,9,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,10,10,10,10,11,10,10,10,10,10,10,10,10,10,10,10,10,
10,9,10,10,10,10,10,9,10,10,10,10,10,9,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,9,10,8,9,9,10,9,10,10,10,9,10,10,10,9,9,8,7,13,13,7,7,10,7,7,6,6,6,6,5,6,6,6,5,6,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,5,6,7,7],ja=[123,65311,65293,65063,65024,65285,65303,65128,197,65031,65299,65216,65288,65048,65307,65203,65027,162,65090,65296,65035,65026,65169,65305,65152,233,65082,65301,65042,87,65239,65309,65294,65077,65129,65314,65304,65146,65025,65315,65300,65268,
65204,65033,65308,65220,65289,65120,65136,65298,65029,65170,65185,65306,65039,65287,65110,65302,65282,65240,65256,65310,65053,59,65535,65286,65535,65137,65161,65535,65535,65068,65067,65056,65535,65211,65231,65032,65535,65248,65037,65535,65177,65535,65028,65194,65097,65535,65047,65121,65247,65535,65279,65270,65100,65535,65535,65159,65535,65316,65535,65084,65138,65535,65535,65230,65535,65278,65535,65059,65212,65034,65193,65535,65041,65535,65154,65535,65030,65178,65269,65535,65058,65101,65119,65535,
65283,65249,65535,65226,65228,65535,65049,65535,65207,65535,65535,65155,65065,65535,65535,65535,65132,65535,65261,65535,65535,65094,65116,65045,65535,65243,65190,65535,65535,65092,65535,65036,65535,65173,65276,65535,65535,65208,5833,65535,65264,65535,65080,65535,65535,65133,65150,65535,65535,65535,65535,65115,65244,65535,65535,65260,65095,65055,65535,65151,65174,65535,65535,65189,65535,65040,65088,65074,65215,65535,65535,65236,65265,65535,65535,65535,65141,65535,65535,65165,65073,65535,65125,65051,
65535,65252,65275,65535,65535,65106,65535,65038,65535,65181,65199,65535,65535,65105,65235,65535,65312,65535,65071,65535,65535,65217,65164,65535,65535,65535,65087,65535,65535,65142,65535,65274,65107,65061,65535,65124,65253,65535,65535,65198,65535,65043,65535,65160,65182,65535,65091,65535,65535,65188,65171,65535,65535,65535,65085,65535,65535,65259,65241,65535,65044,65114,65535,65064,65149,65535,65535,65130,65535,65535,65281,65222,65224,65535,65535,65205,65535,65535,65535,65172,65144,65535,65535,65535,
65187,65535,65535,65242,65112,65535,65054,65093,65258,65535,65131,65535,65535,65079,65535,65535,65535,65148,65206,65535,65535,65272,65535,65535,65535,65223,65179,65535,65535,65535,65104,65535,65535,65197,65250,65535,65050,65123,65102,65535,65535,65273,65535,65139,65535,65535,65535,65072,65163,65535,65535,65213,65070,256,65535,65262,65234,65535,65535,65535,65196,65535,65535,65180,65156,65535,65060,65103,65271,65535,65535,65251,65122,65535,65535,65535,65535,65162,65140,65535,65535,65086,65535,65535,
65535,65233,65214,65535,65535,65069,65535,65098,65267,65535,65535,65245,65118,65046,65535,65096,65192,65535,65195,65175,65535,65535,65232,65535,65535,65229,65209,65535,65535,65535,65066,65535,65535,65158,65134,65535,65535,65535,65246,65535,65535,65117,65099,65057,65535,65263,65176,65535,65535,65153,65535,65535,65535,65191,65535,65210,65277,65535,65535,65535,65227,65535,65535,65135,65081,65535,65535,65535,65157,65535,268,65254,65127,65052,65535,65108,65202,65535,65535,65183,65535,65535,65535,65113,
65201,65535,65218,65535,65535,65078,65266,65535,65535,65238,65143,65535,65535,65535,65075,65535,65535,65167,65109,65062,266,65284,65255,65535,289,65126,65535,65535,65535,65200,65184,65535,271,65168,65535,65535,65237,65535,65535,65219,65076,65535,65535,65535,65166,65535,273,65145,65089,267],aa=[511,0,508,448,494,347,486,482],r=[4,2,3,4,3,4,4,5,4,5,5,6,6,7,7,8,7,8,8,9,9,8,9,9,9,9,9,9,9,9,9,9],C=[4065,4064,4066,4072,14,4069,4068,4074,4081,4067,21,4071,4079,70,4080,4077,4095,4087,4091,25,4093,4084,300,
4075,4094,4086,4090,137,4092,4083,4088,4082],z=[0,4,10,19],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,14,14,15],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,32769,49153,65537],x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,6,6,8,8,14,14],p=[2,3,4,5,6,7,8,9,10,12,14,16,18,22,26,30,34,42,50,58,66,82,98,114,130,194,258,514,2,2],h=new hi5.DataBuffer(X,0,1),l=hi5.Arrays.arraycopy,g=hi5.Arrays.fill;this.reset=
function(){R=0;X=new Uint8Array(65536);M=va=0;h=new hi5.DataBuffer(X,0,1)};this.release=function(){X=h=U=null};this.getArrayBuffer=function(){return X.buffer.slice(va,va+M)};this.getData=function(){h.setPosition(va);h.markEnd(va+M);return h};this.toPDU=function(){var e=new Uint8Array(65576);e[0]=29;e[2]=1;e[3]=2;e[4]=R;e[5]=R>>8;e[6]=R>>16;e[7]=R>>24;e.set(X,8);e.set(new Uint8Array(U.buffer),65544);return e};this.fromStream=function(e){R=e.getLittleEndian32();var m=e.getPosition();X.set(e.getData().subarray(m,
m+65536));e.skipPosition(65536);for(m=0;8>m;m++)U[m]=e.getLittleEndian32()};this.getDecompressedLength=function(){return M};this.dec5=function(e,m,y,f){return L(e,m,y,f)};this.dec=function(e,m,y,f){if(2==(f&15)){var k=X,A=U,n=R,w=0,T=m,D=0,u=0,H=0;M=0;va=n;0!=(f&64)&&(l(k,n-32768,k,0,32768),va=R=n=32768);0!=(f&128)&&(n=0,g(k,0,65536,0),g(A,0,A.length,0),va=0);if(32!=(f&32))l(e,0,k,n,y),n+=y,M=n-R;else{var I=0;for(var B=m+y;T<B&&!(H=e[T++],w|=H<<I,u+=8,I+=8,32<=I););w=K(w);T<B?(D=K(e[T++])&255,y=8):
y=0;for(;8<=u;){m=0;for(I=5;13>=I;I++)if(12!=I){H=K(w&4294967295<<32-I);var b=ja[H&511^H>>>9^H>>>4^H>>>7];0!=(b^H)>>>9?H=b&511:(b=(H>>>8^H&255)>>>2&15,0!=H>>>9&&(b=~b),H=ja[aa[(b&65535)%12]]);if(I==Ra[H])break}w<<=I;u-=I;if(256>H)k[n++]=H&255;else if(256<H&&289>H){b=H-257;I=q[b];m=d[b]-1;0!=I&&(m+=K(w&4294967295<<32-I));b=A;var W=m;var wa=b[2]|b[3]<<16;wa<<=16;b[2]=wa&65535;b[3]=wa>>>16&65535;var pa=b[0]|b[1]<<16;wa|=pa>>>16;b[2]=wa&65535;b[3]=wa>>>16&65535;pa=pa<<16|W;b[0]=pa&65535;b[1]=pa>>>16&
65535;w<<=I;u-=I}else if(288<H&&293>H)b=H-289,m=A[b],0!=b&&(I=A,W=I[0],I[0]=I[b],I[b]=W);else if(256==H)break;for(I=32-u;0<I;)if(y<I)H=D>>>8-y,w|=H<<32-u-y,u+=y,I-=y,T<B?(D=K(e[T++])&255,y=8):y=I=0;else{y>I?(w|=D>>>8-I,D<<=I,D&=255,y-=I,u=32):(w|=D>>>8-I,u=32,T<B?(D=K(e[T++])&255,y=8):y=0);break}if(0!=m){for(I=2;9>=I&&(H=K(w&4294967295<<32-I),b=C[H&31^H>>>5^H>>>9],0!=(b^H)>>>5?H=b&31:(H=H>>>4&15,H=C[z[(H^H>>>2^H>>>3)&3]]),I!=r[H]);I++);w<<=I;u-=I;I=x[H];b=p[H];0!=I&&(b+=K(w&4294967295<<32-I));w<<=
I;u-=I;W=n-m;I=b>m?m:b;for(H=0;0<I;)k[n++]=k[W++],I--;for(;b>m;)H=H>=m?0:H,k[n++]=k[W+H++],b--;for(I=32-u;0<I;)if(y<I)H=D>>>8-y,w|=H<<32-u-y,u+=y,I-=y,T<B?(D=K(e[T++])&255,y=8):y=I=0;else{y>I?(w|=D>>>8-I,D<<=I,D&=255,y-=I,u=32):(w|=D>>>8-I,u=32,T<B?(D=K(e[T++])&255,y=8):y=0);break}}}M=0!=(f&128)?n:n-R}R=n;return 0}return L(e,m,y,f)}}
function Bulk61Data(){var K=0,L=new Uint8Array(2E6),R=0,X=0,U=new hi5.DataBuffer(L,0,1),va=hi5.Arrays.arraycopy;this.reset=function(){K=0;L=new Uint8Array(2E6);X=R=0;U=new hi5.DataBuffer(L,0,1)};this.release=function(){L=U=null};this.getArrayBuffer=function(){return L.buffer.slice(R,R+X)};this.getData=function(){U.setPosition(R);U.markEnd(R+X);return U};this.toPDU=function(){var M=new Uint8Array(2000008);M[0]=29;M[2]=1;M[3]=9;M[4]=K;M[5]=K>>8;M[6]=K>>16;M[7]=K>>24;M.set(L,8);return M};this.fromStream=
function(M){K=M.getLittleEndian32();M.getPosition();L.set(M.getSubarray(2E6))};this.getDecompressedLength=function(){return X};this.dec=function(M,Ra,ja,aa){0!=(aa&4)&&(K=0);R=K;X=0;var r=Ra;if(0==(aa&2)){var C=M[r++]|M[r++]<<8;aa=r+8*C;for(var z=0;z<C;z++){var q=M[r++]|M[r++]<<8,d=M[r++]|M[r++]<<8,x=M[r++]|M[r++]<<8|M[r++]<<16|M[r++]<<24;var p=d-X;va(M,aa,L,K,p);K+=p;aa+=p;X=d;for(p=0;p<q;p++)L[K++]=L[x++],X++}}else aa=r;if(p=Ra+ja-aa)va(M,aa,L,K,p),X+=p,K+=p;return 0}}var rdpBitmap=rdpcodecs.bitmap;
function MSGSMEncoder(){function K(b,W){return-32768==b&&-32768==W?32767:b*W>>15<<16>>16}function L(b,W){return-32768==b&&-32768==W?32767:b*W+16384>>15<<16>>16}function R(b,W){if(0>=b){if(0<=W)return b+W;b=-(b+1)-(W+1);return 2147483647<=b?-2147483648:-b-2}if(0>=W)return b+W;b+=W;return 2147483647<b?2147483647:b}function X(b){if(0>b){if(-1073741824>=b)return 0;b=~b}return(0!=(b&4294901760)?0!=(b&4278190080)?-1+A[255&b>>24]:7+A[255&b>>16]:0!=(b&65280)?15+A[255&b>>8]:23+A[255&b])<<16>>16}function U(b,
W){return 16<=W?0>b?-1:-0:-16>=W?0:0>W?b<<-W<<16>>16:b>>W<<16>>16}function va(b,W,wa,pa,Ha,Aa){b=K(b<<16>>16,Ha[Aa]);W=b+(W<<16>>16);W=(-32768>W?-32768:32767<W?32767:W)+256;b=(-32768>W?-32768:32767<W?32767:W)>>9<<16>>16;Ha[Aa]=(b>wa?wa-pa:b<pa?0:b-pa)<<16>>16}function M(b,W){b=B[b+3*W]>>2<<16>>16;return b*b}function Ra(b,W,wa,pa,Ha,Aa,Ga){b=b[wa]+Aa;Ha=((-32768>b?-32768:32767<b?32767:b)<<26>>16)-(Ha<<17>>16);pa=L(Ga,-32768>Ha?-32768:32767<Ha?32767:Ha);Ga=pa+pa;W[wa]=-32768>Ga?-32768:32767<Ga?32767:
Ga}function ja(b){for(var W,wa,pa=0;8>pa;pa++)0>b[pa]?(W=(-32768==b[pa]?32767:-b[pa])<<16>>16,wa=(W>>2<<16>>16)+26112,b[pa]=-(11059>W?W<<1:20070>W?W+11059:-32768>wa?-32768:32767<wa?32767:wa)<<16>>16):(W=b[pa],wa=(W>>2<<16>>16)+26112,b[pa]=(11059>W?W<<1:20070>W?W+11059:-32768>wa?-32768:32767<wa?32767:wa)<<16>>16)}function aa(b,W,wa,pa,Ha){for(var Aa=b.u,Ga,F,ub,zb,hb,Qb;0!=wa;){wa--;Ga=zb=pa[Ha];for(Qb=0;8>Qb;Qb++)ub=Aa[Qb],hb=W[Qb],Aa[Qb]=zb,F=L(hb,Ga),zb=ub+F,zb=-32768>zb?-32768:32767<zb?32767:zb,
F=L(hb,ub),Ga+=F,Ga=-32768>Ga?-32768:32767<Ga?32767:Ga;pa[Ha++]=Ga}b.u=Aa}var r=[6554,16384,26214,32767],C=[29128,26215,23832,21846,20165,18725,17476,16384],z=[18431,20479,22527,24575,26623,28671,30719,32767],q=new function(){this.dp0=new Int16Array(280);this.mp=this.l_z2=this.z1=0;this.u=new Int16Array(8);this.larpp=[new Int16Array(8),new Int16Array(8)];this.j=0;this.nrp=40;this.v=new Int16Array(9);this.msr=0},d=new Int16Array(8),x=new Int16Array(4),p=new Int16Array(4),h=new Int16Array(4),l=new Int16Array(4),
g=new Int16Array(52),e=new Int16Array(160),m=new Uint8Array(33),y=0,f=hi5.Arrays.arraycopy;this.encode=function(b,W,wa,pa){for(var Ha=W,Aa,Ga=0;160>Ga;Ga++)Aa=b[Ha++],e[Ga]=0>Aa?32768*Aa:32767*Aa;k=!k;for(var F=0,ub=0,zb=0,hb=0,Qb=120,ad=new Int16Array(50),V=new Int16Array(160),od=0,bd=0,Y=q.z1,Lb=q.l_z2,Uc=q.mp,hc,Ka,ld,za,Ca,Na,xc=160;0!=xc;){xc--;za=e[od++]>>3<<2<<16>>16;hc=za-Y<<16>>16;Y=za;Ca=hc;Ca<<=15;Ka=Lb>>15<<16>>16;ld=Lb-(Ka<<15)<<16>>16;Ca+=L(ld,32735);Na=32735*Ka;Lb=R(Na,Ca);Na=R(Lb,
16384);Ka=L(Uc,-28180);Uc=Na>>15<<16>>16;var md=Uc+Ka;V[bd++]=-32768>md?-32768:32767<md?32767:md}q.z1=Y;q.l_z2=Lb;q.mp=Uc;var Hb,ka=0,Oc=0,Z;for(Z=0;159>=Z;Z++){var Rb=V[Z]+0;var Mc=-32768>Rb?-32768:32767<Rb?32767:Rb;Mc>Oc&&(Oc=Mc)}var oa=0==Oc?0:4-X(Oc<<16)<<16>>16;if(0<oa)switch(oa){case 1:for(Z=0;159>=Z;Z++)V[Z]=L(V[Z],16384);break;case 2:for(Z=0;159>=Z;Z++)V[Z]=L(V[Z],8192);break;case 3:for(Z=0;159>=Z;Z++)V[Z]=L(V[Z],4096);break;case 4:for(Z=0;159>=Z;Z++)V[Z]=L(V[Z],2048)}var P=V[ka];f([0,0,0,
0,0,0,0,0,0],0,n,0,n.length);n[0]+=P*V[ka-0];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];n[2]+=P*V[ka-2];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];n[2]+=P*V[ka-2];n[3]+=P*V[ka-3];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];n[2]+=P*V[ka-2];n[3]+=P*V[ka-3];n[4]+=P*V[ka-4];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];n[2]+=P*V[ka-2];n[3]+=P*V[ka-3];n[4]+=P*V[ka-4];n[5]+=P*V[ka-5];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];n[2]+=P*V[ka-2];n[3]+=P*V[ka-3];n[4]+=P*V[ka-
4];n[5]+=P*V[ka-5];n[6]+=P*V[ka-6];P=V[++ka];n[0]+=P*V[ka-0];n[1]+=P*V[ka-1];n[2]+=P*V[ka-2];n[3]+=P*V[ka-3];n[4]+=P*V[ka-4];n[5]+=P*V[ka-5];n[6]+=P*V[ka-6];n[7]+=P*V[ka-7];++ka;for(Hb=ka;160>Hb;++Hb)P=V[Hb],n[0]+=P*V[Hb-0],n[1]+=P*V[Hb-1],n[2]+=P*V[Hb-2],n[3]+=P*V[Hb-3],n[4]+=P*V[Hb-4],n[5]+=P*V[Hb-5],n[6]+=P*V[Hb-6],n[7]+=P*V[Hb-7],n[8]+=P*V[Hb-8];for(Z=0;9>Z;Z++)n[Z]<<=1;if(0<oa)for(Z=0;160>Z;Z++)V[Z]<<=oa;var ea=new Int16Array(1),na=0,db,Tb=new Int16Array(9),Sa=new Int16Array(9),dc=new Int16Array(9);
if(0==n[0])for(db=0;8>db;db++)d[db]=0;else{ea[0]=X(n[0]);for(db=0;8>=db;db++)Tb[db]=n[db]<<ea[0]>>16;f(Tb,0,dc,0,7);f(Tb,0,Sa,0,8);for(var Cc=1;8>=Cc;Cc++,na++){ea[0]=Sa[1];ea[0]=(0>ea[0]?-32768==ea[0]?32767:-ea[0]:ea[0])<<16>>16;if(Sa[0]<ea[0]){for(db=Cc;8>db;db++)d[db]=0;break}var Ec=na;var nd=ea[0],ta=nd,Sb=Sa[0],xb=0,Rc=15;if(0==nd)var ed=0;else{for(;0!=Rc;)Rc--,xb=xb<<17>>16,ta<<=1,ta>=Sb&&(ta-=Sb,xb++);ed=xb<<16>>16}d[Ec]=ed;0<Sa[1]&&(d[na]=-d[na]);if(8==Cc)break;ea[0]=L(Sa[1],d[na]);var qc=
Sa[0]+ea[0];Sa[0]=-32768>qc?-32768:32767<qc?32767:qc;for(var bc=1;bc<=8-Cc;bc++){ea[0]=L(dc[bc],d[na]);var fd=Sa[bc+1]+ea[0];Sa[bc]=-32768>fd?-32768:32767<fd?32767:fd;ea[0]=L(Sa[bc+1],d[na]);var Dc=dc[bc]+ea[0];dc[bc]=-32768>Dc?-32768:32767<Dc?32767:Dc}}}for(var a,t=0;8>t;t++)a=d[t],a=(0>a?-32768==a?32767:-a:a)<<16>>16,22118>a?a>>=1:31130>a?a-=11059:(a-=26112,a<<=2),d[t]=0>d[t]?-a:a;var v=0;va(20480,0,31,-32,d,v++);va(20480,0,31,-32,d,v++);va(20480,2048,15,-16,d,v++);va(20480,-2560,15,-16,d,v++);
va(13964,94,7,-8,d,v++);va(15360,-1792,7,-8,d,v++);va(8534,-341,3,-4,d,v++);va(9036,-1144,3,-4,d,v++);var E=new Int16Array(8),G=q.j;var J=G^1;q.j=J;var O=q.larpp[G],N=q.larpp[J],ba=0;Ra(d,O,ba++,0,0,-32,13107);Ra(d,O,ba++,0,0,-32,13107);Ra(d,O,ba++,0,2048,-16,13107);Ra(d,O,ba++,0,-2560,-16,13107);Ra(d,O,ba++,0,94,-8,19223);Ra(d,O,ba++,0,-1792,-8,17476);Ra(d,O,ba++,0,-341,-4,31454);Ra(d,O,ba++,0,-1144,-4,29708);for(var fa=0;8>fa;fa++){var xa=(N[fa]>>2<<16>>16)+(O[fa]>>2<<16>>16);E[fa]=-32768>xa?-32768:
32767<xa?32767:xa;var eb=E[fa]+(N[fa]>>1<<16>>16);E[fa]=-32768>eb?-32768:32767<eb?32767:eb}ja(E);aa(q,E,13,V,0);for(var ya=0;8>ya;ya++){var ua=(N[ya]>>1<<16>>16)+(O[ya]>>1<<16>>16);E[ya]=-32768>ua?-32768:32767<ua?32767:ua}ja(E);aa(q,E,14,V,13);for(var Q=0;8>Q;Q++){var yb=(N[Q]>>2<<16>>16)+(O[Q]>>2<<16>>16);E[Q]=-32768>yb?-32768:32767<yb?32767:yb;var ic=E[Q]+(O[Q]>>1<<16>>16);E[Q]=-32768>ic?-32768:32767<ic?32767:ic}ja(E);aa(q,E,13,V,27);for(var Ab=0;8>Ab;Ab++)E[Ab]=O[Ab];ja(E);aa(q,E,120,V,40);for(var Mb=
q.dp0,Ia,Ub,jc=0;3>=jc;jc++,ub+=13){for(var Vb=V,Bb=40*jc,Cb=ad,kc=Mb,dd=Mb,Nc=Qb,wc=x,Zb=h,Xa=zb++,ma=void 0,mb=void 0,lc=void 0,ec=void 0,Db=void 0,Eb=void 0,Nb=void 0,ha=void 0,Pc=Vb,Qc=Bb,da=kc,ca=Nc,Ya=Zb,Ob=wc,$b=Xa,ia=new Int16Array(40),mc=0,ib=0;39>=ib;ib++)ma=Pc[ib+Qc],ma=(0>ma?-32768==ma?32767:-ma:ma)<<16>>16,ma>mc&&(mc=ma);ma=0;0!=mc&&(ma=X(mc<<16));mb=6<ma?0:6-ma<<16>>16;for(ib=0;39>=ib;ib++)ia[ib]=Pc[ib+Qc]>>mb;Eb=0;for(ha=Nb=40;120>=ha;ha++){var S=1;var la=ia[0]*da[ca-ha];la+=ia[1]*
da[S+ca-ha];S++;la+=ia[2]*da[S+ca-ha];S++;la+=ia[3]*da[S+ca-ha];S++;la+=ia[4]*da[S+ca-ha];S++;la+=ia[5]*da[S+ca-ha];S++;la+=ia[6]*da[S+ca-ha];S++;la+=ia[7]*da[S+ca-ha];S++;la+=ia[8]*da[S+ca-ha];S++;la+=ia[9]*da[S+ca-ha];S++;la+=ia[10]*da[S+ca-ha];S++;la+=ia[11]*da[S+ca-ha];S++;la+=ia[12]*da[S+ca-ha];S++;la+=ia[13]*da[S+ca-ha];S++;la+=ia[14]*da[S+ca-ha];S++;la+=ia[15]*da[S+ca-ha];S++;la+=ia[16]*da[S+ca-ha];S++;la+=ia[17]*da[S+ca-ha];S++;la+=ia[18]*da[S+ca-ha];S++;la+=ia[19]*da[S+ca-ha];S++;la+=ia[20]*
da[S+ca-ha];S++;la+=ia[21]*da[S+ca-ha];S++;la+=ia[22]*da[S+ca-ha];S++;la+=ia[23]*da[S+ca-ha];S++;la+=ia[24]*da[S+ca-ha];S++;la+=ia[25]*da[S+ca-ha];S++;la+=ia[26]*da[S+ca-ha];S++;la+=ia[27]*da[S+ca-ha];S++;la+=ia[28]*da[S+ca-ha];S++;la+=ia[29]*da[S+ca-ha];S++;la+=ia[30]*da[S+ca-ha];S++;la+=ia[31]*da[S+ca-ha];S++;la+=ia[32]*da[S+ca-ha];S++;la+=ia[33]*da[S+ca-ha];S++;la+=ia[34]*da[S+ca-ha];S++;la+=ia[35]*da[S+ca-ha];S++;la+=ia[36]*da[S+ca-ha];S++;la+=ia[37]*da[S+ca-ha];S++;la+=ia[38]*da[S+ca-ha];S++;
la+=ia[39]*da[S+ca-ha];la>Eb&&(Nb=ha<<16>>16,Eb=la)}Ob[$b]=Nb;Eb=Eb<<1>>6-mb;for(ib=Db=0;39>=ib;ib++){var jb=da[ib-Nb+ca]>>3<<16>>16;Db+=jb*jb}Db<<=1;if(0>=Eb)Ya[$b]=0;else if(Eb>=Db)Ya[$b]=3;else{ma=X(Db);ec=Eb<<ma>>16<<16>>16;lc=Db<<ma>>16<<16>>16;for(var fc=0;2>=fc&&!(ec<=K(lc,r[fc]));fc++)Ya[$b]=fc}var La=void 0,ra=void 0,nb=void 0,ob=wc[Xa],Za=kc,Fa=Vb,Fb=Bb,kb=dd,Pb=Cb,Ma=Nc;switch(Zb[Xa]){case 0:nb=3277;for(ra=0;39>=ra;ra++)kb[ra+Ma]=L(nb,Za[ra-ob+Ma]),La=Fa[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>
La?-32768:32767<La?32767:La;break;case 1:nb=11469;for(ra=0;39>=ra;ra++)kb[ra+Ma]=L(nb,Za[ra-ob+Ma]),La=Fa[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>La?-32768:32767<La?32767:La;break;case 2:nb=21299;for(ra=0;39>=ra;ra++)kb[ra+Ma]=L(nb,Za[ra-ob+Ma]),La=Fa[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>La?-32768:32767<La?32767:La;break;case 3:for(nb=32767,ra=0;39>=ra;ra++)kb[ra+Ma]=L(nb,Za[ra-ob+Ma]),La=Fa[ra+Fb]-kb[ra+Ma],Pb[ra+5]=-32768>La?-32768:32767<La?32767:La}for(var Ba=ad,nc=l,Sc=p,gc=hb++,oc=g,Fc=ub,Gc=new Int16Array(13),
ab=new Int16Array(13),qa=void 0,Ua=Ba,$a=0;39>=$a;$a++)qa=4096,qa+=-134*Ua[$a+0]+-374*Ua[$a+1]+2054*Ua[$a+3]+5741*Ua[$a+4]+8192*Ua[$a+5]+5741*Ua[$a+6]+2054*Ua[$a+7]+-374*Ua[$a+9]+-134*Ua[$a+10],qa=qa>>13<<16>>16,B[$a]=-32768>qa?-32768:32767<qa?32767:qa;var Hc=void 0,ac=void 0,Da=void 0,pb=Gc,Wb=Sc,yc=gc,pc=0;Hc=Da=0+(M(0,1)+M(0,2)+M(0,3)+M(0,4)+M(0,5)+M(0,6)+M(0,7)+M(0,8)+M(0,9)+M(0,10)+M(0,11)+M(0,12));Da+=M(0,0);ac=Da<<1;Da=0+(M(1,0)+M(1,1)+M(1,2)+M(1,3)+M(1,4)+M(1,5)+M(1,6)+M(1,7)+M(1,8)+M(1,9)+
M(1,10)+M(1,11)+M(1,12));Da<<=1;Da>ac&&(pc=1,ac=Da);Da=0+(M(2,0)+M(2,1)+M(2,2)+M(2,3)+M(2,4)+M(2,5)+M(2,6)+M(2,7)+M(2,8)+M(2,9)+M(2,10)+M(2,11)+M(2,12));Da<<=1;Da>ac&&(pc=2,ac=Da);Da=Hc+M(3,12);Da<<=1;Da>ac&&(pc=3);for(var Ic=0;12>=Ic;Ic++)pb[Ic]=B[pc+3*Ic];Wb[yc]=pc;var Gb=void 0,Oa=void 0,bb=void 0,qb=void 0,zc=void 0,Xb=void 0,sa=void 0,Ib=void 0,cb=void 0,Ac=Gc,Tc=oc,rc=Fc,Pa=nc,sc=gc,Ja=0;for(Oa=0;12>=Oa;Oa++)sa=Ac[Oa],sa=0>sa?-32768==sa?32767:-sa:sa,sa>Ja&&(Ja=sa);qb=0;sa=Ja>>9<<16>>16;for(Oa=
cb=0;5>=Oa;Oa++)cb=0>=sa?cb|1:cb|0,sa=sa>>1<<16>>16,0==cb&&qb++;var tc=(Ja>>(qb+5<<16>>16)<<16>>16)+(qb<<3<<16>>16);Ib=-32768>tc?-32768:32767<tc?32767:tc;var Yb=0;15<Ib&&(Yb=(Ib>>3<<16>>16)-1<<16>>16);Gb=Ib-(Yb<<3)<<16>>16;if(0==Gb)Yb=-4,Gb=7;else{for(;7>=Gb;)Gb=(Gb<<1|1)<<16>>16,Yb--;Gb-=8}I==I?(w=Yb,T=Gb):(D=Yb,u=Gb);qb=w;bb=T;Xb=6-qb<<16>>16;zc=C[bb];for(Oa=0;12>=Oa;Oa++)sa=Ac[Oa]<<Xb<<16>>16,sa=K(sa,zc),sa=sa>>12<<16>>16,Tc[Oa+rc]=sa+4<<16>>16;T=bb;w=qb;Pa[sc]=Ib;var rb=void 0,Qa=void 0,Ea=void 0,
tb=void 0,uc=void 0,Jb=void 0,Jc=oc,Vc=ab,Wc=Fc;I==I?(uc=z[T],Qa=6-w<<16>>16):(uc=z[u],Qa=6-D<<16>>16);tb=-32768>Qa?-32768:32767<Qa?32767:Qa;Qa=tb-1;var Kc=-32768>Qa?-32768:32767<Qa?32767:Qa;Ea=16<=Kc?0:-16>=Kc?-0:0>Kc?U(1,-Kc):1<<Kc<<16>>16;for(var gd=H=0;13>gd;gd++)Jb=(Jc[Wc++]<<1)-7<<16>>16,Jb=Jb<<28>>16,Jb=L(uc,Jb),rb=Jb+Ea,Jb=-32768>rb?-32768:32767<rb?32767:rb,Vc[H++]=U(Jb,tb);var lb=void 0,Xc=ab,Va=Ba,fb=I,Kb=13,Yc=0;lb=fb==I?5:0;switch(Sc[gc]){case 3:Va[lb++]=0;do Va[lb++]=0,Va[lb++]=0,Va[lb++]=
Xc[Yc++],--Kb;while(0!=Kb);break;case 2:do Va[lb++]=0,Va[lb++]=0,Va[lb++]=Xc[Yc++],--Kb;while(0!=Kb);break;case 1:do Va[lb++]=0,Va[lb++]=Xc[Yc++],Va[lb++]=0,--Kb;while(0!=Kb);break;case 0:do Va[lb++]=Xc[Yc++],Va[lb++]=0,Va[lb++]=0,--Kb;while(0!=Kb)}fb==I&&(Va[lb++]=0);for(Ia=0;39>=Ia;Ia++)Ub=ad[5+Ia]+Mb[Ia+Qb],Mb[Ia+Qb]=-32768>Ub?-32768:32767<Ub?32767:Ub;Qb+=40}for(Ia=0;120>Ia;Ia++)Mb[Ia]=Mb[160+Ia];if(k){var c=d[0]<<4|d[1]<<10;m[F++]=c>>4;c=c>>5|d[2]<<11;m[F++]=c>>7;c=c>>5|d[3]<<11;c=c>>4|d[4]<<
12;m[F++]=c>>6;c=c>>4|d[5]<<12;c=c>>3|d[6]<<13;m[F++]=c>>7;c=c>>3|d[7]<<13;c=c>>7|x[0]<<9;m[F++]=c>>5;c=c>>2|h[0]<<14;c=c>>2|p[0]<<14;c=c>>6|l[0]<<10;m[F++]=c>>3;c=c>>3|g[0]<<13;m[F++]=c>>8;c=c>>3|g[1]<<13;c=c>>3|g[2]<<13;c=c>>3|g[3]<<13;m[F++]=c>>7;c=c>>3|g[4]<<13;c=c>>3|g[5]<<13;c=c>>3|g[6]<<13;m[F++]=c>>6;c=c>>3|g[7]<<13;c=c>>3|g[8]<<13;m[F++]=c>>8;c=c>>3|g[9]<<13;c=c>>3|g[10]<<13;c=c>>3|g[11]<<13;m[F++]=c>>7;c=c>>3|g[12]<<13;c=c>>7|x[1]<<9;m[F++]=c>>5;c=c>>2|h[1]<<14;c=c>>2|p[1]<<14;c=c>>6|l[1]<<
10;m[F++]=c>>3;c=c>>3|g[13]<<13;m[F++]=c>>8;c=c>>3|g[14]<<13;c=c>>3|g[15]<<13;c=c>>3|g[16]<<13;m[F++]=c>>7;c=c>>3|g[17]<<13;c=c>>3|g[18]<<13;c=c>>3|g[19]<<13;m[F++]=c>>6;c=c>>3|g[20]<<13;c=c>>3|g[21]<<13;m[F++]=c>>8;c=c>>3|g[22]<<13;c=c>>3|g[23]<<13;c=c>>3|g[24]<<13;m[F++]=c>>7;c=c>>3|g[25]<<13;c=c>>7|x[2]<<9;m[F++]=c>>5;c=c>>2|h[2]<<14;c=c>>2|p[2]<<14;c=c>>6|l[2]<<10;m[F++]=c>>3;c=c>>3|g[26]<<13;m[F++]=c>>8;c=c>>3|g[27]<<13;c=c>>3|g[28]<<13;c=c>>3|g[29]<<13;m[F++]=c>>7;c=c>>3|g[30]<<13;c=c>>3|g[31]<<
13;c=c>>3|g[32]<<13;m[F++]=c>>6;c=c>>3|g[33]<<13;c=c>>3|g[34]<<13;m[F++]=c>>8;c=c>>3|g[35]<<13;c=c>>3|g[36]<<13;c=c>>3|g[37]<<13;m[F++]=c>>7;c=c>>3|g[38]<<13;c=c>>7|x[3]<<9;m[F++]=c>>5;c=c>>2|h[3]<<14;c=c>>2|p[3]<<14;c=c>>6|l[3]<<10;m[F++]=c>>3;c=c>>3|g[39]<<13;m[F++]=c>>8;c=c>>3|g[40]<<13;c=c>>3|g[41]<<13;c=c>>3|g[42]<<13;m[F++]=c>>7;c=c>>3|g[43]<<13;c=c>>3|g[44]<<13;c=c>>3|g[45]<<13;m[F++]=c>>6;c=c>>3|g[46]<<13;c=c>>3|g[47]<<13;m[F++]=c>>8;c=c>>3|g[48]<<13;c=c>>3|g[49]<<13;c=c>>3|g[50]<<13;m[F++]=
c>>7;c=c>>3|g[51]<<13;m[F]=c>>12;y=m[F]}else c=y<<6|d[0]<<10,m[F++]=c>>6,c=c>>6|d[1]<<10,m[F++]=c>>8,c=c>>5|d[2]<<11,c=c>>5|d[3]<<11,m[F++]=c>>6,c=c>>4|d[4]<<12,c=c>>4|d[5]<<12,m[F++]=c>>6,c=c>>3|d[6]<<13,c=c>>3|d[7]<<13,m[F++]=c>>8,c=c>>7|x[0]<<9,c=c>>2|h[0]<<14,m[F++]=c>>7,c=c>>2|p[0]<<14,c=c>>6|l[0]<<10,m[F++]=c>>7,c=c>>3|g[0]<<13,c=c>>3|g[1]<<13,c=c>>3|g[2]<<13,m[F++]=c>>6,c=c>>3|g[3]<<13,c=c>>3|g[4]<<13,m[F++]=c>>8,c=c>>3|g[5]<<13,c=c>>3|g[6]<<13,c=c>>3|g[7]<<13,m[F++]=c>>7,c=c>>3|g[8]<<13,c=
c>>3|g[9]<<13,c=c>>3|g[10]<<13,m[F++]=c>>6,c=c>>3|g[11]<<13,c=c>>3|g[12]<<13,m[F++]=c>>8,c=c>>7|x[1]<<9,c=c>>2|h[1]<<14,m[F++]=c>>7,c=c>>2|p[1]<<14,c=c>>6|l[1]<<10,m[F++]=c>>7,c=c>>3|g[13]<<13,c=c>>3|g[14]<<13,c=c>>3|g[15]<<13,m[F++]=c>>6,c=c>>3|g[16]<<13,c=c>>3|g[17]<<13,m[F++]=c>>8,c=c>>3|g[18]<<13,c=c>>3|g[19]<<13,c=c>>3|g[20]<<13,m[F++]=c>>7,c=c>>3|g[21]<<13,c=c>>3|g[22]<<13,c=c>>3|g[23]<<13,m[F++]=c>>6,c=c>>3|g[24]<<13,c=c>>3|g[25]<<13,m[F++]=c>>8,c=c>>7|x[2]<<9,c=c>>2|h[2]<<14,m[F++]=c>>7,c=
c>>2|p[2]<<14,c=c>>6|l[2]<<10,m[F++]=c>>7,c=c>>3|g[26]<<13,c=c>>3|g[27]<<13,c=c>>3|g[28]<<13,m[F++]=c>>6,c=c>>3|g[29]<<13,c=c>>3|g[30]<<13,m[F++]=c>>8,c=c>>3|g[31]<<13,c=c>>3|g[32]<<13,c=c>>3|g[33]<<13,m[F++]=c>>7,c=c>>3|g[34]<<13,c=c>>3|g[35]<<13,c=c>>3|g[36]<<13,m[F++]=c>>6,c=c>>3|g[37]<<13,c=c>>3|g[38]<<13,m[F++]=c>>8,c=c>>7|x[3]<<9,c=c>>2|h[3]<<14,m[F++]=c>>7,c=c>>2|p[3]<<14,c=c>>6|l[3]<<10,m[F++]=c>>7,c=c>>3|g[39]<<13,c=c>>3|g[40]<<13,c=c>>3|g[41]<<13,m[F++]=c>>6,c=c>>3|g[42]<<13,c=c>>3|g[43]<<
13,m[F++]=c>>8,c=c>>3|g[44]<<13,c=c>>3|g[45]<<13,c=c>>3|g[46]<<13,m[F++]=c>>7,c=c>>3|g[47]<<13,c=c>>3|g[48]<<13,c=c>>3|g[49]<<13,m[F++]=c>>6,c=c>>3|g[50]<<13,c=c>>3|g[51]<<13,m[F++]=c>>8;var Bc,Zc=k?32:33;for(Bc=0;Bc<Zc;Bc++)wa[Bc+pa]=m[Bc];return Zc};var k=!1,A=[8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=new Int32Array(9),w=0,T=0,D=0,u=0,H=0,I=0,B=new Int16Array(40)}
function MSGSM(){function K(f,k,A,n,w,T,D,u){var H=0;g(e,0,160,0);g(m,0,40,0);for(var I=0;3>=I;I++,H+=13){var B=w[I],b=A[I],W=H,wa=T,pa=m,Ha=new Int32Array(13);Ha.buffer||g(Ha,0,13,0);var Aa=0;15<B&&(Aa=(B>>3)-1);B-=Aa<<3;if(0==B)Aa=-4,B=7;else{for(;7>=B;)B=B<<1|1,Aa--;B-=8}var Ga=Array(2);Ga[0]=Aa;Ga[1]=B;Aa=Ha;B=W;W=ja[Ga[1]];Ga=M(6,Ga[0]);var F=M(Ga,1);F=16<=F?0:-16>=F?-0:0>F?Ra(1,-F):1<<F;for(var ub=0,zb=0;13>zb;zb++){var hb=(wa[B++]<<1)-7;hb<<=12;hb=U(W,hb);hb+=F;-32768>hb?hb=-32768:32767<hb&&
(hb=32767);Aa[ub++]=Ra(hb,Ga)}wa=13;W=Aa=0;switch(b){case 3:pa[W++]=0;case 2:pa[W++]=0;case 1:pa[W++]=0;case 0:pa[W++]=Ha[Aa++],wa--}do pa[W++]=0,pa[W++]=0,pa[W++]=Ha[Aa++];while(0<--wa);for(;4>++b;)pa[W++]=0;Ha=k[I];b=n[I];pa=m;q=Ha=40>Ha||120<Ha?q:Ha;wa=aa[b];for(Aa=0;39>=Aa;Aa++)b=U(wa,r[Aa-Ha+120]),b+=pa[Aa],-32768>b?b=-32768:32767<b&&(b=32767),r[Aa+120]=b;l(r,40,r,0,120);l(r,120,e,40*I,39)}k=C[z];A=C[z^=1];n=0;L(f,k,n++,0,0,-32,13107);L(f,k,n++,0,0,-32,13107);L(f,k,n++,0,2048,-16,13107);L(f,
k,n++,0,-2560,-16,13107);L(f,k,n++,0,94,-8,19223);L(f,k,n++,0,-1792,-8,17476);L(f,k,n++,0,-341,-4,31454);L(f,k,n++,0,-1144,-4,29708);f=y;for(w=0;8>w;w++)n=(A[w]>>2)+(k[w]>>2),-32768>n?n=-32768:32767<n&&(n=32767),n+=A[w]>>1,-32768>n?n=-32768:32767<n&&(n=32767),f[w]=n;R(y);X(y,13,e,D,0,u);f=y;for(w=0;8>w;w++)n=(A[w]>>1)+(k[w]>>1),-32768>n?n=-32768:32767<n&&(n=32767),f[w]=n;R(y);X(y,14,e,D,13,u);f=y;for(w=0;8>w;w++)n=(A[w]>>2)+(k[w]>>2),-32768>n?n=-32768:32767<n&&(n=32767),n+=k[w]>>1,-32768>n?n=-32768:
32767<n&&(n=32767),f[w]=n;R(y);X(y,13,e,D,27,u);f=y;for(A=0;8>A;A++)f[A]=k[A];R(y);X(y,120,e,D,40,u);k=u;for(A=u+160;A-- >u;k++)f=U(x,28180),x=D[k]+f,-32768>x?x=-32768:32767<x&&(x=32767),f=x<<1,-32768>f?f=-32768:32767<f&&(f=32767),D[k]=f}function L(f,k,A,n,w,T,D){n=f[A]+T;-32768>n?n=-32768:32767<n&&(n=32767);n=M(n<<10,w<<1);n=U(D,n);n+=n;-32768>n?n=-32768:32767<n&&(n=32767);k[A]=n}function R(f){for(var k,A=0;8>A;A++)0>f[A]?(k=-32768==f[A]?32767:-f[A],f[A]=-(11059>k?k<<1:20070>k?k+11059:va(k>>2,26112))):
(k=f[A],f[A]=11059>k?k<<1:20070>k?k+11059:va(k>>2,26112))}function X(f,k,A,n,w,T){for(var D,u,H;0!=k;){k--;D=A[w];for(var I=7;0<=I;I--)u=f[I],H=d[I],H=((-32768==u&&-32768==H?32767:65535&u*H+16384>>15)&65535)<<16>>16,D=M(D,H),u=((-32768==u&&-32768==D?32767:65535&u*D+16384>>15)&65535)<<16>>16,u=d[I]+u,-32768>u?u=-32768:32767<u&&(u=32767),d[I+1]=u;n[T+w++]=d[0]=D}}function U(f,k){return-32768==f&&-32768==k?32767:(f*k+16384>>15&65535)<<16>>16}function va(f,k){f+=k;return-32768>f?-32768:32767<f?32767:
f}function M(f,k){f-=k;return-32768>f?-32768:32767<f?32767:f}function Ra(f,k){return 16<=k?0>f?-1:0:-16>=k?0:0>k?f<<-k:f>>k}var ja=[18431,20479,22527,24575,26623,28671,30719,32767],aa=[3277,11469,21299,32767],r=new Int32Array(280),C=[new Int32Array(8),new Int32Array(8)],z=0,q=40,d=new Int32Array(9),x=0,p=new Int32Array(320);p[0]=0;var h=[.1],l=hi5.Arrays.arraycopy,g=hi5.Arrays.fill;this.decode=function(f,k,A){var n=0,w;A=k+A;for(var T=new Int32Array(8),D=new Int32Array(4),u=new Int32Array(4),H=new Int32Array(4),
I=new Int32Array(4),B=new Int32Array(52);k<A;){var b=f[k++]&255;T[0]=b&63;b>>>=6;b|=f[k++]<<2&1023;T[1]=b&63;b>>>=6;b|=f[k++]<<4&4095;T[2]=b&31;b>>>=5;T[3]=b&31;b>>>=5;b|=f[k++]<<2&1023;T[4]=b&15;b>>>=4;T[5]=b&15;b>>>=4;b|=f[k++]<<2&1023;T[6]=b&7;b>>>=3;T[7]=b&7;b>>>=3;b|=f[k++]<<4&4095;D[0]=b&127;b>>>=7;H[0]=b&3;b>>>=2;u[0]=b&3;b>>>=2;b|=f[k++]<<1&511;I[0]=b&63;b>>>=6;B[0]=b&7;b=f[k++]&255;B[1]=b&7;b>>>=3;B[2]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[3]=b&7;b>>>=3;B[4]=b&7;b>>>=3;B[5]=b&7;b>>>=3;b|=f[k++]<<
1&511;B[6]=b&7;b>>>=3;B[7]=b&7;b>>>=3;B[8]=b&7;b=f[k++]&255;B[9]=b&7;b>>>=3;B[10]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[11]=b&7;b>>>=3;B[12]=b&7;b>>>=3;b|=f[k++]<<4&4095;D[1]=b&127;b>>>=7;H[1]=b&3;b>>>=2;u[1]=b&3;b>>>=2;b|=f[k++]<<1&511;I[1]=b&63;b>>>=6;B[13]=b&7;b=f[k++]&255;B[14]=b&7;b>>>=3;B[15]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[16]=b&7;b>>>=3;B[17]=b&7;b>>>=3;B[18]=b&7;b>>>=3;b|=f[k++]<<1&511;B[19]=b&7;b>>>=3;B[20]=b&7;b>>>=3;B[21]=b&7;b=f[k++]&255;B[22]=b&7;b>>>=3;B[23]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[24]=
b&7;b>>>=3;B[25]=b&7;b>>>=3;b|=f[k++]<<4&4095;D[2]=b&127;b>>>=7;H[2]=b&3;b>>>=2;u[2]=b&3;b>>>=2;b|=f[k++]<<1&511;I[2]=b&63;b>>>=6;B[26]=b&7;b=f[k++]&255;B[27]=b&7;b>>>=3;B[28]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[29]=b&7;b>>>=3;B[30]=b&7;b>>>=3;B[31]=b&7;b>>>=3;b|=f[k++]<<1&511;B[32]=b&7;b>>>=3;B[33]=b&7;b>>>=3;B[34]=b&7;b=f[k++]&255;B[35]=b&7;b>>>=3;B[36]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[37]=b&7;b>>>=3;B[38]=b&7;b>>>=3;b|=f[k++]<<4&4095;D[3]=b&127;b>>>=7;H[3]=b&3;b>>>=2;u[3]=b&3;b>>>=2;b|=f[k++]<<1&511;
I[3]=b&63;b>>>=6;B[39]=b&7;b=f[k++]&255;B[40]=b&7;b>>>=3;B[41]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[42]=b&7;b>>>=3;B[43]=b&7;b>>>=3;B[44]=b&7;b>>>=3;b|=f[k++]<<1&511;B[45]=b&7;b>>>=3;B[46]=b&7;b>>>=3;B[47]=b&7;b=f[k++]&255;B[48]=b&7;b>>>=3;B[49]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[50]=b&7;b>>>=3;B[51]=b&7;b>>>=3;K(T,D,u,H,I,B,p,0);b&=15;b|=f[k++]<<4&4095;T[0]=b&63;b>>>=6;T[1]=b&63;b=f[k++]&255;T[2]=b&31;b>>>=5;b|=f[k++]<<3&2047;T[3]=b&31;b>>>=5;T[4]=b&15;b>>>=4;b|=f[k++]<<2&1023;T[5]=b&15;b>>>=4;T[6]=b&7;b>>>=
3;T[7]=b&7;b=f[k++]&255;D[0]=b&127;b>>>=7;b|=f[k++]<<1&511;H[0]=b&3;b>>>=2;u[0]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[0]=b&63;b>>>=6;B[0]=b&7;b>>>=3;B[1]=b&7;b>>>=3;b|=f[k++]<<1&511;B[2]=b&7;b>>>=3;B[3]=b&7;b>>>=3;B[4]=b&7;b=f[k++]&255;B[5]=b&7;b>>>=3;B[6]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[7]=b&7;b>>>=3;B[8]=b&7;b>>>=3;B[9]=b&7;b>>>=3;b|=f[k++]<<1&511;B[10]=b&7;b>>>=3;B[11]=b&7;b>>>=3;B[12]=b&7;b=f[k++]&255;D[1]=b&127;b>>>=7;b|=f[k++]<<1&511;H[1]=b&3;b>>>=2;u[1]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[1]=b&63;b>>>=
6;B[13]=b&7;b>>>=3;B[14]=b&7;b>>>=3;b|=f[k++]<<1&511;B[15]=b&7;b>>>=3;B[16]=b&7;b>>>=3;B[17]=b&7;b=f[k++]&255;B[18]=b&7;b>>>=3;B[19]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[20]=b&7;b>>>=3;B[21]=b&7;b>>>=3;B[22]=b&7;b>>>=3;b|=f[k++]<<1&511;B[23]=b&7;b>>>=3;B[24]=b&7;b>>>=3;B[25]=b&7;b=f[k++]&255;D[2]=b&127;b>>>=7;b|=f[k++]<<1&511;H[2]=b&3;b>>>=2;u[2]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[2]=b&63;b>>>=6;B[26]=b&7;b>>>=3;B[27]=b&7;b>>>=3;b|=f[k++]<<1&511;B[28]=b&7;b>>>=3;B[29]=b&7;b>>>=3;B[30]=b&7;b=f[k++]&255;B[31]=
b&7;b>>>=3;B[32]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[33]=b&7;b>>>=3;B[34]=b&7;b>>>=3;B[35]=b&7;b>>>=3;b|=f[k++]<<1&511;B[36]=b&7;b>>>=3;B[37]=b&7;b>>>=3;B[38]=b&7;b=f[k++]&255;D[3]=b&127;b>>>=7;b|=f[k++]<<1&511;H[3]=b&3;b>>>=2;u[3]=b&3;b>>>=2;b|=f[k++]<<5&8191;I[3]=b&63;b>>>=6;B[39]=b&7;b>>>=3;B[40]=b&7;b>>>=3;b|=f[k++]<<1&511;B[41]=b&7;b>>>=3;B[42]=b&7;b>>>=3;B[43]=b&7;b=f[k++]&255;B[44]=b&7;b>>>=3;B[45]=b&7;b>>>=3;b|=f[k++]<<2&1023;B[46]=b&7;b>>>=3;B[47]=b&7;b>>>=3;B[48]=b&7;b>>>=3;b|=f[k++]<<1&511;
B[49]=b&7;b>>>=3;B[50]=b&7;b>>>=3;B[51]=b&7;K(T,D,u,H,I,B,p,160);b=320*n++;for(w=0;320>w;w++)h[b++]=p[w]/32768}h.length=320*n;return h};var e=new Int32Array(160),m=new Int32Array(40),y=new Int32Array(8)};
